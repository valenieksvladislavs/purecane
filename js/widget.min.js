var StampedFn=StampedFn||function(e,t){var a={SERVICE_HOST:{svc_loyalty_widget:"https://stamped.io/api/widgets/loyalty",svc_loyalty_engine:"https://stamped.io/api/v3/loyalty",svc_identity:"https://stamped.io/api/v3/identity"},DEFAULT_ENDPOINT:e.stamped_ajax_url||"//stamped.io/api",SECURE_ENDPOINT:e.stamped_ajax_secure_url||"https://stamped.io/api",metafields:e.mainWidgetMetafields||"",exclude_main_css:e.stamped_exclude_main_css||!1,exclude_font:e.stamped_disable_font||!1,disable_single_review:e.stamped_disable_review_single||!1,modal_ugc_image_viewer:e.stamped_modal_ugc_viewer_type||"image",is_preview:e.isStampedLauncherPreview||!1,is_init_rewards:!0,is_force_jquery:e.stamped_force_jquery||!1,is_disable_cache_badge:e.stamped_disable_cache_badge||!1,is_disable_cache:e.stamped_disable_cache||!1,referral_code:null,is_rewards_code_copy:!1,is_ignore_submit_error:!1,rewards_apply_discount_url_format:e.stamped_rewards_apply_discount_url_format||"",slick_options:e.stamped_slick_options||{dots:!1,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:4,slide:".stamped-review",initialSlide:0,rows:0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},includes_options:{rewards_button_js:!0,rewards_window_js:!0}},s=!1,r=!1,o="";let n=e.location.href.split("?")[1];if(n&&(n=n.split("#")[0]),n){let e=new URLSearchParams(n);"loyalty2023"===e.get("test")&&(console.log("test loyalty 2023 preview"),r=!0),e.has("testLoyaltyAccount")&&(console.log("test loyalty 2023 account"),o=e.get("testLoyaltyAccount"))}var d,l,p=!1,c=!1,m="";e.StampedGlobalOptions={},e.isInitializedStamped=!1;var u,h,f,v,g,w,y,b,S,k,_,I,C,O=[],T=[],E=[],x={},U="div#stamped-main-widget",R={},L="html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video { margin: 0; padding: 0; border: 0; font-size: 100%; font: inherit; vertical-align: baseline; }";function F(){var t,a=!1;return t=navigator.userAgent||navigator.vendor||e.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(a=!0),a}function G(e){if("click"===e.type)return!0;if("keypress"!==e.type)return!1;var t=e.charCode||e.keyCode;return 32===t||13===t||void 0}function j(a){var s=t.createElement("span");s.appendChild(t.createTextNode(a)),s.id="tempCopyToClipboard",t.body.append(s);var r=t.createRange();r.selectNode(s),e.getSelection().removeAllRanges(),e.getSelection().addRange(r),t.execCommand("copy"),e.getSelection().removeAllRanges(),s.remove()}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}e.newFormatStringStamped=(e,t)=>{let a=e;return a?(t.forEach(((e,t)=>{a=a.replaceAll(`{${t}}`,e)})),a):""},String.prototype.formatStringStamped=function(){for(var e=this,t=0;t<arguments.length;t++){var a=new RegExp("\\{"+t+"\\}","gi");e=e.replace(a,arguments[t])}return e},function(){if("function"==typeof e.CustomEvent)return!1;function a(e,a){a=a||{bubbles:!1,cancelable:!1,detail:void 0};var s=t.createEvent("CustomEvent");return s.initCustomEvent(e,a.bubbles,a.cancelable,a.detail),s}a.prototype=e.Event.prototype,e.CustomEvent=a}(),e.lazyLoadOptionsStamped={elements_selector:".stamped-lazyload"},e.addEventListener("LazyLoad::Initialized",(function(t){e.LazyLoadStamped=t.detail.instance}),!1);var N,q,P;!function(){"use strict";var a=void 0!==e,s=a&&!("onscroll"in e)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),r=a&&"IntersectionObserver"in e,i=a&&"classList"in t.createElement("p"),o={elements_selector:"img",container:s||a?t:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"stamped-lazyload-loading",class_loaded:"stamped-lazyload-loaded",class_error:"stamped-lazyload-error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_reveal:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},n=function(a,s){var r,i=new a(s);try{r=new CustomEvent("LazyLoad::Initialized",{detail:{instance:i}})}catch(a){(r=t.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:i})}try{e.dispatchEvent(r)}catch(s){}},d=function(e,t){return e.getAttribute("data-"+t)},l=function(e,t,a){var s="data-"+t;null!==a?e.setAttribute(s,a):e.removeAttribute(s)},p=function(e){return"true"===d(e,"was-processed")},c=function(e,t){return l(e,"ll-timeout",t)},m=function(e){return d(e,"ll-timeout")},u=function(e,t){e&&e(t)},h=function(e,t){e._loadingCount+=t,0===e._elements.length&&0===e._loadingCount&&u(e._settings.callback_finish)},f=function(e){for(var t,a=[],s=0;t=e.children[s];s+=1)"SOURCE"===t.tagName&&a.push(t);return a},v=function(e,t,a){a&&e.setAttribute(t,a)},g=function(e,t){v(e,"sizes",d(e,t.data_sizes)),v(e,"srcset",d(e,t.data_srcset)),v(e,"src",d(e,t.data_src))},w={IMG:function(e,t){var a=e.parentNode;a&&"PICTURE"===a.tagName&&f(a).forEach((function(e){g(e,t)})),g(e,t)},IFRAME:function(e,t){v(e,"src",d(e,t.data_src))},VIDEO:function(e,t){f(e).forEach((function(e){v(e,"src",d(e,t.data_src))})),v(e,"src",d(e,t.data_src)),e.load()}},y=function(e,t){i?e.classList.add(t):e.className+=(e.className?" ":"")+t},b=function(e,t,a){e.addEventListener(t,a)},S=function(e,t,a){e.removeEventListener(t,a)},k=function(e,t,a){S(e,"load",t),S(e,"loadeddata",t),S(e,"error",a)},_=function(e,t,a){var s=a._settings,r=t?s.class_loaded:s.class_error,o=t?s.callback_loaded:s.callback_error,n=e.target;!function(e,t){i?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")}(n,s.class_loading),y(n,r),u(o,n),h(a,-1)},I=["IMG","IFRAME","VIDEO"],C=function(e,t){var a=t._observer;T(e,t),a&&t._settings.auto_unobserve&&a.unobserve(e)},O=function(e){var t=m(e);t&&(clearTimeout(t),c(e,null))},T=function(e,t,a){var s=t._settings;!a&&p(e)||(I.indexOf(e.tagName)>-1&&(function(e,t){var a=function a(r){_(r,!0,t),k(e,a,s)},s=function s(r){_(r,!1,t),k(e,a,s)};!function(e,t,a){b(e,"load",t),b(e,"loadeddata",t),b(e,"error",a)}(e,a,s)}(e,t),y(e,s.class_loading)),function(e,t){var a,s,r=t._settings,i=e.tagName,o=w[i];if(o)return o(e,r),h(t,1),void(t._elements=(a=t._elements,s=e,a.filter((function(e){return e!==s}))));!function(e,t){var a=d(e,t.data_src),s=d(e,t.data_bg);a&&(e.style.backgroundImage='url("'.concat(a,'")')),s&&(e.style.backgroundImage=s)}(e,r)}(e,t),function(e){l(e,"was-processed","true")}(e),u(s.callback_reveal,e),u(s.callback_set,e))},E=function(e){return!!r&&(e._observer=new IntersectionObserver((function(t){t.forEach((function(t){return function(e){return e.isIntersecting||e.intersectionRatio>0}(t)?function(e,t){var a=t._settings;u(a.callback_enter,e),a.load_delay?function(e,t){var a=t._settings.load_delay,s=m(e);s||(s=setTimeout((function(){C(e,t),O(e)}),a),c(e,s))}(e,t):C(e,t)}(t.target,e):function(e,t){var a=t._settings;u(a.callback_exit,e),a.load_delay&&O(e)}(t.target,e)}))}),{root:(a=e._settings).container===t?null:a.container,rootMargin:a.thresholds||a.threshold+"px"}),!0);var a},x=["IMG","IFRAME"],U=function(e,t){return function(e){return e.filter((function(e){return!p(e)}))}((a=e||function(e){return e.container.querySelectorAll(e.elements_selector)}(t),Array.prototype.slice.call(a)));var a},R=function(e,t){this._settings=function(e){return A({},o,e)}(e),this._loadingCount=0,E(this),this.update(t)};R.prototype={update:function(e){var t,a=this,r=this._settings;this._elements=U(e,r),!s&&this._observer?(function(e){return e.use_native&&"loading"in HTMLImageElement.prototype}(r)&&((t=this)._elements.forEach((function(e){-1!==x.indexOf(e.tagName)&&(e.setAttribute("loading","lazy"),T(e,t))})),this._elements=U(e,r)),this._elements.forEach((function(e){a._observer.observe(e)}))):this.loadAll()},destroy:function(){var e=this;this._observer&&(this._elements.forEach((function(t){e._observer.unobserve(t)})),this._observer=null),this._elements=null,this._settings=null},load:function(e,t){T(e,this,t)},loadAll:function(){var e=this;this._elements.forEach((function(t){C(t,e)}))}},a&&function(e,t){if(t)if(t.length)for(var a,s=0;a=t[s];s+=1)n(e,a);else n(e,t)}(R,e.lazyLoadOptionsStamped)}();function $(s,r){r?(Qe("Using included jQ"),l=r,e.jQueryStamped=l,Qe(l)):(Qe("Loaded jQ"),e.jQueryStamped=l),/msie/.test(e.navigator.userAgent.toLowerCase())&&(l.support.cors=!0),1!=StampedGlobalOptions.exclude_font&&l("head").append(l("<link/>",{rel:"stylesheet",href:"//fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap",type:"text/css"}));var i=Je("stamped_referral_code")||Je("stamped_ref");i&&(Xe("stamped_referral_code",{code:i}),a.referral_code=i);var o=Ze("stamped_referral_code");o&&o.code&&(a.referral_code=o.code),Qe("Library Starting..."),l.isReady?D():l(t).ready((function(){D()})),setTimeout((function(){c||(Qe("Library not started, fallback"),D())}),3e3)}function D(){c||(Qe("Started library"),ct("stamped:init:starting"),K(),z()),c=!0}function K(){if(Qe("Starting UGC..."),(u=l(U)).length){he(),fe(),Ie(),be(),ye(),ue(),Se();try{e.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(e){}l(t).on("click keypress",".stamped-summary-ratings .summary-rating",(function(e){if(!0===G(e)){var t=l(this).find(".summary-rating-bar"),a=t.attr("data-rating"),s=t.hasClass("selected");l(".stamped-summary-ratings .summary-rating").each((function(){l(this).removeClass("selected")})),l(".summary-rating-bar").each((function(){l(this).removeClass("selected")})),a&&(s?(Me(1),l(".stamped-summary-ratings").removeClass("selected")):(t.addClass("selected"),l(this).addClass("selected"),l(".stamped-summary-ratings").addClass("selected"),Me(1,a)))}})),l(t).on("mouseover mouseout",".stamped-form-review-rating a.fa",(function(e){var t,a,s;t=e.currentTarget,s=l(t).attr("data-value"),a=l(t).parent(),"mouseover"===e.type?(a.find("a.fa:lt("+s+")").removeClass("fa-star-o").addClass("fa-star"),a.find("a.fa:gt("+(s-1)+")").removeClass("spr-icon-star-hover").addClass("fa-star-o")):a.find("a.fa").removeClass("fa-star").addClass("fa-star-o")})),l(t).on("click keypress",".stamped-tabs li",(function(e){!0===G(e)&&xe(this)})),l(t).on("keypress",".stamped-summary-actions-newreview",(function(e){!0===G(e)&&De("review")})),l(t).on("keypress",".stamped-summary-actions-newquestion",(function(e){!0===G(e)&&De("question")})),l(t).on("keypress",".stamped-form-input a",(function(e){!0===G(e)&&Ke(this)})),s="#shopry-rating-wrapper a.shopry-thumbs-up, #shopry-rating-wrapper a.shopry-thumbs-down, #shopry-rating-holder a.shopry-thumbs-up, #shopry-rating-holder a.shopry-thumbs-down, #stamped-rating-holder a.stamped-thumbs-up, #stamped-rating-holder a.stamped-thumbs-down, .stamped-rating-holder a.stamped-thumbs-up, .stamped-rating-holder a.stamped-thumbs-down",l(t).off("click keypress",s).on("click keypress",s,(function(t){if(!0===G(t)){var s=l(this).attr("data-review-id"),r=l(this).attr("data-question-id"),i=l(this).attr("data-rating"),o=u.attr("data-product-id"),n=l(this),d=n.parent();d.fadeTo("slow",.3),n.addClass("disable-link");var p=s?"reviews":"questions";l.ajax({type:"POST",url:a.SECURE_ENDPOINT+"/"+p+"/vote",data:{productId:o,reviewId:s,questionId:r,vote:i,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl},success:function(e){l(".stamped-thumbs-up i",d).html("&nbsp; "+e.voteUp),l(".stamped-thumbs-down i",d).html("&nbsp; "+e.voteDown),d.fadeTo("slow",1),n.removeClass("disable-link")}})}})),function(){var e=".stamped-share-button, .stamped-share-icon";l(t).off("click keypress",e).on("click keypress",e,(function(e){!0===G(e)&&l(this).parent().find(".stamped-share-links").fadeToggle()}))}(),l(t).on("click keypress",".stamped-summary-actions-mobile-filter",(function(e){if(!0===G(e)){var t=l(".stamped-filters-wrapper");t.hasClass("stamped-mobile-visible")?(t.slideUp(),t.removeClass("stamped-mobile-visible")):(t.slideDown(),t.addClass("stamped-mobile-visible"))}})),l(t).on("click keypress",".stamped-summary-keywords-list li",(function(e){if(!0===G(e)){var t=l(this);t.hasClass("selected")?(l(".stamped-summary-keywords-list li").removeClass("selected"),l(u).removeAttr("data-keyword")):(l(".stamped-summary-keywords-list li").removeClass("selected"),t.addClass("selected"),l(u).attr("data-keyword",t.text().trim())),l(".stamped-summary-actions-clear").show(),Me(1)}})),l(t).on("change keyup",".stamped-reviews-search-input",(function(e){var t;(t=l(this).val())?(l(".stamped-reviews-search-clear").show(),l(".stamped-reviews",u).attr("data-filtered","true")):(l(".stamped-reviews-search-clear").hide(),l(".stamped-reviews",u).removeAttr("data-filtered")),13==e.keyCode&&(t=l(this).val())&&(l(u).attr("data-search",t.trim()),l(".stamped-summary-actions-clear").show(),ke(),Me(1))})),l(t).on("click keypress",".stamped-reviews-search-button",(function(e){if(!0===G(event)){var t=l(".stamped-reviews-search-input").val();t&&(l(u).attr("data-search",t.trim()),l(".stamped-summary-actions-clear").show(),ke(),Me(1))}})),l(t).on("click keypress",".stamped-reviews-search-clear",(function(e){!0===G(e)&&(l(".stamped-reviews-search-clear").hide(),l(".stamped-reviews-search-input").val(""),l(u).removeAttr("data-search"),Me(1))})),l(t).on("click keypress",".stamped-summary-actions-clear",(function(e){!0===G(e)&&We(l(this).data("type"))})),l(t).on("change keyup",".stamped-questions-search-input",(function(e){var t;(t=l(this).val())?(l(".stamped-questions-search-clear").show(),l(".stamped-questions",u).attr("data-filtered","true")):(l(".stamped-questions-search-clear").hide(),l(".stamped-questions",u).removeAttr("data-filtered")),13==e.keyCode&&(t=l(this).val())&&(l(u).attr("data-search-qna",t.trim()),l(".stamped-summary-actions-clear").show(),Ve())})),l(t).on("click keypress",".stamped-questions-search-button",(function(e){if(!0===G(event)){var t=l(".stamped-questions-questions-input").val();t&&(l(u).attr("data-search-qna",t.trim()),l(".stamped-summary-actions-clear").show(),Ve())}})),l(t).on("click keypress",".stamped-questions-search-clear",(function(e){!0===G(e)&&(l(".stamped-questions-search-clear").hide(),l(".stamped-questions-search-input").val(""),l(u).removeAttr("data-search-qna"),Ve())})),l(t).one("stamped:reviews:loaded",(function(){Qe("Main Widget event triggered reload once"),fe(),Ie(),be(),Se(),Je("write_review")&&De("review"),Je("write_question")&&De("question")})),l(t).on("stamped:reviews:loaded",(function(t){Qe("Main Widget event triggered reload"),E=[],ye(),ue();try{e.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(e){}l(".stamped-tabs > li").click((function(){Array.prototype.slice.call(this.parentNode.children).forEach((function(e){e.setAttribute("aria-selected",!1)}));var e=this.getAttribute("aria-selected");this.setAttribute("aria-selected",!JSON.parse(e))})),l(".stamped-share-icon").click((function(){var e=l(this).siblings(".stamped-share-links"),t=e.attr("aria-expanded"),a=void 0!==t&&!1!==t?t:"false";e.attr("aria-expanded","true"==a?"false":"true"),l(this).toggleClass("stamped-active")})),l(".stamped-rating-holder > a").click((function(){Array.prototype.slice.call(this.parentNode.children).forEach((function(e){e.setAttribute("aria-pressed",!1)}));var e=this.getAttribute("aria-pressed");this.setAttribute("aria-pressed",!JSON.parse(e))}))}))}var s;l(t).one("stamped:launcher:loaded",(function(t){var a=Je("rewards-launcher");l(e).on("hashchange",(function(){location.hash.indexOf("stamped-rewards")>=0&&W()})),a&&("open"==a&&W(),a.indexOf("view-")>-1&&(W(!0),ee(a)))})),ve(),ge();var r=Je("stamped_r_id");r&&1!=a.disable_single_review&&function(s){l.ajax({type:"GET",url:a.SECURE_ENDPOINT+"/widget/reviews",data:{reviewId:s,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,type:"single",showAvatar:"True",minRating:1},success:function(e){e.data&&StampedFn.openUGCModal([e.data],0,t,1,!1,0)},error:function(e){}})}(r)}function z(t){Qe("Starting Rewards...");var a=l("#stamped-rewards-init");if(t&&t.customer)return Qe("Started Rewards with direct data"),R=t,void M();t?(Qe("Started Rewards with JS data"),R.customer=t,V()):a.length>0?(Qe("Started Rewards with div data"),R.customer={customerId:a.data("customer-id"),customerEmail:a.data("customer-email"),customerFirstName:a.data("customer-first-name"),customerLastName:a.data("customer-last-name"),customerTags:a.data("customer-tags"),customerLocale:a.data("customer-locale"),totalOrders:0,totalSpent:a.data("customer-total-spent"),isAcceptMarketing:a.data("customer-accepts-marketing"),authToken:a.data("key-auth")},V()):Qe("Started Rewards no init customer data"),R&&0===Object.keys(R.customer||{}).length&&(R.customer={customerId:a.data("customer-id")||e.__st&&e.__st.cid||e.meta&&e.page&&e.meta.page.customerId})}function V(){Qe("Loading Rewards API init...");var t=a.metafields||"";R&&R.customer&&t&&(R.customer.metafields=t);var i=JSON.stringify(R.customer),n=a.is_test;let d=a.SECURE_ENDPOINT+"/v2/rewards/init?",p=e.StampedGlobalOptions.storeUrl?encodeURIComponent(e.StampedGlobalOptions.storeUrl):e.StampedGlobalOptions.sId;l.ajax({type:"GET",dataType:"json",url:`${a.SERVICE_HOST.svc_identity}/shop/${p}/check-feature/loyalty2023`,success:function(e,t,i){e.hasFeature||r?(console.log("Enabling Loyalty 2.0..."),s=!0,d=`${a.SERVICE_HOST.svc_loyalty_widget}/launcher?`):(s=!1,console.log("Enabling Loyalty 1.0..."))},error:function(){s=!1,console.log("Error, default to Loyalty 1.0...")}}).then((()=>{const t={apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,debug:null,isTest:n,isPreview:a.is_preview,referralCode:a.referral_code};r&&(t.testLoyalty2023=r,o&&(t.testLoyaltyAccount=o)),console.log("Loading",d),l.ajax({type:"POST",url:d+l.param(t),xhrFields:{withCredentials:!0},data:i,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e,t,a){ct("stamped:rewards:init"),R=e,M()}})}))}function M(){!function(){if(!l("#stamped-rewards-init").length){var i=t.createElement("div");i.setAttribute("id","stamped-rewards-init"),t.body.appendChild(i)}let o=e.StampedGlobalOptions.storeUrl?encodeURIComponent(e.StampedGlobalOptions.storeUrl):e.StampedGlobalOptions.sId;l.ajax({type:"GET",dataType:"json",url:`${a.SERVICE_HOST.svc_identity}/shop/${o}/check-feature/loyalty2023`,success:function(e,t,a){s=!(!e.hasFeature&&!r)},error:function(){s=!1,console.log("Error, default to Loyalty 1.0...")}})}(),R&&R.html&&((h=l("#stamped-rewards-init")).html(R.html.main),function(){g=l(".stamped-rewards-launcher",h),w=l(".stamped-launcher-button",h),S=l("<iframe>");var e=w.html();Qe("Func _buildIframeLauncher: width:"+w.width(),1),Qe("Func _buildIframeLauncher: outerWidth:"+w.outerWidth(),1),Qe("Func _buildIframeLauncher: var launcherWidth:"+(C=w.width()+40),1),w.width(C),w.html(S),g.hide(),setTimeout((function(){k=S[0].contentWindow.document,S[0].contentWindow.StampedFn=StampedFn,S[0].contentWindow.jQuery=jQuery;var t=l("body",k),s=l("head",k);if(t.html(e),t.append(l("#stamped-rewards-main-css",h).clone()),s.append(l("<link/>",{rel:"stylesheet",href:"//cdn1.stamped.io/files/rewards-launcher.min.css",type:"text/css"})),0!=a.includes_options.rewards_button_js){var r=k.createElement("script");r.type="text/javascript",r.src="https://kit.fontawesome.com/c66d4e7704.js",r.setAttribute("data-observe-mutations","true"),k.body.appendChild(r)}s.append("<style>"+L+' body { overflow:hidden; } .stamped-launcher-icon-opened { font-family:"Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; display:inline-block; width: 100%; margin-top: -2px; text-align:center;}</style>'),F()&&t.attr("data-mobile",!0),y=l(".stamped-launcher-icon-closed",t),b=l(".stamped-launcher-icon-opened",t),g.fadeIn()}),0)}(),function(){f=l(".stamped-rewards-base",h),$launcherCss=l("#stamped-rewards-main-css",h).clone(),_=l("<iframe>");var r=f.html();f.html(_),setTimeout((function(){I=_[0].contentWindow.document,_[0].contentWindow.StampedFn=StampedFn,_[0].contentWindow.jQuery=jQuery;var i,o=l("body",I),n=l("head",I);if(o.html(r),o.append(l("#stamped-rewards-main-css",h).clone()),n.append(l("<link/>",{rel:"stylesheet",href:"//cdn1.stamped.io/files/rewards-main.min.css",type:"text/css"})),1!=StampedGlobalOptions.exclude_font&&n.append(l("<link/>",{rel:"stylesheet",href:"//fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap",type:"text/css"})),s){console.log("Loading new FA css...");var d="//s3-us-west-2.amazonaws.com/stamped.io/cdn/fontawesome/css/all-6.4.min.css",p=I.createElement("link");p.rel="stylesheet",p.href=d,I.getElementsByTagName("head")[0].appendChild(p)}else{n.append("<script>window.FontAwesomeConfig = { searchPseudoElements: true };<\/script>");var c=I.createElement("script");c.type="text/javascript",c.src="https://kit.fontawesome.com/c66d4e7704.js",c.setAttribute("data-observe-mutations","true"),c.setAttribute("data-search-pseudo-elements","true"),I.body.appendChild(c)}o.append("<style>"+L+' .stamped-rewards-window { font-family:"Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; }</style>'),F()&&o.attr("data-mobile",!0),R.customer&&R.customer.customerEmail?o.attr("data-logged-in",!0):o.attr("data-logged-in",!1),1==R.branding&&o.attr("data-branding",!0),$wrapperCards=l("#stamped-rewards-cards",I),$wrapperViews=l("#stamped-rewards-views",I),l(I).on("click",".stamped-rewards-header-close",(function(){W()})),l(I).on("click","#launcherSendAffiliateInvite",(function(){"Send more"==l("#launcherSendAffiliateInvite",I)[0].innerHTML?ce():pe()})),l(t).on("touchstart",(function(){i=!0})),l(t).on("touchmove",(function(){i=!1})),l(t).on("click touchend",(function(e){if("click"===e.type&&(i=!0),i)if("stamped-rewards-init"===e.target.id||l(e.target).parents("#stamped-rewards-init").length||l(e.target).parents(".stamped-rewards-base").length||l(e.target).parents(".stamped-rewards-launcher").length||l(e.target).parents("#stamped-rewards-widget").length);else{var t=l(".stamped-rewards-base",h).hasClass("opened");setTimeout((function(){t&&StampedFn.toggleLauncher()}),300)}})),l(I).on("click",'[data-campaign-completed="false"] .stamped-reward-card-button-earn',(function(){var t=l(this).parent(".stamped-rewards-card-earn"),s=l(this);let r=t.data("campaign-id"),i=t.data("event-type");if(Y()){if("celebrateBirthday"===i){let o=l(".stamped-rewards-birthday-input-holder",I);o.show();let n=l(".stamped-rewards-birthday-input-holder select.DOBDay option:checked",I).val(),d=l(".stamped-rewards-birthday-input-holder select.DOBMonth option:checked",I).val(),p=l(".stamped-rewards-birthday-input-holder select.DOBYear option:checked",I).val();if(n&&d&&p){let c=p+"-"+d+"-"+n;s.addClass("btn-loading"),s.html('<span class="stamped-button-icon stamped-button-loading"></span>');let m=e.StampedGlobalOptions.storeUrl,u=e.StampedGlobalOptions.sId,h=e.StampedGlobalOptions.apiKey;l.ajax({type:"POST",url:`${a.SERVICE_HOST.svc_loyalty_widget}/customer/update/date-of-birth?storeUrl=${m}&sId=${u}&apiKey=${h}`,data:{email:R.customer.customerEmail,authToken:R.customer.authToken,dateOfBirth:c},dataType:"json",success:function(e,a,n){s.html('<span class="stamped-button-icon stamped-button-completed"><i class="fa-solid fa-check"></i></span>'),s.attr("disabled",!0),o.hide(),t.attr("data-campaign-completed","true"),t.attr("data-birthday","true"),R.customer.dateBirthday=!0,se(r,i),ct("stamped:rewards:redeemed",{detail:e})},error:function(e){console.log("Birthday update failed"),console.log(e)}})}return}s.addClass("btn-loading"),s.html('<span class="stamped-button-icon stamped-button-loading"></span>'),se(r,i,(function(){setTimeout((function(){s.removeClass("btn-loading"),s.addClass("stamped-button-disabled"),s.hide()}),200)}),(function(){s.removeClass("btn-loading"),s.addClass("stamped-button-disabled"),s.hide()}))}else if("AccountBirthday"==i){var o=l(".stamped-rewards-birthday-input-holder",I);o.show();var n=l(".stamped-rewards-birthday-input-holder select.DOBDay option:checked",I).val(),d=l(".stamped-rewards-birthday-input-holder select.DOBMonth option:checked",I).val(),p=l(".stamped-rewards-birthday-input-holder select.DOBYear option:checked",I).val();n&&d&&p&&(me(s,"loading",!0),re({campaignId:r,campaignEventType:i,birthday:p+"-"+d+"-"+n,callback:function(){me(s,"active",!0,null,(function(){t.attr("data-campaign-completed","true"),t.attr("data-birthday","true"),V()})),o.hide()}}))}else"Review"==i||"ReviewPhoto"==i||"ReviewVideo"==i?(Z("reviews"),ee("main")):(me(s,"loading",!0),re({campaignId:r,campaignEventType:i,callback:function(){me(s,"active",!0,null,(function(){t.attr("data-campaign-completed","true")}))}}))})),l(I).on("click",'[data-campaign-redeemable="true"] .stamped-reward-card-button-spend',(function(){var e=l(this),t=e.parent(".stamped-rewards-card-spend"),a=t.data("campaign-id"),s=t.data("coupon-type");if(Y())return me(e,"loading",!0),void ne(a,s,(function(t){let a={};a.couponCode=t.code,a.title=t.title,ee("view-coupon",null,a),me(e,"active",!0,1)}));"Variable"==s?ee("view-redeem-variable",null,{entityId:a}):(me(e,"loading",!0),ie({campaignId:a,callback:function(t){ee("view-coupon",null,t.rewardCampaignCoupon),me(e,"active",!0,1)}}))})),l(I).on("click",".stamped-reward-referral-platforms button",(function(){var t,a=l(this).attr("href");a&&(t=a,e.open(t,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes"))})),l(I).on("click",".stamped-rewards-header-menu span",(function(){var e=l(this).attr("data-target");e!=$wrapperCards.attr("data-target")&&($wrapperCards.attr("data-target",e),X(e),l(".stamped-rewards-content-container",I).scrollTop(0),l(".stamped-rewards-header-menu .active",I).removeClass("active"),l(this,I).addClass("active"))})),l(".stamped-rewards-content-container",I).on("scroll",(function(){var e=l(".stamped-rewards-content-container",I).scrollTop();if(e<=1)return l(".stamped-rewards-background",I).height("200px"),void l(".stamped-rewards-header",I).height("auto");var t=l(".stamped-rewards-header-content",I).outerHeight()+15;l(".stamped-rewards-header",I).css("min-height","70px");var a=200;a-=e,l(".stamped-rewards-background",I).height(a);var s=t;s-=e,l(".stamped-rewards-header",I).height(s)})),X("rewards"),ct("stamped:launcher:loaded")}),1e3)}(),we())}function W(t){var s=f.hasClass("opened");l("body",I).addClass("opened"),s?1!=t&&(Qe("Func _toggleRewardsModal: var launcherWidth:"+C,1),f.removeClass("opened"),f.fadeOut(),g.removeClass("opened"),y.removeClass("rotateIn"),b.removeClass("fadeOut"),b.addClass("fadeIn"),w.animate({width:C+"px"},0),setTimeout((function(){ee("main")}),1e3),ct("stamped:launcher:closed")):(setTimeout((function(){f.addClass("opened")}),100),g.addClass("opened"),f.fadeIn(),y.addClass("rotateIn"),y.removeClass("rotateOut"),b.addClass("fadeOut"),b.removeClass("fadeIn"),w.animate({width:"40px"},0),l(".stamped-rewards-content-container",I).scrollTop(0),l(".stamped-rewards-header",I).css("height","auto"),ct("stamped:launcher:opened"),"true"!=Ne("stamped-launcher-opened")&&(l.ajax({type:"POST",url:a.SECURE_ENDPOINT+"/tracking/event?"+l.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,source:"launcher",event:"open"}),dataType:"json",success:function(e,t,a){}}),Ae("stamped-launcher-opened",!0,1)))}function B(t,s,r){var i=t.search,o=t.customOptionTitle?t.customOptionTitle+"||"+t.customOptionValue:"",n=t.topic,d=i||n||o,p=1;o&&(p=2),n&&(p=3),l.ajax({type:"POST",url:a.SECURE_ENDPOINT+"/tracking/event?"+l.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,event:"search",source:"m"}),data:JSON.stringify({source:"m",sourceId:s,type:p,text:d,results:r}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e,t,a){}})}function H(t){const s={apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl};r&&(s.testLoyalty2023=r,o&&(s.testLoyaltyAccount=o)),l.ajax({type:"POST",url:`${a.SERVICE_HOST.svc_loyalty_widget}/launcher/points?`+l.param(s),data:R.customer,dataType:"json",success:function(e,a,s){setTimeout((function(){l(".stamped-rewards-header-main-points, .stamped-rewards-header-small-points",I).html(e.points_current_with_name),l("#label-balance-points",I).html(e.points_current_with_name);let t=l("#stamped-rewards-widget");l(".stamped-rewards-widget-points",t).html(e.points_current_with_name)}),100),t&&t(e)}})}function J(t){l.ajax({type:"POST",url:a.SECURE_ENDPOINT+"/v2/rewards/points?"+l.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl}),data:R.customer,dataType:"json",success:function(e,a,s){setTimeout((function(){l(".stamped-rewards-header-main-points, .stamped-rewards-header-small-points",I).html(e.points_current_with_name)}),5e3),t&&t(e)}})}function Q(t){return t=t||{},R||R.customer||console.log("Customer not logged in to create reward activity"),l.ajax({type:"POST",url:a.SECURE_ENDPOINT+"/v2/rewards/add?"+l.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,campaignId:t.campaignId}),data:R.customer,dataType:"json",success:function(e,a,s){t.callback&&t.callback(e,a,s),J(),ct("stamped:rewards:earned",{detail:e})}})}function Y(){let t=e.StampedGlobalOptions.storeUrl?encodeURIComponent(e.StampedGlobalOptions.storeUrl):e.StampedGlobalOptions.sId;return l.ajax({type:"GET",dataType:"json",url:`${a.SERVICE_HOST.svc_identity}/shop/${t}/check-feature/loyalty2023`,success:function(e,t,a){s=!(!e.hasFeature&&!r)},error:function(){s=!1,console.log("Error, default to Loyalty 1.0...")}}),s}function X(e){$wrapperCards.html(""),l("body",I).attr("data-view",e);for(var t=0;t<R.html.cards.length;t++){var a=R.html.cards[t];if(a&&a.html&&e==a.type){var s=l(a.html);s.attr("data-key",a.key),$wrapperCards.append(s),"reviews"===e&&Y()&&oe()}}}function Z(e){"reviews"==e&&l('.stamped-rewards-header-menu span[data-target="reviews"]',I).trigger("click")}function ee(t,i,n,d=null){v=l(".stamped-rewards-window",I),l(".stamped-rewards-content-container",I).scrollTop(0),l(".stamped-rewards-header-nav",I).attr("onclick","StampedFn.loadLauncherView('main');"),l("body",I).attr("data-view",t);var p=l(i).attr("data-title");if(v)if("main"==t){v.removeClass("stamped-rewards-nav-small"),v.addClass("stamped-rewards-nav-big"),l(".stamped-rewards-header-main, .stamped-rewards-header-menu",I).fadeIn(),l(".stamped-rewards-header-small",I).hide();var c=l(".stamped-rewards-header-content",I).outerHeight()+15;l(".stamped-rewards-header",I).height(c),l(".stamped-rewards-background",I).height("200"),$wrapperViews.hide(),$wrapperCards.fadeIn()}else{var m=!1;if(n&&1==n.reload)m=!1;else if("view-redeem-variable"==t)m=!1;else for(var u=0;u<R.html.views.length;u++){var h=R.html.views[u];h.key==t&&(h.title&&(p=h.title),m=!0,te(h.html),ae(t,p,n))}if(!m){te(),ae(t,p,n);var f=null;n&&n.entityId&&(f=n.entityId);var g=a.is_test;let i=e.StampedGlobalOptions.storeUrl?encodeURIComponent(e.StampedGlobalOptions.storeUrl):e.StampedGlobalOptions.sId;l.ajax({type:"GET",dataType:"json",url:`${a.SERVICE_HOST.svc_identity}/shop/${i}/check-feature/loyalty2023`,success:function(e,t,a){s=!(!e.hasFeature&&!r)},error:function(){s=!1,console.log("Error, default to Loyalty 1.0...")}});var w=a.SECURE_ENDPOINT+"/v2/rewards/cardview";s&&(w=`${a.SERVICE_HOST.svc_loyalty_widget}/templates/cardview`);let c={apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,viewKey:t,entityId:f,referralCode:a.referral_code,isTest:g};n&&n.query&&(c=Object.assign(c,n.query)),r&&(c.testLoyalty2023=r,o&&(c.testLoyaltyAccount=o)),l.ajax({type:"POST",url:w+"?"+l.param(c),data:R.customer,dataType:"json",success:function(e,a,s){e&&e.html?(R.html.views.push(e),setTimeout((function(){var a=!1;"view-redeem-variable"===e.key&&(a=!0,d&&d()),te(e.html,!1,a),ae(t,e.title||p,n)}),1e3)):ee("main")},error:function(){ee("main")}})}}}function te(e,t,a){if(e){var s=l(e);$wrapperViews.html(s),$wrapperViews.removeClass("loading")}else $wrapperViews.html(""),l(".stamped-view-loader",$wrapperViews).length||$wrapperViews.append(l('<div class="stamped-view-loader"></div>')),$wrapperViews.addClass("loading");0!=t&&(v.addClass("stamped-rewards-nav-small"),v.removeClass("stamped-rewards-nav-big"),l(".stamped-rewards-header-main, .stamped-rewards-header-menu",I).hide(),l(".stamped-rewards-header-small",I).fadeIn(),$wrapperCards.hide(),$wrapperViews.fadeIn()),a&&StampedFn.toggleLauncher(!0)}function ae(e,t,a){var r,i=(a?a.viewTitle:t)||t;if("view-coupon"==e&&(l(".stamped-reward-coupon-code",$wrapperViews).text(a.couponCode),l(".stamped-reward-card-title",$wrapperViews).html(a.title),function(e,t){l(".stamped-rewards-header-nav",I).attr("onclick","StampedFn.loadLauncherView('"+e+"', null, { reload: "+(t||!1)+"});")}("view-your-rewards",!0)),"view-earnings"==e&&R&&R.customer){var o=l('[data-event-type="AccountBirthday"]',I);if(s&&(o=l('[data-event-type="celebrateBirthday"]',I)),o.length)R.customer.dateBirthday?o.attr("data-birthday","true"):(o.attr("data-birthday","false"),o.prepend(l(".stamped-rewards-birthday-input-holder",I)))}if("view-redeem-variable"==e){if($selectorInput=l(".range-slider__range",$wrapperViews),$selectorInput.length){var n=$selectorInput.data("format-points"),d=$selectorInput.data("format-points-name"),p=$selectorInput.data("currency"),c=$selectorInput.attr("step"),m=$selectorInput.data("discount-value");function u(){var e=$selectorInput.val(),t=e/c*m,a=new Intl.NumberFormat("en-US",{style:"currency",currency:p});l("#redeem-points",$wrapperViews).text(n.formatStringStamped(e,d)),l("#redeem-amount",$wrapperViews).text(a.format(t))}$selectorInput.on("input",(function(){u()})),l(".stamped-rewards-content-action-button ",$wrapperViews).on("click",(function(){!function(e){var t=l(e),r=$selectorInput.val(),i={campaignId:a.entityId,points:r};if(s)return me(t,"loading",!0),void ne(a.entityId,"variableDiscount",(function(e){let a=e.code,s=e.title;me(t,"active",!0,1),ee("view-coupon",null,{couponCode:a,title:s,viewTitle:s})}),null,r);StampedFn.rewardsRedeem(l(e),i,(function(e){var t=e.rewardCampaignCoupon.couponCode,a=e.rewardCampaignCoupon.title;ee("view-coupon",null,{couponCode:t,title:a,viewTitle:a})}))}(this)})),u()}}i&&(r=i,l(".stamped-rewards-header-small-title",I).text(r))}function se(t,s,r=null,i=null){R.shopId;const o=R.customer.customerId;var n=R.links;if(!o)return void(e.location.href=n.signup);e.StampedGlobalOptions.sId=R.shopId;let d=R.campaigns.earnings.filter((e=>e.id===t))[0]||R.campaigns.tierEarnings.filter((e=>e.id===t))[0],p="";switch(s){case"facebookLike":p="socials/facebook_like",e.open(d.socialLink,"_blank");break;case"facebookShare":p="socials/facebook_share",e.open(d.socialLink,"_blank");break;case"instagramFollow":p="socials/instagram_follow",e.open(d.socialLink,"_blank");break;case"twitterFollow":p="socials/twitter_follow",e.open(d.socialLink,"_blank");break;case"twitterShare":p="socials/twitter_share",e.open(d.socialLink,"_blank");break;case"youTubeSubscribe":p="socials/youtube_subscribe",e.open(d.socialLink,"_blank");break;case"tikTokFollow":p="socials/tiktok_follow",e.open(d.socialLink,"_blank");break;case"pinterestFollow":p="socials/pinterest_follow",e.open(d.socialLink,"_blank");break;case"celebrateBirthday":p="milestones/birthday";break;case"subscribeNewsletter":p="subscriptions/newsletter";break;case"writeReview":case"uploadVideo":case"uploadPhoto":return Z("reviews"),void ee("main")}p?l.ajax({type:"POST",url:`${a.SERVICE_HOST.svc_loyalty_widget}/customer/transactions`,data:{event:p,ruleCorrelationId:t,customerId:o,authToken:R.customer.authToken,apiKey:e.StampedGlobalOptions.apiKey,sId:R.shopId||e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl},dataType:"json",success:function(e,t,a){r&&r(e),H(),ct("stamped:rewards:redeemed",{detail:e})},error:function(e){console.log("Error submitting earn event transaction."),i&&i()}}):console.log(`Error: Earn Activity event ${p} not matched.`)}function re(t){var s=(t=t||{}).campaignEventType;if("AccountBirthday"==s)!function(t){t=t||{},l.ajax({type:"POST",url:a.SECURE_ENDPOINT+"/v2/rewards/addBirthday?"+l.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,dateBirthday:t.birthday}),data:R.customer,success:function(e,a,s){t.callback&&t.callback()}})}(t);else if("SocialFollowInstagram"==s||"SocialFollowFacebook"==s||"SocialShareFacebook"==s||"SocialFollowTwitter"==s||"SocialShareTwitter"==s||"SocialYouTube"==s||"SocialFollowTiktok"==s||"SocialShareTiktok"==s||"SocialFollowPinterest"==s){Q({campaignId:t.campaignId,callback:t.callback});var r=R.links;if("SocialFollowInstagram"==s)e.open(r.instagram,"_blank").focus();else if("SocialFollowFacebook"==s)e.open("https://www.facebook.com/plugins/page.php?href="+r.facebook,"_blank","location=yes,height=250,width=340,top=50,left=50,scrollbars=yes,status=yes");else if("SocialShareFacebook"==s)e.open("https://www.facebook.com/sharer/sharer.php?u="+r.shop,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes");else if("SocialFollowTwitter"==s){e.open(r.twitter,"_blank").focus()}else"SocialShareTwitter"==s?e.open("https://twitter.com/intent/tweet?url="+r.shop,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes"):"SocialYouTube"==s?e.open(r.youtube,"_blank"):"SocialFollowTiktok"==s||"SocialShareTiktok"==s?e.open(r.tiktok,"_blank"):"SocialFollowPinterest"==s&&e.open(r.pinterest,"_blank")}}function ie(t){!function(t){t=t||{},l.ajax({type:"POST",url:a.SECURE_ENDPOINT+"/v2/rewards/redeem?"+l.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,campaignId:t.campaignId,points:t.points}),data:R.customer,dataType:"json",success:function(e,a,s){t.callback&&t.callback(e),J(),ct("stamped:rewards:redeemed",{detail:e})}})}({campaignId:(t=t||{}).campaignId,callback:t.callback})}function oe(){const t=R.shopId||e.StampedGlobalOptions.sId,s=e.StampedGlobalOptions.apiKey,r=`${a.SERVICE_HOST.svc_loyalty_widget}/customer/product-reviews?sId=${t}&apiKey=${s}&customerEmail=${R.customer.customerEmail}`,o=R.customer.customerId;$wrapperCards.addClass("btn-loading"),$wrapperCards.append('<span class="stamped-button-icon stamped-button-loading" style="width: 20em; height: 20em;"></span>'),o?l.ajax({type:"GET",url:r,dataType:"json",success:function(e,t,a){for($wrapperCards.removeClass("btn-loading"),$wrapperCards.find(".stamped-button-icon").remove(),i=0;i<e.length;i++){const t=l(e[i]);t.attr("data-key","card-orders"),$wrapperCards.append(t)}},error:function(e){console.log("Error retrieving review requests.")}}):e.location.href=shopLinks.signup}function ne(t,s,r=null,i=null,o=null,n=null){R.shopId;const d=R.customer.customerId;if(!d)return void(e.location.href=shopLinks.signup);e.StampedGlobalOptions.sId=R.shopId;let p=R.campaigns.spendings.filter((e=>e.id===t))[0]||R.campaigns.tierSpendings.filter((e=>e.id===t))[0],c="";switch(s){case"freeShipping":case"rechargeFreeShipping":c="redeem/shipping";break;case"giftCard":c="redeem/gift_card";break;case"posPercentageOff":c="redeem/percentage_pos";break;case"percentageOffDiscount":case"rechargePercentageOffDiscount":c="redeem/percentage";break;case"posFixedAmountDiscount":c="redeem/fixed_pos";break;case"fixedAmountDiscount":case"rechargeFixedAmountDiscount":c="redeem/fixed";break;case"variableDiscount":case"rechargeVariableDiscount":c="redeem/variable";break;case"freeProduct":c="redeem/product";break;case"storeCredit":c="redeem/store_credit"}c?"redeem/variable"!==c||o?l.ajax({type:"POST",url:`${a.SERVICE_HOST.svc_loyalty_widget}/customer/transactions`,data:{event:c,ruleCorrelationId:p.ruleCorrelationId,points:o,customerId:d,authToken:R.customer.authToken,apiKey:e.StampedGlobalOptions.apiKey,sId:R.shopId||e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl},dataType:"json",success:function(e,t,a){H((function(t){r&&r(e,t)})),ct("stamped:rewards:redeemed",{detail:{customerId:e.customerId,event:e.event,code:e.code,title:e.title,rewardCampaignCoupon:{couponCode:e.code}}})},error:function(e){console.log("Error submitting spend event transaction."),i&&i()}}):ee("view-redeem-variable",null,{entityId:t},n):console.log(`Error: Spend Activity event ${c} not matched.`)}function de(e){var t=l("#stamped-rewards-apply-code",I);"active"==e&&l(".stamped-rewards-coupons-view",I).attr("data-applied","true"),me(t,e)}function le(e){l(".stamped-reward-card-error",this.document).text(e),l(".stamped-reward-card-error",I).text(e)}function pe(){let t=l("#email-to",I),s=l("#email-message",I),r=l("#launcherSendAffiliateInvite",I),i=t.val(),o=s.val();StampedFn.getOptions();if(!i)return;me(r,"loading",!0);let n=i.split(",").map((function(e){return e.trim()})),d=R.shopId||e.StampedGlobalOptions.sId,p=e.StampedGlobalOptions.apiKey,c=`${a.SERVICE_HOST.svc_loyalty_widget}/customer/affiliate/send-invite?sId=${d}&apiKey=${p}`,m=n.map((e=>new Promise(((t,a)=>{l.ajax({type:"POST",url:c,data:{to:e,from:R.customer.customerEmail,customMessage:o},success:function(e){t(e)},error:function(e){var t=e.responseJSON?e.responseJSON.message:e.responseText?JSON.parse(e.responseText).message:"Error: Cannot send email.";a(t)}})}))));Promise.all(m).then((e=>{l(".stamped-reward-card-success",I).show()})).catch((e=>{l("#email-to",I).css("border-color","#FF5656"),l(".stamped-reward-card-error",I).text(e)})),setTimeout((function(){r.css("width","fit-content"),r.html("Send more"),r.removeClass("stamped-button-disabled")}),1e3)}function ce(){let e=l("#email-to",I),t=l(".stamped-reward-card-error",I),a=l("#email-message",I),s=l(".stamped-reward-card-success",I),r=l("#launcherSendAffiliateInvite",I),i=r.attr("data-original-text");e.val(""),e.css("border-color","#E8E8EB"),t.text(""),a.val(""),s.hide(),r.html(i)}function me(e,t,a,s,r){if("loading"==t){var i=e.width();e.attr("data-original-text",e.text()),e.addClass("stamped-button-disabled"),i>=10&&e.width(i),e.html('<span class="stamped-button-icon stamped-button-loading"></span>')}else a||e.html('<span class="stamped-button-icon stamped-button-completed"><i class="far fa-check"></i></span>'),setTimeout((function(){var t=e.attr("data-original-text");e.html(t),e.removeClass("stamped-button-disabled"),e.width("auto"),r&&r()}),s||7878)}function ue(){Qe("Func initWidgetType");var t=l(".stamped-container",u).attr("data-widget-style");if("slider"==t){Qe(P=l(".stamped-reviews",u),1);var s=P&&P.hasClass("slick-initialized");if(Qe("Func initWidgetType: var initialized:"+s,1),s)P.slick("slickAdd",l(".stamped-reviews > .stamped-review")),l('.stamped-reviews [class*="stamped-review"]',u).length<=0?l("button.slick-arrow").hide():l("button.slick-arrow").show();else Ye("//cdn.stamped.io/cdn/js/slick.min.js",(function(){P.slick(a.slick_options),P.on("afterChange",(function(e,t,a){if(l(".slick-next.slick-arrow").hasClass("slick-disabled")){_lastSlide=a;var s=l(".stamped-pagination .next a");s.length&&s.click()}}))}))}else if("masonry"==t){var r={container:".stamped-reviews",margin:{x:15,y:15},breakAt:{1500:4,1200:3,700:2,500:2},columns:4};e.macyInstanceConfig&&(e.macyInstanceConfig.breakAt&&(r.breakAt=e.macyInstanceConfig.breakAt),e.macyInstanceConfig.columns&&(r.columns=e.macyInstanceConfig.columns)),Ye("//cdn.stamped.io/cdn/js/macy2.js",(function(){e.macyInstanceStamped=Macy(r),ct("stamped:macy:loaded")}))}if(l(".stamped-sort-select").length){var i=u.attr("data-sort")||l(".stamped-container",u).attr("data-widget-sort");if(i){var o=l('.stamped-sort-select option[value="'+i+'"]');o.css("display")&&"none"!==o.css("display")&&l(".stamped-sort-select").val(i)}}}function he(e){u&&u.length&&!e||(u=l(U)),Oe()}function fe(){Qe("Creating Q&A"),Ee()}function ve(){!function(){var t;Qe("Loading Badges..."),(O=l(".stamped-product-reviews-badge[data-id], .stamped-product-reviews-badge[data-product-id]")).length&&(t=l.map(O,(function(e){if(l(e).attr("data-id")||l(e).attr("data-product-id")||l(e).attr("data-type")||l(e).attr("data-product-type")||l(e).attr("data-product-sku")||l(e).attr("data-product-title"))return{productId:l(e).attr("data-id")||l(e).attr("data-product-id"),productType:l(e).attr("data-product-type"),productSKU:l(e).attr("data-product-sku")||l(e).attr("data-product-sku2"),productTitle:l(e).attr("data-product-title")}})),t&&t.length&&l.ajax({type:"POST",dataType:"json",contentType:"application/json",url:a.SECURE_ENDPOINT+"/widget/badges"+(!0===a.is_disable_cache_badge?"?isUseCache=false":""),data:JSON.stringify({productIds:t,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl}),success:function(e){O.each((function(t){var a=l(this).attr("data-id")||l(this).attr("data-product-id"),s=l(this).attr("data-type"),r=l.map(e,(function(e,t){if(e.productId==a)return t}))[0];r>=0&&(!s||"review"==s)?l(this).html(e[r].badge):r>=0&&"qna"==s&&l(this).html(e[r].badgeqna)})),ct("stamped:badges:loaded")},error:function(e){}}));l(".stamped-product-reviews-badge[data-id].stamped-main-badge, .stamped-product-reviews-badge:first").length&&l(".stamped-product-reviews-badge[data-id].stamped-main-badge, .stamped-product-reviews-badge:first").on("click",(function(){"qna"===l(this).attr("data-type")?(l("#stamped-questions-placeholder").length?$e("#stamped-questions-placeholder"):(xe(null,"questions"),$e(U)),l(".stamped-badge-caption[data-questions]").length&&"0"===l(".stamped-badge-caption[data-questions]").attr("data-questions")&&l(".new-question-form").show()):(xe(null,"reviews"),$e(U))}))}()}function ge(){var e=l("#stamped-reviews-widget").length;if(Qe("Creating display widgets "+e+" found"),ct("stamped:widget:reloading"),e>0){var t=[],a=1;l("[id=stamped-reviews-widget]").each((function(e){var s=l(this);s.attr("data-element-id",a);var r=Fe(s);t.push(r),a++})),Ge("ugc",t)}}function we(){var t=R;if(t.points){var i=t.points.points;l("[id=stamped-rewards-points-placeholder]").attr("onclick","StampedFn.toggleRewardsModal();"),l("[id=stamped-rewards-points-placeholder]").html(t.points.points_current_with_name),l('[id=stamped-rewards-points-placeholder][data-type="points-only"]').html(i),t.customer&&l("[id=stamped-rewards-viptier-placeholder]").html(t.customer.vipTierTitle);var n=l('[id=stamped-rewards-points-placeholder][data-type="points-price"]');if(n.length&&i>=0){var d,p=n.attr("data-ratio"),c=n.attr("data-symbol");if(p)if(parseInt(p))d=i>0?(i/p).toFixed(2):0,n.html(c+d)}}if(t.customer&&l("[id=stamped-rewards-referral-placeholder]").html(t.customer.urlReferral),l("#stamped-rewards-widget").length>0){var m=[],u=1;l("[id=stamped-rewards-widget]").each((function(e){var t=l(this);t.attr("data-element-id",u);var a=Fe(t);m.push(a),u++}));let t=e.StampedGlobalOptions.storeUrl?encodeURIComponent(e.StampedGlobalOptions.storeUrl):e.StampedGlobalOptions.sId;l.ajax({type:"GET",dataType:"json",url:`${a.SERVICE_HOST.svc_identity}/shop/${t}/check-feature/loyalty2023`,success:function(e,t,i){e.hasFeature||r?(s=!0,function(e){const t={};r&&(t.testLoyalty2023=r,o&&(t.testLoyaltyAccount=o));const s=`${a.SERVICE_HOST.svc_loyalty_widget}/templates/widget?`;e.forEach((e=>{l.ajax({type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(e),xhrFields:{withCredentials:!0},url:s+l.param(t),success:function(e,t){let a=0,s=e.elementId;je(l('#stamped-rewards-widget[data-element-id="'+s+'"]'),e,e.translations,a)}})}))}(m)):Ge("rewards",m)},error:function(){console.log("Error, default to Loyalty 1.0..."),Ge("rewards",m)}})}}function ye(){var e=l(u).attr("data-limit-words")||l(".stamped-container",u).attr("data-widget-limit-words"),t=l(u).attr("data-keyword"),a=l(u).attr("data-search");(e&&e>0||t||a)&&l(".stamped-review",u).each((function(s){var r=l(".stamped-review-content-body:first",this);if(r.length){var i=l(r).html();if(i.indexOf("stamped-review-read-more")<=-1)if(t||a){var o;t&&(o=Te(i,t)),a&&(o=Te(i,a)),l(r).html(o)}else{var n=i.split(" ");n.length>e&&(txtTrimmed=n.slice(0,e).join(" ")+"...",l(r).html(txtTrimmed),l(r).append('<a class="stamped-review-read-more" style="margin-left:10px; cursor:pointer;">read more</span>'),l(r).append('<span class="original-review" style="display:none !important;">'+i+"</span>"))}}})),l(".stamped-review-reply .stamped-review-reply-body, .stamped-review-reply .stamped-review-content-body").each((function(){if(!l(this).attr("data-link-processed")){l(this).attr("data-link-processed",!0);var e=l(this).html();l(this).html(e.linkify())}}))}function be(){var e=l(u).attr("data-keywords");if(e){l(".stamped-reviews-filter-label").show(),l(".stamped-summary-keywords").show(),l(u).removeAttr("data-keywords"),l(".stamped-summary-keywords-list",u).html("");var t="",a=e.split(",");for(i=0;i<a.length;i++)t+="<li>"+a[i]+"</li>";l(t).appendTo(l(".stamped-summary-keywords-list",u))}}function Se(){l(t).on("click keypress",".stamped-review-read-more",(function(t){if(!0===G(t)){l(this).closest(".stamped-review-content-body").find(".stamped-review-read-more").hide();var a=l(this).closest(".stamped-review-content-body").find(".original-review").html();l(this).closest(".stamped-review-content-body").html(a),e.macyInstanceStamped&&e.macyInstanceStamped.reInit()}}))}function ke(){l(".stamped-summary-ratings").removeClass("selected"),l(".stamped-summary-ratings .summary-rating").each((function(){l(this).removeClass("selected")})),l(".summary-rating-bar").each((function(){l(this).removeClass("selected")}))}N=void 0!==e?e:this,q=function(){function e(e){return e instanceof Date?e:isNaN(e)?/^\d+$/.test(e)?new Date(t(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e)):new Date(t(e))}function t(e){return parseInt(e)}function a(e,a,s){a=p[a]?a:p[s]?s:"en";for(var r=0,i=e<0?1:0,o=e=Math.abs(e);e>=c[r]&&r<m;r++)e/=c[r];return(e=t(e))>(0==(r*=2)?9:1)&&(r+=1),p[a](e,r,o)[i].replace("%s",e)}function s(t,a){return((a=a?e(a):new Date)-e(t))/1e3}function r(e){return e.dataset.timeagoStamped?e.dataset.timeagoStamped:i(e,u)}function i(e,t){return e.getAttribute?e.getAttribute(t):e.attr?e.attr(t):void 0}function o(e,t){this.nowDate=e,this.defaultLocale=t||"en"}function n(e,t){return new o(e,t)}var d="second_minute_hour_day_week_month_month".split("_"),l="".split("_"),p={en:function(e,t){if(0===t)return["just now","right now"];var a=d[parseInt(t/2)];return e>1&&(a+="s"),[e+" "+a+" ago","in "+e+" "+a]},zh_CN:function(e,t){if(0===t)return["",""];var a=l[parseInt(t/2)];return[e+a+"",e+a+""]}},c=[60,60,24,7,365/7/12,1],m=6,u="datetime",h="data-tid",f={};return o.prototype.doRender=function(e,t,r){var i,o=s(t,this.nowDate),n=this;e.innerHTML=a(o,r,this.defaultLocale),f[i=setTimeout((function(){n.doRender(e,t,r),delete f[i]}),Math.min(1e3*function(e){for(var t=1,a=0,s=Math.abs(e);e>=c[a]&&a<m;a++)e/=c[a],t*=c[a];return s=(s%=t)?t-s:t,Math.ceil(s)}(o),2147483647))]=0,function(e,t){e.setAttribute?e.setAttribute(h,t):e.attr&&e.attr(h,t)}(e,i)},o.prototype.formatDateString=function(e,t){return a(s(e,this.nowDate),t,this.defaultLocale)},o.prototype.render=function(e,t){void 0===e.length&&(e=[e]);for(var a=0,s=e.length;a<s;a++)this.doRender(e[a],r(e[a]),t)},o.prototype.setLocale=function(e){this.defaultLocale=e},n.register=function(e,t){p[e]=t},n.cancel=function(e){var t;if(e)(t=function(e){return i(e,h)}(e))&&(clearTimeout(t),delete f[t]);else{for(t in f)clearTimeout(t);f={}}},n},"object"==typeof module&&module.exports?(module.exports=q(),module.exports.default=module.exports):N.timeagoStamped=q();var _e=0;function Ie(){if(e.File&&e.FileReader&&e.FormData){var a=l("#stamped-file-uploader-input");a.on("change",(function(e){for(var r=e.target.files,i=0;i<r.length;i++){var o=r[i],n=new FileReader;if(ct("stamped:photo:selected"),_e>=5)return void ct("stamped:photo:maxed");if(_e++,o.type.match("image"))s(o,_e);else{if(o.size/1024/1024>50)return ct("stamped:photo:sizeError"),void alert("Sorry, you cannot add this video to your review. Up to 50mb is allowed.");n.onload=function(){var e=new Blob([n.result],{type:o.type}),a=URL.createObjectURL(e),s=t.createElement("video"),r='<div class="stamped-file-photo" data-index="'+_e+'"><img src="https://s3-us-west-2.amazonaws.com/stamped.io/cdn/images/icons/icon-video-placeholder.png" width="70" /><span style="display:none;">'+o.name+'</span><div class="stamped-file-photo-remove" data-index="'+_e+'">x</div></div>',i=function(){d()&&(s.removeEventListener("timeupdate",i),s.pause())};s.addEventListener("loadeddata",(function(){d()?s.removeEventListener("timeupdate",i):l(".stamped-file-holder").append(r),T.push(o)}));var d=function(){var e=t.createElement("canvas");e.width=s.videoWidth,e.height=s.videoHeight,e.getContext("2d").drawImage(s,0,0,e.width,e.height);var r=e.toDataURL(),i=r.length>1e5;return i&&(l(".stamped-file-holder").append('<div class="stamped-file-photo" data-index="'+_e+'"><img src="'+r+'" width="70" /><span style="display:none;">'+o.name+'</span><div class="stamped-file-photo-remove" data-index="'+_e+'">x</div></div>'),URL.revokeObjectURL(a)),i};s.addEventListener("timeupdate",i),s.preload="metadata",s.src=a,s.muted=!0,s.playsInline=!0,s.play()},n.readAsArrayBuffer(o)}o&&(/^image\//i.test(o.type)||/^video\//i.test(o.type)?console.log("is image, begin upload"):(ct("stamped:photo:invalid"),console.log("Not a valid image!")))}a.val("")})),l(t).on("click",".stamped-file-photo-remove",(function(){var e=l(this).parent(".stamped-file-photo"),t=e.index();T.splice(t,1),_e=T.length,e.remove()}))}else console.log("File upload is not supported!");function s(e,t){!function(e,t){var a=new FileReader;a.onload=function(e){var a=new DataView(e.target.result);if(65496!=a.getUint16(0,!1))return t(-2);for(var s=a.byteLength,r=2;r<s;){var i=a.getUint16(r,!1);if(r+=2,65505==i){if(1165519206!=a.getUint32(r+=2,!1))return t(-1);var o=18761==a.getUint16(r+=6,!1);r+=a.getUint32(r+4,o);var n=a.getUint16(r,o);r+=2;for(var d=0;d<n;d++)if(274==a.getUint16(r+12*d,o))return t(a.getUint16(r+12*d+8,o))}else{if(65280!=(65280&i))break;r+=a.getUint16(r,!1)}}return t(-1)},a.readAsArrayBuffer(e.slice(0,65536))}(e,(function(e){e}));var a=new FileReader;a.onloadend=function(){var s,i,o,n;s=a.result,e.type,i=e.name,o=t,(n=new Image).src=s,n.onload=function(e,t,a){setTimeout((function(){n.width,n.height;l(".stamped-file-holder").append('<div class="stamped-file-photo" data-index="'+e+'"><img src="'+s+'" width="70" /><span style="display:none;">'+a+'</span><div class="stamped-file-photo-remove" data-index="'+e+'">x</div></div>'),r(s,e,a)}),100)}(o,0,i),n.onerror=function(){console.log("There was an error processing your file!")}},a.onerror=function(){console.log("There was an error reading the file!")},a.readAsDataURL(e)}function r(e,t,a){var s=function(e,t){for(var a=e.split(","),s=a[0].match(/:(.*?);/)[1],r=atob(a[1]),i=r.length,o=new Uint8Array(i);i--;)o[i]=r.charCodeAt(i);return new File([o],t,{type:s})}(e,a);T.push(s)}}var Ce=null;function Oe(t,s,r,i){if(u.length&&!p){Qe("Loading Main Widget...");var o=u.attr("data-product-id"),n=u.attr("data-product-ids"),d=u.attr("data-name"),c=u.attr("data-product-type"),m=u.attr("data-product-sku")||u.attr("data-product-sku2"),h=u.attr("data-user-reference"),f=u.attr("data-take-reviews"),v=u.attr("data-keyword"),g=u.attr("data-widget-language"),w=u.attr("data-widget-country-iso"),y=u.attr("data-widget-type"),b=u.attr("data-load-type")||l(".stamped-container",u).attr("data-widget-load-type"),S=u.attr("data-search"),k=u.attr("data-cache")||a.is_disable_cache||null,_=l(".stamped-container",u).attr("data-widget-style"),I=u.attr("data-tags-exclude"),C=u.attr("data-tags-include"),O=a.metafields;"slider"==_&&(b="continue"),d&&(d=d.replace("!","")),s||(s=u.attr("data-sort")||l(".stamped-container",u).attr("data-widget-sort")),"continue"===b&&(i=!0),l("#stamped-main-widget-placeholder").length&&l("#stamped-main-widget-placeholder").append(u),p=!0,t&&!i&&$e(".stamped-reviews"),u.addClass("stamped-main-widget-loading");var T=l("<span>Loading more...</span>").prependTo(l("#stamped-reviews-tab")),E=l.param(qe({productId:o,productIds:n,productName:d,productType:c,productSKU:m,userReference:h,page:t||1,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,take:f||5,sort:s,rating:r,keyword:v,widgetLanguage:g,widgetCountryIso:w,widgetType:y,search:S,isUseCache:k,tagsExclude:I,tagsInclude:C}));l.isEmptyObject(x)||(E+="&"+l.param(x));var U=O.length,R={type:U?"POST":"GET",data:U?JSON.stringify({metafields:O}):null,dataType:"json",url:a.SECURE_ENDPOINT+"/widget"+(U?"/preview":"")+"?"+E,success:function(e){Qe("Loaded Main Widget..."),p=!1,u.removeClass("stamped-main-widget-loading"),T.remove();var a,r=e.product,i=e.widget;l("#stamped-main-widget .stamped-container").length,l(".question-form-wrapper").clone(),l(".stamped-questions").clone();if(u.children(':not(link[href="//cdn1.stamped.io/files/widget.min.css"])').remove(),u.append(r),a="function"==typeof l.parseHTML?l.parseHTML(i):l(i),0==l(".stamped-content",u).children().length)l(".stamped-content",u).append(l(a));else{var n=l(".stamped-reviews",u),d=l('[class="stamped-review"]',a);("continue"!==b||null===t&&void 0===t||1===t&&t)&&l('.stamped-reviews [class*="stamped-review"]',u).remove();var c=l(".stamped-pagination",a).attr("data-page",t),m=l(".stamped-reviews .stamped-pagination",u);m.length?l(d).insertBefore(m):l(d).appendTo(".stamped-reviews",u);var h=l(".stamped-tabs",a);l(".stamped-tabs",u).replaceWith(h),c.length?m.length?m.replaceWith(c):n.append(c):m.remove()}s&&l(".stamped-sort-select",u).length&&"none"!==l('.stamped-sort-select option[value="'+s+'"]',u).css("display")&&(l(".stamped-sort-select",u).val(s),l(".stamped-container",u).attr("data-widget-sort",s),l(u).attr("data-sort",s)),l(".new-review-form").hide(),l(".new-question-form").hide(),ct("stamped:reviews:loaded"),l(".stamped-summary-actions-newreview").attr("aria-controls","new-review-form_"+(null!=o?o:"")),Array.prototype.slice.call(l(".stamped-pagination > li")).forEach((function(e){e.classList.contains("active")?e.children[0].setAttribute("aria-current","page"):e.removeAttribute("aria-current")}))},error:function(e){}};O.length&&(R.contentType="application/json"),null!=Ce&&Ce.abort(),Ce=l.ajax(R)}v&&B({topic:v},o),S&&B({search:S},o)}function Te(e,t){return e=e.replace(new RegExp(t+"(?!([^<]+)?<)","gi"),'<span class="stamped-keyword-highlight">$&</span>')}function Ee(t,s){if((u=l(U)).length){var r=u.attr("data-product-id"),i=u.attr("data-product-sku"),o=u.attr("data-product-type"),n=u.attr("data-name"),d=u.attr("data-take-questions")||5,p=u.attr("data-search-qna");s||(s=u.attr("data-sort-qna")||l(".stamped-container",u).attr("data-widget-sort-qna"));var c=u.data("linkify")||!1;if(!r)return;Qe("Loading Q&A"),l.ajax({type:"GET",url:a.SECURE_ENDPOINT+"/widget/questions",data:{productId:r,productSKU:i,productType:o,productTitle:n,page:t||1,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,take:d||5,search:p,sort:s},success:function(e){if(1==e.a&&l(".stamped-questions").length){var a,r,i,o;a=e.result,r=e.t,i=e.form,e.p,o=e.avatar;l("#tab-questions").text();l("#tab-questions").attr("data-count",r),function(e){if(l(".stamped-questions").length&&!l(".question-form-wrapper").length){var t=l('<div class="question-form-wrapper">').html(e);l(".new-review-form").before(t)}}(i);var n=l('<div id="stamped-questions-tab" class="stamped-questions" role="tabpanel" aria-labelledby="tab-questions" tabindex="-1">');if(l(".stamped-questions").html(""),n.append(a),o){var p=l(".stamped-review #stamped-review-avatar",n),m=l('<img src="'+o+'" width="100">');p.html(m)}var u=l(".stamped-questions-placeholder");u.length?(l(".stamped-questions",u).html(""),l(".stamped-questions",u).replaceWith(n),l(".stamped-questions",u).length||(l(".stamped-questions").appendTo(u),l(".stamped-questions").replaceWith(n)),l(".stamped-questions",u).show(),l("#tab-questions").hide(),l(".question-form-wrapper").prependTo(u),l(".stamped-summary-actions-newquestion").prependTo(u)):(l(".stamped-questions").replaceWith(n),t?l(".stamped-questions").show():l(".stamped-questions").hide()),function(e,t,a){var s=e>0?e/a<1?1:Math.ceil(e/a):1;if(1==s)return;var r='<div class="stamped-pagination" id="stamped-pagination-question"><div><span id="stamped-pagination-prev" class="previous"><a href="#" onclick="StampedFn.pageQuestions(this)" role="link" tabindex="0" data-product-id="" data-page="'+(t-1)+'"><</a></span><span id="pages"></span><span id="stamped-pagination-next" class="next"><a onclick="StampedFn.pageQuestions(this)" role="link" tabindex="0" data-product-id="" data-page="'+(t+1)+'">></a></span></div></div>',i=l(".stamped-questions"),o=l(".stamped-questions-placeholder");o.length&&(i=l(".stamped-questions",o));var n=l(".stamped-pagination",i);n.length?n.replaceWith(r):i.append(r);n=l(".stamped-pagination",i);e=s;var d=[];if(d.push(1),e<=7){for(c=2;c<e;c++)d.push(c);e==t&&d.push(t)}if(e>=8){t-2>=1&&(t-2!=1&&d.push(t-2),d.push(t-1)),1!=t&&d.push(t);var p=t+2;p<=e&&(d.push(t+1),p!=e&&d.push(t+2))}1==t||1==t?l("#stamped-pagination-prev",n).hide():l("#stamped-pagination-prev",n).show();e==t||1==e?l("#stamped-pagination-next",n).hide():l("#stamped-pagination-next",n).show();e!=t&&d.push(e);for(var c=0;c<d.length;c++){d[c]==t?l("#pages",n).append(' <span class="page active"><a style="cursor:pointer;" onclick="StampedFn.pageQuestions(this)" role="button" tabindex="0" data-product-id="" data-page="'+d[c]+'">'+d[c]+"</a></span> "):l("#pages",n).append(' <span class="page"><a style="cursor:pointer;" onclick="StampedFn.pageQuestions(this)" role="button" tabindex="0" data-product-id="" data-page="'+d[c]+'">'+d[c]+"</a></span> ")}}(r,t||1,d),u.length?t>1&&$e(".stamped-questions-placeholder"):t>1&&$e(U),s||l(".stamped-questions-filter .stamped-sort-select").val("recent"),c&&l(".stamped-review-reply-body",n).each((function(){if(!l(this).attr("data-link-processed")){l(this).attr("data-link-processed",!0);var e=l(this).html();l(this).html(e.linkify())}})),ct("stamped:questions:loaded")}}})}}function xe(e,t){l("#stamped-questions-placeholder, .stamped-questions-placeholder").length||(l(".stamped-tabs #tab-reviews").removeClass("active"),l(".stamped-tabs #tab-questions").removeClass("active"),"questions"==t?l(".stamped-tabs #tab-questions").addClass("active"):"reviews"==t&&l(".stamped-tabs #tab-reviews").addClass("active"),e&&(l(e).addClass("active"),t=l(e).data("type")),"reviews"==t?(l(".stamped-reviews").show(),l(".stamped-reviews-filter").show(),l(".stamped-questions").hide(),l(".stamped-questions-filter").hide(),l(".stamped-reviews").attr("tabindex",0),l(".stamped-questions").attr("tabindex",-1),l("#stamped-sort-select").show()):"questions"==t&&(l(".stamped-reviews").hide(),l(".stamped-reviews-filter").hide(),l(".stamped-questions").show(),l(".stamped-questions-filter").show(),l(".stamped-reviews").attr("tabindex",-1),l(".stamped-questions").attr("tabindex",0),l("#stamped-sort-select").hide()),l(".new-review-form").hide(),l(".new-question-form").hide())}function Ue(e,t){var a=[];for(i=0;i<e.length;i++){var s=e[i];if(1!=t||s.reviewUserPhotos||s.reviewUserVideos){var r={photos:[],videos:[],name:s.author,via:"Photos",title:s.reviewTitle,body:s.reviewMessage,date:s.reviewDate,reply:s.reviewReply,dateReplied:s.dateReplied,dateFull:s.dateCreated,verifiedType:s.reviewVerifiedType,rating:s.reviewRating,products:[{url:s.productUrl,title:s.productName,imageUrl:s.productImageUrl,imageLargeUrl:s.productImageLargeUrl,productUrl:s.productDirectUrl||""}],review_id:s.id,votes:{up:s.reviewVotesUp,down:s.reviewVotesDown},options:[]};if(s.reviewUserPhotos||s.reviewUserVideos){if(s.reviewUserVideos){var o=s.reviewUserVideos.split(",");for(ii=0;ii<o.length;ii++){var n="//s3.us-west-2.amazonaws.com/stamped.io/uploads/videos/"+o[ii],d="//cdn.stamped.io/uploads/videos/"+o[ii]+".jpg";n.indexOf(".mp4")<0&&(n+=".mp4"),n.indexOf("nothumb")>=0&&(d=""),r.photos.push({videoUrl:n,imageThumbnailUrl:d})}}if(s.reviewUserPhotos){var l=s.reviewUserPhotos.split(","),p="//cdn.stamped.io/uploads/photos/";for(s.reviewUserPhotosWatermark&&(p="//cdn.stamped.io/"+s.reviewUserPhotosWatermark+"/uploads/photos/"),ii=0;ii<l.length;ii++)r.photos.push({imageUrl:p+l[ii],imageThumbnailUrl:"//cdn.stamped.io/uploads/photos/thumb/"+l[ii]})}}else r.photos.push({imageUrl:s.productImageLargeUrl,imageThumbnailUrl:s.productImageUrl});if(s.reviewOptionsList&&s.reviewOptionsList.length)for(ii=0;ii<s.reviewOptionsList.length;ii++)r.options.push({message:s.reviewOptionsList[ii].message,value:s.reviewOptionsList[ii].value});a.push(r)}}return a}var Re=[],Le=!1;function Fe(t,s){var r=l(t),i=r.attr("data-element-id"),o=r.attr("data-widget-type"),n=(r.attr("data-widget-persist-data"),r.attr("data-review-id")),d=r.attr("data-review-ids")?r.attr("data-review-ids").toString().split(","):null,p=r.attr("data-product-id"),c=r.attr("data-product-ids")?r.attr("data-product-ids").toString().split(","):null,m=r.attr("data-product-category")||r.attr("data-product-type"),u=r.attr("data-product-brand"),h=r.attr("data-product-sku"),f=(r.attr("data-product-title"),r.attr("data-limit-words")),v=r.attr("data-random"),g=r.attr("data-show-avatar"),w=r.attr("data-take"),y=r.attr("data-fill-empty"),b=r.attr("data-min-rating"),S=r.attr("data-min-length"),k=r.attr("data-rating"),_=r.attr("data-tags"),I=r.attr("data-tags-exclude"),C=r.attr("data-topic"),O=r.attr("data-syndication")||!0,T=r.data("with-photos"),E=r.data("with-videos"),x=r.data("sort-reviews"),U=r.data("widget-data"),R=r.data("widget-language"),L=r.data("widget-country-iso"),F=r.data("instagram-gallery-id"),G=r.data("album-id"),j=r.data("customer-email"),A=r.data("customer-first-name"),N=r.data("customer-id"),q=o.indexOf("rewards")>-1?a.referral_code:null,P=r.data("is-preview");return{type:o,reviewId:n,reviewIds:d,productId:p,productIds:c,productCategory:m,productBrand:u,productSKU:h,limitWords:f,random:v,showAvatar:g,isFillEmpty:y,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,page:s,skip:w,minRating:b,minLength:S,rating:k,isWithPhotos:T,isWithVideos:E,sortReviews:x,instagramGalleryId:F,albumId:G,dataType:U,widgetLanguage:R,widgetCountryIso:L,tags:_,tagsExclude:I,topic:C,isSyndication:O,elementId:i,customerEmail:j,customerFirstName:A,customerExternalId:N,referralCode:q,isPreview:P}}function Ge(e,t){var s=a.SECURE_ENDPOINT+"/widget/reviews/batch";l.ajax({type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({data:t}),xhrFields:{withCredentials:!0},url:s,success:function(t,a,s){for(var r=t.length,i=100,o=0;o<r;o++)if(t[o]){i+=50;var n=t[o].elementId;je(l("rewards"==e?'#stamped-rewards-widget[data-element-id="'+n+'"]':'#stamped-reviews-widget[data-element-id="'+n+'"]'),t[o],t.translations,i)}}})}function je(a,s,r,i,o){setTimeout((function(){if(s){var r=s.template,i=s.lang,n=a.attr("data-widget-type"),d=a.data("widget-persist-data")||!1;if(l(a).attr("data-lang",i||"en"),"instagram-feed"!=n&&"instagram-feed-dev"!=n&&"visual-gallery"!=n&&1!=d&&l(a).html(""),"single"==n)a.append(r),StampedWidgetSingleFn,StampedWidgetSingleFn.init(s.data,a,l);else if("full-page"==n||"full-page-nps"==n){var p=a.attr("data-rich-snippet"),c="/"==location.pathname;if(s.total>0&&"true"==p&&!c){var m={"@context":"http://schema.org","@type":"Product",name:s.shop,aggregateRating:{"@type":"AggregateRating",ratingValue:s.rating,reviewCount:s.total}},u=t.createElement("script");u.type="application/ld+json",u.innerHTML=JSON.stringify(m),t.getElementsByTagName("head")[0].appendChild(u)}a.append(r),StampedWidgetFullPageFn,StampedWidgetFullPageFn.init(s,a,l)}else"full-page-multiple"==n?(a.append(r),StampedWidgetFullPageMultipleFn,StampedWidgetFullPageMultipleFn.init(s,a,l)):"reviews-highlight"==n?(a.append(r),StampedWidgetReviewsHighlightFn,StampedWidgetReviewsHighlightFn.init(s,a,l)):"reviews-popup"==n?(a.append(r),StampedWidgetReviewsPopupFn,StampedWidgetReviewsPopupFn.init(s,a,l)):"people-highlight"==n?(a.append(r),StampedWidgetPeopleHighlightFn,StampedWidgetPeopleHighlightFn.init(s,a,l)):"drawer"==n?(a.append(r),StampedWidgetDrawerFn,StampedWidgetDrawerFn.init(s,a,l)):"carousel"==n?(a.append(r),StampedCarouselFn,StampedCarouselFn.init(s,a,l)):"carousel-nps"==n?(a.append(r),StampedCarouselNPSFn,StampedCarouselNPSFn.init(s,a,l)):"carousel-checkout-comments"==n?(a.append(r),StampedCarouselCheckoutCommentFn,StampedCarouselCheckoutCommentFn.init(s,a,l)):"carousel-photos"==n?(a.append(r),StampedCarouselPhotosFn,StampedCarouselPhotosFn.init(s.data,a,l)):"site-badge"==n?(a.append(r),StampedSiteBadgeFn,StampedSiteBadgeFn.init(s,a,l)):"top-rated"==n?(a.append(r),StampedTopRatedFn,StampedTopRatedFn.init(s,a,l)):"wall-photos"==n?(a.append(r),StampedWallPhotosFn,StampedWallPhotosFn.init(s,a,l),o&&$e(a)):"checkout-comments"==n?(a.append(r),StampedCheckoutCommentsFn,StampedCheckoutCommentsFn.init(s,a,l)):"instagram-feed"==n?(l(a).is(":empty")&&a.append(r),StampedInstagramFeedFn,StampedInstagramFeedFn.init(s,a,l)):"visual-gallery"==n?(e.stampedVisualGalleryDataArr||a.append(r),StampedVisualGalleryFeedFn,StampedVisualGalleryFeedFn.init(s,a,l)):"facebook-messenger-optin"==n?(StampedFacebookMessengerOptinFn,StampedFacebookMessengerOptinFn.init(s,a,l)):"nps-submission-form"==n?(a.append(r),StampedNPSSubmissionForm,StampedNPSSubmissionForm.init(s,a,l)):"rewards-summary"==n?(a.append(r),StampedRewardsSummary,StampedRewardsSummary.init(s,a,l)):"rewards-how-it-works"==n?(a.append(r),StampedRewardsHowItWorks,StampedRewardsHowItWorks.init(s,a,l)):"rewards-referral-modal"==n?(a.append(r),StampedRewardsReferralModal,StampedRewardsReferralModal.init(s,a,l)):"rewards-referral-claim-modal"==n?(a.append(r),StampedRewardsReferralClaimModal,StampedRewardsReferralClaimModal.init(s,a,l)):"rewards-earnings"==n||"rewards-earnings-v2"==n?(a.append(r),StampedRewardsEarnings,StampedRewardsEarnings.init(s,a,l)):"rewards-spendings"==n||"rewards-spendings-v2"==n?(a.append(r),StampedRewardsSpendings,StampedRewardsSpendings.init(s,a,l)):"rewards-vip-tiers"==n?(a.append(r),StampedRewardsVIPTiers,StampedRewardsVIPTiers.init(s,a,l)):"rewards-referral"==n?(a.append(r),StampedRewardsReferral,StampedRewardsReferral.init(s,a,l)):"rewards-activities"==n?(a.append(r),StampedRewardsActivities,StampedRewardsActivities.init(s,a,l)):"rewards-redeem-variable-slider"==n?(a.append(r),StampedRewardsRedeemVariableSlider,StampedRewardsRedeemVariableSlider.init(s,a,l)):"rewards-redeem-select-options"==n&&(a.append(r),StampedRewardsRedeemSelectOptions,StampedRewardsRedeemSelectOptions.init(s,a,l));l(".free-tier-banner").lenght<1&&l(".free-tier-banner").detach().appendTo("#stamped-reviews-widget"),ct("stamped:reviews:widget:loaded")}}),i)}function Ae(e,a,s){if(s){var r=new Date;r.setTime(r.getTime()+24*s*60*60*1e3);var i="; expires="+r.toGMTString()}else i="";t.cookie=e+"="+a+i+"; path=/; SameSite=None; Secure"}function Ne(e){for(var a=e+"=",s=t.cookie.split(";"),r=0;r<s.length;r++){for(var i=s[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(a))return i.substring(a.length,i.length)}return null}function qe(e){for(var t in e)null!==e[t]&&""!==e[t]&&void 0!==e[t]||delete e[t];return e}var Pe=!1;function $e(e){if(l(e).length){var t=l(U).attr("data-animation");if(Qe("Animation: "+t),"false"===t||!1===t);else{if(1==Pe)return;Pe=!0;var a=l(e),s=l("html, body"),r=l(U).attr("data-offset")||l(e).attr("data-offset")||1;F()&&(r=l(U).attr("data-offset-mobile")||l(e).attr("data-offset-mobile")||1),s.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",(function(){s.stop(),Pe=!1})),s.animate({scrollTop:a.offset().top-r},t||1e3,(function(){s.off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove"),Pe=!1}))}}}function De(e){if("review"==e){xe(null,"reviews");var t=l(".new-review-form");(a=l(".new-question-form")).slideUp(),a.removeClass("stamped-visible"),t.hasClass("stamped-visible")?(t.slideUp(),t.removeClass("stamped-visible"),t.attr("aria-expanded","false")):(t.slideDown(400,(function(){$e("#stamped-main-widget .new-review-form")})),t.addClass("stamped-visible"),t.attr("aria-expanded","true")),l(t).find("input[type=text]").length>0&&l(t).find("input[type=text]").get(0).focus()}else if("question"==e){xe(null,"questions");var a;t=l(".new-question-form");(a=l(".new-review-form")).slideUp(),a.removeClass("stamped-visible"),t.hasClass("stamped-visible")?(t.slideUp(),t.removeClass("stamped-visible")):(t.slideDown(400,(function(){$e(".new-question-form")})),t.addClass("stamped-visible"),a.attr("aria-expanded","false")),l(t).find("input[type=text]").length>0&&l(t).find("input[type=text]").get(0).focus()}}function Ke(e){var t,a,s;t=l(e).parents(".new-review-form"),s=l(e).attr("data-value"),a=l(e).parent(),t.find("input[name='reviewRating']").val(s),function(e,t){t.find("a:lt("+e+")").removeClass("fa-star-o").addClass("fa-star-checked"),t.find("a:gt("+(e-1)+")").removeClass("fa-star-checked").addClass("fa-star-o")}(s,a),function(e){Array.prototype.slice.call(e.parentNode.children).forEach((function(e){e.setAttribute("aria-pressed",!1)}));var t=e.getAttribute("aria-pressed");e.setAttribute("aria-pressed",!JSON.parse(t))}(e)}function ze(e,t,a,s){var r,i,o,n,d,p,c,m;l(U).length&&(i=function(e,t){for(var a=[],s=0;s<t;)a[s++]=e;return a.join("")}("★",(r=e).reviewRating),o=u.attr("data-image-url")||"",n="https://stamped.io/facebookpost?caption="+i+" "+encodeURIComponent(r.reviewTitle)+"&name="+i+" "+encodeURIComponent(r.reviewTitle)+"&description="+encodeURIComponent(r.reviewMessage)+"&link="+encodeURIComponent(r.productUrl)+"&picture="+encodeURIComponent(o.replace("%3F","?")),d="https://www.facebook.com/dialog/feed?app_id=941057476855139&display=popup&link="+encodeURIComponent(n)+"&name="+encodeURIComponent(r.reviewTitle)+"&redirect_uri=https://stamped.io/shares?productId="+r.productId,p="https://twitter.com/intent/tweet?text="+i+" "+r.reviewMessage.substr(0,140)+"&url="+encodeURIComponent(r.productUrl),c="https://plus.google.com/share?url="+encodeURIComponent(r.productUrl),m=l(".stamped-thank-you .stamped-share-links"),l(".facebook",m).attr("href",d).attr("target","_blank"),l(".twitter",m).attr("href",p).attr("target","_blank"),l(".google",m).attr("href",c).attr("target","_blank"),l(".stamped-user-review",u).hide(),l(".stamped-thank-you",u).show(),l(".stamped-thank-you p",u).show(),l(".stamped-thank-you .stamped-share-links",u).show(),l(".new-review-form",u).hide(),l(".edit-review-form",u).hide(),l(".stamped-summary-actions-newreview").hide(),l("#stamped-button-submit",u).removeAttr("disabled"),s&&l("#stamped-button-submit",u).val(s),$e(U),function(e,t,a){if(null!=Ne("stamped-user-reviews")){for(var s=JSON.parse(Ne("stamped-user-reviews")),r=!1,i=0;i<s.length;i++)if(s[i].pid==e){r=!0,s[i];break}!r&&e&&t&&1==a&&(s.length>=10&&s.splice(0,1),s.push({pid:e,v:t}),Ae("stamped-user-reviews",JSON.stringify(s),1))}else if(e&&t&&1==a){var o=[{pid:e,v:t}];Ae("stamped-user-reviews",JSON.stringify(o),1)}}(a.productId,t.userReference,!0)),ct("stamped:reviews:submitted")}function Ve(e){var t=1;e&&(t=l(e).data("page")),Ee(t)}function Me(e,t,a){l||jQuery&&(l=jQuery),a&&l(a).closest(U).length&&(u=l(a).closest(U));u.attr("data-product-id");var s,r=l(".stamped-summary-ratings.selected .summary-rating-bar.selected",u).attr("data-rating");r&&(t=r),l(".stamped-sort-select",u).length&&(s=l(".stamped-sort-select",u).val()),Oe(e,s,t)}function We(e){var t;"qna"==e?(l(".stamped-questions-filter .stamped-summary-actions-clear").hide(),l(".stamped-questions-search-input").val(""),l(".stamped-questions-search-clear").hide(),l(u).removeAttr("data-search-qna"),Ve()):(l("select.stamped-filter-select").each((function(){l(this).val("")})),l(".stamped-summary-keywords-list li").removeClass("selected"),l(u).removeAttr("data-keyword"),l(".stamped-reviews-filter .stamped-summary-actions-clear").hide(),l(".stamped-reviews",u).removeAttr("data-filtered"),l(".stamped-sort-select").length&&(t=l(".stamped-sort-select").val()),x={},l(".stamped-reviews-search-input").val(""),l(".stamped-reviews-search-clear").hide(),l(u).removeAttr("data-search"),ke(),Oe(1,t,null,!0))}String.linkify||(String.prototype.linkify=function(){return this.replace(/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,'<a href="$&" target="_blank">$&</a>').replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,'$1<a href="http://$2" target="_blank">$2</a>').replace(/[\w.]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,6})+/gim,'<a href="mailto:$&">$&</a>')});var Be=!1,He=null;function Je(t,a){a||(a=e.location.href),t=t.replace(/[\[\]]/g,"\\$&");var s=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(a);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}function Qe(t,a){var s="true"==Je("stamped_debug")||1==e.stamped_debug,r=e.stamped_debug_level||Je("stamped_debug_level");s&&(a||console.log("[Stamped.io]",t),a&&r&&console.log("[Stamped.io level"+r+"]",t))}function Ye(e,a){(d=t.createElement("script")).type="text/javascript",d.charset="UTF-8",d.src=e;var s=t.getElementsByTagName("script")[0];s.parentNode.insertBefore(d,s),d.onload=d.onreadystatechange=a}function Xe(e,t){try{return"undefined"!=typeof Storage&&(localStorage.setItem(e,JSON.stringify(t)),!0)}catch(e){}}function Ze(e,t){try{if("undefined"!=typeof Storage){var a;try{a=JSON.parse(localStorage.getItem(e))||null}catch(t){a=localStorage.getItem(e)}return a}return!1}catch(e){}}function et(e,t){var a="stamped_app_key",s=Ze(a),r=Date.now()+1728e5;if(s&&s.apiKey&&(s.expiry||0)>Date.now())Qe(s),ct("stamped:init:getAppKey",{detail:s}),tt(s);else{var i;(i=new XMLHttpRequest).onreadystatechange=function(){if(4===i.readyState&&200===i.status){var e=JSON.parse(i.responseText);if(e&&e.apiKey)if(e.expiry=r,Xe(a,e),ct("stamped:init:getAppKey",{detail:e}),!0===e.skip);else{var t={apiKey:e.apiKey};"undefined"!=typeof Shopify?t.storeUrl=Shopify.shop:t.sId=e.sId,tt(t)}}};var o="";"shopify"==e?o="shopShopifyDomain="+t:"bigcommerce"==e&&(o="storeHash="+t),i.open("GET","https://stamped.io/api/getappkey?"+o,!0),i.send()}}function tt(t){if(1==e.isInitializedStamped)return Qe("Already initalized"),StampedFn.loadWidget(!0),void StampedFn.loadDisplayWidgets();if(e.isInitializedStamped=!0,t&&(m=t.storeUrl,e.StampedGlobalOptions=t,t.exclude_font&&(e.StampedGlobalOptions.exclude_font=t.exclude_font)),e.StampedGlobalOptions&&e.StampedGlobalOptions.apiKey){var s="true"==Je("stamped_force_jquery")||a.is_force_jquery;"undefined"==typeof jQuery||1==s?Ye("https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js",(function(){l=jQuery.noConflict(!0),$(),e.isInitializedStamped=!0})):($(0,jQuery),e.isInitializedStamped=!0)}}var at=t.getElementById("stamped-script-widget");at||(at=t.getElementById("stamped-script-init"));var st="";at&&(st=at.src);var rt=!1;if((st.indexOf("skipCss=true")>0||1==a.exclude_main_css)&&(rt=!0),rt||function(e){for(var a=t.styleSheets,s=0,r=a.length;s<r;s++)if(a[s]&&a[s].href&&a[s].href.indexOf(e)>-1)return;var i=t.createElement("link");i.rel="stylesheet",i.href=e,i.type="text/css";var o=t.getElementsByTagName("link")[0];if(o)o.parentNode.insertBefore(i,o);else{var n=t.getElementsByTagName("head")[0];i.setAttribute("async",""),n.appendChild(i)}}("//cdn1.stamped.io/files/widget.min.css"),"undefined"!=typeof Shopify){var it=!1;if(Shopify.shop){if(null!=at){st.indexOf("skip=true")>-1&&(it=!0);var ot=at.getAttribute("data-api-key");!ot&&st.indexOf("apiKey")>-1&&(ot=Je("apiKey",st)),ot&&(it=!0,tt({apiKey:ot,storeUrl:Shopify.shop}))}it||et("shopify",Shopify.shop)}if(Shopify.Checkout&&"undefined"==typeof StampedShopifyCheckout){if("function"==typeof e.StampedShopifyCheckout)return!1;Ye("//cdn1.stamped.io/files/shopify-checkout.min.js",(function(){ct("stamped:script-shopify-checkout:loaded")}))}}if(null!=at){var nt=at.getAttribute("data-store-hash");nt&&et("bigcommerce",nt);var dt=at.getAttribute("data-store-id"),lt=at.getAttribute("data-api-key"),pt=at.getAttribute("data-auto-init");dt&&lt&&"false"!=pt&&tt({apiKey:lt,sId:dt})}function ct(a,s){var r;e.CustomEvent?r=new CustomEvent(a,s):(r=t.createEvent("CustomEvent")).initCustomEvent(a,!0,!0,s);try{t.dispatchEvent(r)}catch(e){}}return{init:tt,initRewards:z,reloadUGC:K,toggleForm:De,setRating:Ke,submitForm:function(t){var s,r,i=u.data("label-submitting"),o=l(".new-review-form .stamped-button-primary",u).val();if(r=function(e){var t={};l(e).hasClass("new-review-form")||(e=l(e).parents(".new-review-form"));var a=l("input,textarea,select,radio",e).serializeArray();return l.each(a,(function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""})),t}(t),r.reviewRating&&r.author&&r.reviewMessage.trim()){var n={productName:u.attr("data-name"),productId:u.attr("data-product-id"),productSKU:u.attr("data-product-sku"),productType:u.attr("data-product-type"),productDescription:u.attr("data-description"),productImageUrl:u.attr("data-image-url"),productUrl:u.attr("data-url"),reviewSource:"widget",userReference:u.attr("data-user-reference")};r=l.extend(r,n),s=r;var d=new FormData;for(var p in r){var c=r[p];c.indexOf("+")>-1&&p.indexOf("customFormOption")>-1&&(c=r[p].replace("+","%2B")),d.append(p,c)}var m=0;for(var h in T)d.append("image"+m,T[m]),r["image"+m]=T[m],m++;Qe(Object.prototype.toString.call(d)),Qe(d);var f={url:a.SECURE_ENDPOINT+"/reviews3?"+l.param(qe({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl})),cache:!1,processData:!1,contentType:!1,type:"POST",data:d._blob?d._blob():d,beforeSend:function(e){l("#stamped-button-submit",u).attr("disabled","disabled"),i&&l("#stamped-button-submit",u).val(i)},error:function(e){ct("stamped:reviews:submitError"),1==a.is_ignore_submit_error?ze(s,e,n,o):(l("#stamped-button-submit",u).removeAttr("disabled"),o&&l("#stamped-button-submit",u).val(o))},success:function(e){ze(s,e,n,o)}};l.ajax(f)}},submitQuestionForm:function(t){var a=l(t||"#new-question-form"),s=l(U);if(a.length&&s.length){var r=s.data("name"),i=s.data("description"),o=s.data("product-sku"),n=s.data("url"),d=s.data("image-url"),p=a.serializeArray();p.push({name:"productName",value:r}),p.push({name:"productDescription",value:i}),p.push({name:"productSKU",value:o}),p.push({name:"productUrl",value:n}),p.push({name:"productImageUrl",value:d}),p.push({name:"apiKey",value:e.StampedGlobalOptions.apiKey}),p.push({name:"sId",value:e.StampedGlobalOptions.sId}),p.push({name:"storeUrl",value:e.StampedGlobalOptions.storeUrl}),l('input[type="submit"]',a).attr("disabled","disabled"),l.ajax({type:"POST",url:"https://stamped.io/api/questions",data:l.param(p),crossDomain:!0,success:function(e){a.hide(),l(".question-form-wrapper .stamped-form-message-success").show(),l(".stamped-form-message-success").attr("aria-live","polite"),a[0].reset(),l('input[type="submit"]',a).removeAttr("disabled")}})}},toggleFormEdit:function(){l(".edit-review-form",u).toggle()},pageQuestions:Ve,sortQuestions:function(e){e.value&&Ee(1,e.value)},pageReviews:Me,sortReviews:function(e){u.attr("data-product-id"),e.value&&Oe(1,e.value,null,!0)},filterReviews:function(e){var t=l("option:first-child",e).text(),a=e.value;x={};var s,r=1;l("select.stamped-filter-select").each((function(){var e=l("option:first-child",this).text(),t=this.value;x["qt"+r]=e,x["qv"+r]=t,r++})),l(".stamped-reviews-filter .stamped-summary-actions-clear").show(),l(".stamped-reviews",u).attr("data-filtered","true"),l(".stamped-sort-select").length&&(s=l(".stamped-sort-select").val()),Oe(1,s,null,!0),t&&a&&B({customOptionTitle:t,customOptionValue:a},u.attr("data-product-id"))},filterClear:We,pageWidget:function(e,t){var s=l(e).data("page"),r=l(e).closest("#stamped-reviews-widget");r.attr("data-page",s),function(e,t,s){var r=a.SECURE_ENDPOINT+"/widget/reviews",i=Fe(e,t);s=s||{},l.ajax({type:"GET",url:r+"?"+l.param(qe(i)),dataType:"json",success:function(t,a,r){je(e,t,0,0,!0),s.callback&&s.callback()}})}(r,s,t)},loadBadges:ve,loadWidget:he,loadDisplayWidgets:ge,loadDisplayWidgetsRewards:we,voteReview:function(t,s,r){var i=l(t),o=i.parent();o.fadeTo("slow",.3),i.addClass("disable-link"),l.ajax({type:"POST",url:a.SECURE_ENDPOINT+"/reviews/vote",data:{reviewId:s,vote:r,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl},success:function(e){l(".stamped-thumbs-up",o).attr("data-count",e.voteUp),l(".stamped-thumbs-down",o).attr("data-count",e.voteDown),l(".stamped-ugc-modal-vote-up",o).attr("data-count",e.voteUp),l(".stamped-ugc-modal-vote-down",o).attr("data-count",e.voteDown),l(".stamped-thumbs-up i",o).html("&nbsp; "+e.voteUp),l(".stamped-thumbs-down i",o).html("&nbsp; "+e.voteDown),o.fadeTo("slow",1),i.removeClass("disable-link")}})},openUGCModal:function(s,r,i,o,n,d,p,c,u){var h,f;1!==o&&o||(s=Ue(s,n)),null!=s||s.length||L(r,d),p||(p="en");var v,g='<div class="stamped-ugc-modal" data-lang="'+p+'" role="dialog" aria-modal="true" aria-label="Customer Review Photos" data-keyboard="true" tabindex="-1"> <div class="stamped-ugc-modal-wrapper" role="region" aria-roledescription="carousel" aria-label="carousel" aria-label="Shop our Instagram look"><span href="javascript:void(0)" title="Close" aria-label="Close" role="button" class="stamped-modal-close show-mobile" style="display:none;" tabindex="0">X</span> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-previous" role="button" data-direction="left" tabindex="0" aria-label="Previous Photo"> <i class="stamped-fa stamped-fa-angle-left"></i> </div> <div class="stamped-ugc-modal-image-wrapper" role="group" aria-roledescription="slides" aria-label="slide"> <div class="stamped-ugc-modal-image"></div> <ul></ul> </div> <div class="stamped-ugc-modal-content"> <span href="javascript:void(0)" title="Close" aria-label="Close" role="button" class="stamped-modal-close" tabindex="0">X</span> <div class="stamped-ugc-modal-content-wrapper"> <div class="stamped-ugc-modal-user"> <div class="stamped-ugc-modal-user-source"></div><h1 class="stamped-ugc-modal-user-username"></h1> </div> <div class="stamped-ugc-modal-caption"></div><div class="stamped-ugc-modal-votes"></div> <div class="stamped-ugc-modal-tags"> <span class="stamped-ugc-modal-tag"><a aria-label="Link to Product" {0} target="_top"> <div class="stamped-ugc-modal-tags-product-image-wrapper"><img {1} class="stamped-ugc-modal-tags-product-image" onerror=\'this.style.display = "none"\' alt="{2}" /></div> <div class="stamped-ugc-modal-tags-product-title">{2}</div> </a><div class="stamped-ugc-modal-tags-btn" data-shoppable-url="{3}"></div> </span> </div> </div> </div> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-next" role="button" data-direction="right" tabindex="0" aria-label="Next Photo"> <i class="stamped-fa stamped-fa-angle-right"></i> </div> <div class="stamped-ugc-modal-list-photos" role="group"><ul></ul></div> </div> </div>',w=(l(i).attr("data-hover-text"),l(i).attr("data-shop-button-text"),l(i).attr("data-url-param")||""),y=l(i).attr("data-url-store")||m||"";l(i).attr("data-cropped"),l(i).attr("data-page"),l(i).attr("data-take"),l("#stamped-ugc-modal").length||((h=l(g)).attr("data-modal-type",o),h.attr("data-modal-shoppable",u||!1),l(h).appendTo(t.body),h.focus());var b="",S=s.length;f||(f=l(".stamped-ugc-modal-tags:first",h).html());for(var k=s?s.length:0,_=0;_<S;_++){var I=s[_],C=I.imageUrl;C&&(b+=templateBlock.formatStringStamped(k,C),k++),I.photos.length&&I.photos[0].imageUrl&&(Re[_]=new Image,Re[_].src=I.photos[0].imageUrl)}if(l(".stamped-ugc-media-block-template",i).append(b),!v){function O(e){switch(e.preventDefault(),e.keyCode){case 37:F("left");break;case 39:F("right");break;case 27:x()}}l(t).on("keydown",O),h.on("click",".stamped-modal-close",(function(e){e.target==this&&!0===G(e)&&x()})),h.on("click keypress",".stamped-ugc-modal-nav-previous, .stamped-ugc-modal-nav-next",(function(e){if(!0===G(e)){var t=l(this).attr("data-direction");F(t)}})),Le||(Le=!0);t.addEventListener("touchstart",(function(e){T=e.touches[0].clientX,E=e.touches[0].clientY}),!1),t.addEventListener("touchmove",(function(e){if(!T||!E)return;var t=e.touches[0].clientX,a=e.touches[0].clientY,s=T-t,r=E-a;Math.abs(s)>Math.abs(r)&&F(s>0?"right":"left");T=null,E=null}),!1);var T=null,E=null;function x(){l(t).off("keydown",O),h.remove(),h=null,l("body").removeClass("stamped-modal-open")}}v=!0;var U=function(){var e=Number(l(this).text())+1,t=l(this).data("image-url");l(".stamped-ugc-modal-image-wrapper ul li").removeClass("active"),l(".stamped-ugc-modal-image-wrapper ul li:nth-child("+e+")").addClass("active"),"image"==a.modal_ugc_image_viewer?l(".stamped-ugc-modal-image",h).html('<img src="'+t+'" alt="Customer Photo" />'):l(".stamped-ugc-modal-image",h).css("background-image","url("+t+")"),ct("stamped:ugcmodal:paged")},R=function(){var e=l(this).data("index-review"),t=l(this).data("index-photo");l(".stamped-ugc-modal-list-photos ul li").removeClass("active"),l(".stamped-ugc-modal-list-photos ul li[data-index-review="+e+"][data-index-photo="+t+"]").addClass("active"),L(e,t),ct("stamped:ugcmodal:paged")},L=function(r,i){var o=s[r];if(null!=o&&null!=o.photos){if(null!==i?(d=i,i>o.photos.length-1&&(d=0)):d?d>o.photos.length-1&&(d=0):d=0,!l(".stamped-ugc-modal-list-photos ul li",h).length){for(var n=0;n<s.length;n++)for(var m=0;m<s[n].photos.length;m++){var u=r==n&&i==m?"active":"",v=(s[n].photos[m].imageUrl,s[n].name+" "+s[n].title),g=s[n].photos[m].imageThumbnailUrl,b=t.createElement("li");b.className=u,b.innerHTML="",b.className+=" stamped-lazyload";var S=t.createAttribute("data-index-review");if(S.value=n,b.setAttributeNode(S),(O=t.createAttribute("data-index-photo")).value=m,b.setAttributeNode(O),b.setAttribute("role","button"),b.setAttribute("tabindex",0),b.setAttribute("aria-label",v),e.LazyLoadStamped&&LazyLoadStamped.update){var k=t.createAttribute("data-bg");k.value="url("+g+")",b.setAttributeNode(k)}else b.style.background="url("+g+")";l(".stamped-ugc-modal-list-photos ul",h).append(b),b.onclick=R}l(t).on("click keypress",".stamped-ugc-modal-list-photos li.stamped-lazyload",(function(e){G(e)&&(l(this).attr("aria-current","true"),l(this).siblings().attr("aria-current","false"))}));try{e.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(e){}}if(l(".stamped-ugc-modal-list-photos li.stamped-lazyload.active").attr("aria-current","true"),l(".stamped-ugc-modal-list-photos li.stamped-lazyload.active").siblings().attr("aria-current","false"),null!=o.photos[d]){var I=o.photos[d].imageUrl,C=o.photos[d].videoUrl;I?"image"==a.modal_ugc_image_viewer?(l("video",l(".stamped-ugc-modal-image",h)).remove(),l(".stamped-ugc-modal-image",h).html('<img src="'+I+'" alt="'+o.via+" photo uploaded by "+o.name+" on "+o.dateFull+'" />')):(l("video",l(".stamped-ugc-modal-image",h)).remove(),l(".stamped-ugc-modal-image",h).css("background-image","url("+I+")")):C&&l(".stamped-ugc-modal-image",h).fadeOut("",(function(){l(".stamped-ugc-modal-image",h).css("background-image",'url("")'),l(".stamped-ugc-modal-image",h).html('<video class="stamped-ugc-modal-video" src="'+C+'" width="100%" controls autoplay />'),l(this).fadeIn()}))}for(l(".stamped-ugc-modal-image-wrapper ul",h).html(""),ii=0;ii<o.photos.length;ii++){var O,T=ii===d?"active":"",E=t.createElement("li");E.className=T,E.innerHTML=ii,(O=t.createAttribute("data-image-url")).value=o.photos[ii].imageUrl,E.setAttributeNode(O),l(".stamped-ugc-modal-image-wrapper ul",h).append(E),E.onclick=U}l(".stamped-ugc-modal-user-source").text(o.via);var x=l(".stamped-ugc-modal-user-username",h);x.text(o.name),x.attr("data-verified-type",o.verifiedType),x.attr("data-username",o.name);var L="Verified Buyer",F="Shop Now";c&&"en"!=p&&(L=c.label_verified_buyer||L,F=c.label_shop_now||F),x.append('<span class="stamped-verified-badge">'+L+"</span>"),l(".stamped-ugc-modal-tags-btn",h).append("<span>"+F+"</span>");var j="";if(o.rating){for(var A=0;A<o.rating;A++)j+='<i class="stamped-fa stamped-fa-star" aria-hidden="true"></i>';for(A=0;A<5-o.rating;A++)j+='<i class="stamped-fa stamped-fa-star-o" aria-hidden="true"></i>'}var N,q="";if(o.options&&o.options.length){for(q+='<ul class="">',_=0;_<o.options.length;_++){var P=o.options[_].message,$=o.options[_].value;q+='<li data-value="'+P.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")+'"><span class="stamped-ugc-modal-options-message">'+P+'</span> <span class="stamped-ugc-modal-options-value">'+$+"</span></li>"}q+="</ul>"}o.reply||(o.reply=""),N=o.dateFull?new Date(o.dateFull):new Date(o.date);var D=(new timeagoStamped).formatDateString(N);for("en"!=p&&(D=o.date),l(".stamped-ugc-modal-caption",h).html('<div class="stamped-ugc-modal-date" data-date="'+o.date+'">'+D+'</div><div class="stamped-ugc-modal-caption-rating">'+j+'</div><div class="stamped-ugc-modal-caption-options">'+q+'</div><h2 class="stamped-ugc-modal-caption-title">'+(o.title||"")+'</h2> <div class="stamped-ugc-modal-caption-body">'+o.body+'</div> <div class="stamped-ugc-modal-caption-reply">'+o.reply+"</div>"),l(".stamped-ugc-modal-votes",h).html('<span class="stamped-ugc-modal-vote-up" aria-pressed="false" role="button" aria-label="Rate review as helpful" tabindex="0" data-count="'+o.votes.up+'" onclick="StampedFn.voteReview(this, '+o.review_id+',1)"><i class="stamped-fa stamped-fa-thumbs-up"></i></span><span class="stamped-ugc-modal-vote-down" aria-pressed="false" tabindex="0" role="button" aria-label="Rate review as not helpful" data-count="'+o.votes.down+'" onclick="StampedFn.voteReview(this, '+o.review_id+',-1)"><i class="stamped-fa stamped-fa-thumbs-down"></i></span>'),l(".stamped-ugc-modal-tags",h).html(""),_=0;_<o.products.length;_++){var K=o.products[_];K.title=K.title?K.title:"",y?(K.url=K.url.replace("?storeUrl=https://",""),K.url=K.url+"?storeUrl="+y):w&&(K.url=K.url+"?param="+w);var z=K.imageUrl||K.imageLargeUrl;K.imageUrl?l(".stamped-ugc-modal-tags",h).append(f.formatStringStamped('href="'+K.url+'" rel="nofollow"','src="'+z+'"',K.title,K.productUrl)):l(".stamped-ugc-modal-tags",h).append(f.formatStringStamped('href="'+K.url+'" rel="nofollow"',"",K.title,K.productUrl))}h.attr("data-review-index",r),h.attr("data-photo-index",d),l(".stamped-ugc-modal-votes > span").click((function(){Array.prototype.slice.call(this.parentNode.children).forEach((function(e){e.setAttribute("aria-pressed",!1)}));var e=this.getAttribute("aria-pressed");this.setAttribute("aria-pressed",!JSON.parse(e))})),h.hasClass("open")||(h.addClass("open"),l("body").addClass("stamped-modal-open"),ct("stamped:ugcmodal:open"))}},F=function(e){if(h.hasClass("open")){h.attr("data-review-index"),h.attr("data-photo-index");if(l('[data-direction="right"]',h).removeClass("nav-disabled"),l('[data-direction="left"]',h).removeClass("nav-disabled"),"left"==e){var t=l(".stamped-ugc-modal-list-photos ul li.active").prev();t.click(),t.length||l('[data-direction="left"]',h).addClass("nav-disabled")}else{if("right"!=e)return;var a=l(".stamped-ugc-modal-list-photos ul li.active").next();l(a.click()),a.length||(l('[data-direction="right"]',h).addClass("nav-disabled"),"instagram"==h.attr("data-modal-type")&&ct("stamped:ugcmodal:last"))}}};null!=s&&s.length&&L(r,d)},openUGCPhoto:function(t,s,r,i){if(Be){for(var o=null,n=0;n<E.length;n++)E[n].id==t&&(o=n);null!=o&&StampedFn.openUGCModal(E,o,l(U),null,null,r,He),Be=!1}else{Be=!0;var d=a.SECURE_ENDPOINT+"/widget/reviews",p=l(u).attr("data-product-sku")||"",c="",m="",h=[];!0===i?(s=l(u).attr("data-product-id")||"",c=l(u).attr("data-name")||"",m=l(u).attr("data-product-type")||""):l(".stamped-reviews .stamped-review",u).each((function(){var e=l(this).attr("id");(e=e.replace("stamped-review-",""))&&h.push(e)})),l.ajax({type:"GET",url:d+"?"+l.param(qe({type:"widget-carousel-photos",reviewId:t,reviewIds:h,productId:s,productSKU:p,productType:m,productTitle:c,random:!1,isFillEmpty:!1,page:1,skip:100,minRating:1,isWithPhotos:!0,apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl})),dataType:"json",success:function(e,a,i){E=e.data;for(var o=null,n=0;n<E.length;n++)E[n].id==t&&(o=n);null!=o&&(He=e.lang,StampedFn.openUGCModal(E,o,l(U),null,null,r,He,e.translations)),Be=!1,s}})}return!1},initOptions:e.StampedGlobalOptions,loadSurveyOptin:function(a){var s,r=setInterval((function(){void 0!==e.StampedGlobalOptions&&(null!==a&&a.orderId&&l.ajax({type:"GET",url:"https://stamped.io/api/plugin/facebookmessenger?"+l.param(qe({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,orderId:a.orderId,customerEmail:a.customerEmail})),success:function(e){l("body").append(e.html);var a=l("#stamped-facebook-optin .fb-send-to-messenger")[0].outerHTML,s=t.createElement("iframe");s.height="100",s.width="100%";var r="<!DOCTYPE html> <html> <head> <meta charset='utf-8' /> <title></title> </head> <script> var fbPageId, fbUserRef; window.fbAsyncInit = function() { FB.init({ appId : '941057476855139', xfbml : true, version : 'v6.0' }); FB.Event.subscribe('send_to_messenger', function(e) { var modal = window.top.document.getElementById('stamped-facebook-optin'); if (e.event == 'rendered'){ modal.style.display = 'block'; } if (e.event == 'opt_in'){ console.log('hide'); modal.style.display = 'none'; } }); }; (function(d, s, id){ var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) {return;} js = d.createElement(s); js.id = id; js.src = '//connect.facebook.net/en_US/sdk.js'; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk') ); <\/script> <body>"+a+"</body> </html>";t.body.appendChild(s),l(s).appendTo("#stamped-facebook-optin .fb-send-to-messenger"),s.contentWindow.document.open(),s.contentWindow.document.write(r),s.contentWindow.document.close()}}),clearInterval(r)),++s>=5&&clearInterval(r)}),2e3)},closeSurveyOptin:function(){l("#stamped-facebook-optin").remove()},triggerEvent:ct,on:function(e,a){t.addEventListener?t.addEventListener(e,a):t.attachEvent("on"+e,(function(){a.call(t)}))},jQuery:l,stampedLog:Qe,getOptions:function(){return a},setOptions:function(e){Object.assign(a,e)},getLoggedInCustomer:function(){return R.customer},getDataRewards:function(){return R},loadLauncherView:ee,scrollLauncherView:function(e){StampedFn.toggleLauncher(!0),setTimeout((function(){var t=l(e,I).offset();l(".stamped-rewards-content-container",I).scrollTop(t.top-155),Qe(l(".stamped-rewards-content-container",I)),Qe(t),Qe(e)}),500)},toggleLauncher:W,toggleRewardsModal:W,rewardsApplyCode:function(e){$btn=l("#stamped-rewards-apply-code",I);var s=e&&e.code||l(".stamped-reward-coupon-code",I).text(),r=$btn.text(),i=$btn.data("type"),o=!1,n=!1,d=R.links;de("loading");var p=a.is_rewards_code_copy||r.indexOf("Copy")>-1||"copy"==i;if(337965!==R.shopId&&331099!==R.shopId&&331100!==R.shopId||(p=!0),ct("stamped:rewards:coupon:applied",{detail:s}),1==p){j(s),de("active"),n=!0}else{let r;if(s=encodeURIComponent(s),291456===R.shopId)return l.ajax({type:"GET",url:`${d.shop}/discount/${s}`,success:function(e){o=!0,de("active"),t.cookie.includes(`discount_code=${s}`)?(console.log("Discount code applied."),n=!0):console.log("Discount code failed to apply.")},error:function(e){console.log("Error while applying discount code. ",e),o=!1,de("active")}}),{code:s,setState:de,appliedDiscount:o,success:n};r=67527===R.shopId||291474===R.shopId||9628===R.shopId?`${d.shop}/discount/${s}?redirect=/checkout`:d.shop+"/checkout?discount="+s;a.rewards_apply_discount_url_format&&(r=rewards_apply_discount_url_format.replace("{0}",s)),e&&e.skip||l.ajax({type:"GET",url:r,data:{},success:function(e,t,a){de("active"),n=!0,o=!0},error:function(e,t,a){de("active"),n=!0,o=!1}})}return{code:s,setState:de,showError:le,appliedDiscount:o,success:n}},rewardsReferralClaimCode:function(){var t=l("#referral_claim_email",I),a=l("#stamped-rewards-claim-code",I),s=t.val(),r=StampedFn.getOptions();s&&(me(a,"loading",!0),l.ajax({type:"POST",url:r.SECURE_ENDPOINT+"/v2/rewards/referral/claim?"+l.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,email:s,referralCode:r.referral_code,debug:null}),dataType:"json",success:function(e,t,a){ee("view-coupon",null,{couponCode:e.couponCode,title:e.title,viewTitle:e.title})},error:function(e){var t=e.responseJSON?e.responseJSON.message:e.responseText?JSON.parse(e.responseText).message:"You are not eligible for the reward.";l(".stamped-reward-card-error",I).text(t)},complete:function(){me(a,"active",!0,1e3)}}))},rewardsReferralSendEmail:function(t){var a=l("#email-to",I),s=l("#email-message",I),r=l(t),i=a.val(),o=s.val(),n=StampedFn.getOptions();i&&(me(r,"loading",!0),l.ajax({type:"POST",url:n.SECURE_ENDPOINT+"/v2/rewards/referral/send?"+l.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,fromEmail:R.customer.customerEmail,toEmail:i,message:o,debug:null}),data:{},success:function(e,t,a){},error:function(e){},complete:function(){me(r,"active",!1,3e4)}}))},rewardsLink:function(e){var t=R.links;"login"==e?top.location.href=t.login:"signup"==e&&(top.location.href=t.signup)},rewardsRedeem:function(t,s,r){me(t,"loading",!0),s=s||{},l.ajax({type:"POST",url:a.SECURE_ENDPOINT+"/v2/rewards/redeem?"+l.param({apiKey:e.StampedGlobalOptions.apiKey,sId:e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl,campaignId:s.campaignId,points:s.points}),data:R.customer,dataType:"json",success:function(e,a,i){s.campaignId&&me(t,"active",!0,1),J(),r&&r(e)}})},rewardsPointsRefresh:J,rewardsReferralCopy:function(){var e=l(".stamped-reward-referral-wrapper .stamped-reward-copy-icon",I);j(R.customer.urlReferral);var t=e.html();e.html('<div style="padding: 16px"><i class="far fa-check"></i></div>'),setTimeout((function(){e.html(t)}),3e3)},rewardsCreateActivity:Q,rewardsTriggerEarn:re,rewardsTriggerSpend:ie,triggerEarnActivity:se,triggerRedeemActivity:ne,applyCouponToSubscription:function(t,s,r=null,i=null){R.shopId;const o=R.customer.customerId;var n=R.links;o?(e.StampedGlobalOptions.sId=R.shopId,l.ajax({type:"POST",url:`${a.SERVICE_HOST.svc_loyalty_widget}/subscription/discount`,data:{addressId:t,rewardId:s,customerId:o,authToken:R.customer.authToken,apiKey:e.StampedGlobalOptions.apiKey,sId:R.shopId||e.StampedGlobalOptions.sId,storeUrl:e.StampedGlobalOptions.storeUrl},dataType:"json",success:function(e,t,a){r&&r()},error:function(e){i&&i()}})):e.location.href=n.signup},claimAffiliateProgramReward:function(){let t=l("#referral_claim_email",I),s=l("#stamped-rewards-claim-code",I),r=t.val(),i={};e.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,t,a){i[t]=a}));const o=i.stamped_referral_code;if(!r||!o)return;me(s,"loading",!0);let n=R.shopId||e.StampedGlobalOptions.sId,d=e.StampedGlobalOptions.apiKey,p=`${a.SERVICE_HOST.svc_loyalty_widget}/customer/affiliate/claim-reward?sId=${n}&apiKey=${d}`;l.ajax({type:"POST",url:p,data:{claimedBy:r,referralCode:o},dataType:"json",success:function(e,t,a){ee("view-coupon",null,{couponCode:e.couponCode,title:"Your Rewards",viewTitle:"Your Reward"})},error:function(e){let t=e.responseJSON?e.responseJSON.message:e.responseText?JSON.parse(e.responseText).message:"You are not eligible for the reward.";l(".stamped-reward-card-error",I).text(t)},complete:function(){me(s,"active",!0,1e3)}})},sendAffiliateInvite:pe,resetSendAffiliateInvite:ce,getReviewRequests:oe,showCardError:function(e){l(".stamped-reward-card-error",I).text(e)},showSnackbar:function(e,a,s="success"){for(var r="stamped-snackbar",i=e.getElementsByClassName(r),o=0;o<i.length;o++)i[o].remove();var n=t.createElement("div"),d=t.createElement("div");d.classList.add(`${r}__text-wrapper`);var l=t.createElement("span");l.innerHTML=a;var p=t.createElement("i"),c=t.createElement("i");c.classList.add("fa-light","fa-xmark");var m=t.createElement("button");switch(m.appendChild(c),m.addEventListener("click",(function(){n.remove()})),s){case"success":p.classList.add("fa-solid","fa-circle-check");break;case"error":p.classList.add("fa-solid","fa-circle-exclamation")}d.appendChild(p),d.appendChild(l),n.appendChild(d),n.appendChild(m),n.classList.add(r,`${r}--${s}`),e.appendChild(n),setTimeout((function(){n.remove()}),5e3)},getLauncherWindow:function(){return I}}}(window,document);