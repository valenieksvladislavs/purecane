(function(){var __webpack_modules__={4558:function(__unused_webpack_module,__webpack_exports__2,__webpack_require__2){"use strict";__webpack_require__2.r(__webpack_exports__2),__webpack_require__2.d(__webpack_exports__2,{AmyrisTheme:function(){return AmyrisTheme},AmyrisThemeSettings:function(){return AmyrisThemeSettings},AmyrisThemeStrings:function(){return AmyrisThemeStrings},_ThemeEvent:function(){return _ThemeEvent}});const AmyrisTheme=window.spratlyTheme||{},AmyrisThemeSettings=window.spratlyThemeSettings||{},AmyrisThemeStrings=window.spratlyThemeStrings||{},_ThemeEvent=window._ThemeEvent||{}},3207:function(){class FacetRemove extends HTMLElement{constructor(){super();const removeFilterNode=this.querySelector("a");removeFilterNode.addEventListener("click",e=>{e.preventDefault(),(this.closest("collection-filters-form")||document.querySelector("collection-filters-form")).renderPage(new URL(removeFilterNode.href).searchParams.toString())})}}customElements.define("facet-remove",FacetRemove)},4668:function(){class PriceRange extends HTMLElement{constructor(){super(),this.querySelectorAll("input").forEach(element=>element.addEventListener("change",this.onRangeChange.bind(this))),this.setMinAndMaxValues()}onRangeChange(event){this.adjustToValidValues(event.currentTarget),this.setMinAndMaxValues()}setMinAndMaxValues(){const inputs=this.querySelectorAll("input"),minInput=inputs[0],maxInput=inputs[1];maxInput.value&&minInput.setAttribute("max",maxInput.value),minInput.value&&maxInput.setAttribute("min",minInput.value),minInput.value===""&&maxInput.setAttribute("min",0),maxInput.value===""&&minInput.setAttribute("max",maxInput.getAttribute("max"))}adjustToValidValues(input){const value=Number(input.value),min=Number(input.getAttribute("min")),max=Number(input.getAttribute("max"));value<min&&(input.value=min),value>max&&(input.value=max)}}customElements.define("price-range",PriceRange)},6295:function(__unused_webpack_module,__webpack_exports__2,__webpack_require__2){"use strict";__webpack_require__2.r(__webpack_exports__2);var mdn_polyfills_Node_prototype_append_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__2(2422),mdn_polyfills_Node_prototype_append_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__2.n(mdn_polyfills_Node_prototype_append_js__WEBPACK_IMPORTED_MODULE_0__);class JSX{constructor(){return this.component=this.component.bind(this),this.component}component(tagName,attrs,...children){if(typeof tagName=="function")return tagName({...attrs,children});children&&(children=children.filter(val=>val!==null)),attrs&&(attrs.class&&(attrs.className=attrs.class),delete attrs.children);function createWithAttrs(tagName2,attrs2){attrs2=attrs2||{};let elem2=document.createElement(tagName2);try{elem2=Object.assign(elem2,attrs2)}catch{const attrKeys=Object.keys(attrs2);for(let i=0;i<attrKeys.length;i++)attrs2[i]!=="dataSet"&&elem2.setAttribute(attrKeys[i],attrs2[attrKeys[i]])}return elem2}let elem=tagName!=="fragment"?createWithAttrs(tagName,attrs):document.createDocumentFragment();if(["svg","path","rect","text","circle","g"].indexOf(tagName)!==-1){elem=document.createElementNS("http://www.w3.org/2000/svg",tagName);for(const key in attrs){const attrName=key==="className"?"class":key;elem.setAttribute(attrName,attrs[key])}}for(const child of children)Array.isArray(child)?elem.append(...child):elem.append(child);if(attrs!=null&&attrs.dataSet)for(const key in attrs.dataSet)Object.prototype.hasOwnProperty.call(attrs.dataSet,key)&&(elem.dataset[key]=attrs.dataSet[key]);return attrs&&!window.__aleartedJSXData&&Object.keys(attrs).find(key=>key.match(/^data-/))&&(console.trace(`Your "${tagName}" component uses a data-* attribute! Use dataSet instead!!`),alert("Do not use data-* in your JSX component! Use dataSet instead!! - Check the console.trace for more info"),window.__aleartedJSXData=!0),attrs!=null&&attrs.ref&&(typeof attrs.ref=="function"?attrs.ref(elem):attrs.ref=elem),attrs!=null&&attrs.on&&Object.entries(attrs.on).forEach(([event,handler])=>{elem.addEventListener(event,handler)}),attrs!=null&&attrs.style&&Object.entries(attrs.style).forEach(([property,value])=>{elem.style.setProperty(property,value)}),elem}}__webpack_exports__2.default=new JSX},821:function(){(function(){"use strict";var n=window.Document.prototype.createElement,p=window.Document.prototype.createElementNS,aa=window.Document.prototype.importNode,ba=window.Document.prototype.prepend,ca=window.Document.prototype.append,da=window.DocumentFragment.prototype.prepend,ea=window.DocumentFragment.prototype.append,q=window.Node.prototype.cloneNode,r=window.Node.prototype.appendChild,t=window.Node.prototype.insertBefore,u=window.Node.prototype.removeChild,v=window.Node.prototype.replaceChild,w=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),y=window.Element.prototype.attachShadow,z=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),A=window.Element.prototype.getAttribute,B=window.Element.prototype.setAttribute,C=window.Element.prototype.removeAttribute,D=window.Element.prototype.getAttributeNS,E=window.Element.prototype.setAttributeNS,F=window.Element.prototype.removeAttributeNS,G=window.Element.prototype.insertAdjacentElement,H=window.Element.prototype.insertAdjacentHTML,fa=window.Element.prototype.prepend,ha=window.Element.prototype.append,ia=window.Element.prototype.before,ja=window.Element.prototype.after,ka=window.Element.prototype.replaceWith,la=window.Element.prototype.remove,ma=window.HTMLElement,I=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),na=window.HTMLElement.prototype.insertAdjacentElement,oa=window.HTMLElement.prototype.insertAdjacentHTML,pa=new Set;"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(a){return pa.add(a)});function qa(a){var b=pa.has(a);return a=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(a),!b&&a}var ra=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function J(a){var b=a.isConnected;if(b!==void 0)return b;if(ra(a))return!0;for(;a&&!(a.__CE_isImportDocument||a instanceof Document);)a=a.parentNode||(window.ShadowRoot&&a instanceof ShadowRoot?a.host:void 0);return!(!a||!(a.__CE_isImportDocument||a instanceof Document))}function K(a){var b=a.children;if(b)return Array.prototype.slice.call(b);for(b=[],a=a.firstChild;a;a=a.nextSibling)a.nodeType===Node.ELEMENT_NODE&&b.push(a);return b}function L(a,b){for(;b&&b!==a&&!b.nextSibling;)b=b.parentNode;return b&&b!==a?b.nextSibling:null}function M(a,b,c){for(var f=a;f;){if(f.nodeType===Node.ELEMENT_NODE){var d=f;b(d);var e=d.localName;if(e==="link"&&d.getAttribute("rel")==="import"){if(f=d.import,c===void 0&&(c=new Set),f instanceof Node&&!c.has(f))for(c.add(f),f=f.firstChild;f;f=f.nextSibling)M(f,b,c);f=L(a,d);continue}else if(e==="template"){f=L(a,d);continue}if(d=d.__CE_shadowRoot)for(d=d.firstChild;d;d=d.nextSibling)M(d,b,c)}f=f.firstChild?f.firstChild:L(a,f)}}function N(){var a=!(O==null||!O.noDocumentConstructionObserver),b=!(O==null||!O.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=b,this.I=!a}function P(a,b,c,f){var d=window.ShadyDOM;if(a.shadyDomFastWalk&&d&&d.inUse){if(b.nodeType===Node.ELEMENT_NODE&&c(b),b.querySelectorAll)for(a=d.nativeMethods.querySelectorAll.call(b,"*"),b=0;b<a.length;b++)c(a[b])}else M(b,c,f)}function sa(a,b){a.j=!0,a.m.push(b)}function ta(a,b){a.j=!0,a.g.push(b)}function Q(a,b){a.j&&P(a,b,function(c){return R(a,c)})}function R(a,b){if(a.j&&!b.__CE_patched){b.__CE_patched=!0;for(var c=0;c<a.m.length;c++)a.m[c](b);for(c=0;c<a.g.length;c++)a.g[c](b)}}function S(a,b){var c=[];for(P(a,b,function(d){return c.push(d)}),b=0;b<c.length;b++){var f=c[b];f.__CE_state===1?a.connectedCallback(f):T(a,f)}}function U(a,b){var c=[];for(P(a,b,function(d){return c.push(d)}),b=0;b<c.length;b++){var f=c[b];f.__CE_state===1&&a.disconnectedCallback(f)}}function V(a,b,c){c=c===void 0?{}:c;var f=c.J,d=c.upgrade||function(g){return T(a,g)},e=[];for(P(a,b,function(g){if(a.j&&R(a,g),g.localName==="link"&&g.getAttribute("rel")==="import"){var h=g.import;h instanceof Node&&(h.__CE_isImportDocument=!0,h.__CE_registry=document.__CE_registry),h&&h.readyState==="complete"?h.__CE_documentLoadHandled=!0:g.addEventListener("load",function(){var k=g.import;if(!k.__CE_documentLoadHandled){k.__CE_documentLoadHandled=!0;var l=new Set;f&&(f.forEach(function(m){return l.add(m)}),l.delete(k)),V(a,k,{J:l,upgrade:d})}})}else e.push(g)},f),b=0;b<e.length;b++)d(e[b])}function T(a,b){try{var c=b.ownerDocument,f=c.__CE_registry,d=f&&(c.defaultView||c.__CE_isImportDocument)?W(f,b.localName):void 0;if(d&&b.__CE_state===void 0){d.constructionStack.push(b);try{try{if(new d.constructorFunction!==b)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{d.constructionStack.pop()}}catch(k){throw b.__CE_state=2,k}if(b.__CE_state=1,b.__CE_definition=d,d.attributeChangedCallback&&b.hasAttributes()){var e=d.observedAttributes;for(d=0;d<e.length;d++){var g=e[d],h=b.getAttribute(g);h!==null&&a.attributeChangedCallback(b,g,null,h,null)}}J(b)&&a.connectedCallback(b)}}catch(k){X(k)}}N.prototype.connectedCallback=function(a){var b=a.__CE_definition;if(b.connectedCallback)try{b.connectedCallback.call(a)}catch(c){X(c)}},N.prototype.disconnectedCallback=function(a){var b=a.__CE_definition;if(b.disconnectedCallback)try{b.disconnectedCallback.call(a)}catch(c){X(c)}},N.prototype.attributeChangedCallback=function(a,b,c,f,d){var e=a.__CE_definition;if(e.attributeChangedCallback&&-1<e.observedAttributes.indexOf(b))try{e.attributeChangedCallback.call(a,b,c,f,d)}catch(g){X(g)}};function ua(a,b,c,f){var d=b.__CE_registry;if(d&&(f===null||f==="http://www.w3.org/1999/xhtml")&&(d=W(d,c)))try{var e=new d.constructorFunction;if(e.__CE_state===void 0||e.__CE_definition===void 0)throw Error("Failed to construct '"+c+"': The returned value was not constructed with the HTMLElement constructor.");if(e.namespaceURI!=="http://www.w3.org/1999/xhtml")throw Error("Failed to construct '"+c+"': The constructed element's namespace must be the HTML namespace.");if(e.hasAttributes())throw Error("Failed to construct '"+c+"': The constructed element must not have any attributes.");if(e.firstChild!==null)throw Error("Failed to construct '"+c+"': The constructed element must not have any children.");if(e.parentNode!==null)throw Error("Failed to construct '"+c+"': The constructed element must not have a parent node.");if(e.ownerDocument!==b)throw Error("Failed to construct '"+c+"': The constructed element's owner document is incorrect.");if(e.localName!==c)throw Error("Failed to construct '"+c+"': The constructed element's local name is incorrect.");return e}catch(g){return X(g),b=f===null?n.call(b,c):p.call(b,f,c),Object.setPrototypeOf(b,HTMLUnknownElement.prototype),b.__CE_state=2,b.__CE_definition=void 0,R(a,b),b}return b=f===null?n.call(b,c):p.call(b,f,c),R(a,b),b}function X(a){var b=a.message,c=a.sourceURL||a.fileName||"",f=a.line||a.lineNumber||0,d=a.column||a.columnNumber||0,e=void 0;ErrorEvent.prototype.initErrorEvent===void 0?e=new ErrorEvent("error",{cancelable:!0,message:b,filename:c,lineno:f,colno:d,error:a}):(e=document.createEvent("ErrorEvent"),e.initErrorEvent("error",!1,!0,b,c,f),e.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),e.error===void 0&&Object.defineProperty(e,"error",{configurable:!0,enumerable:!0,get:function(){return a}}),window.dispatchEvent(e),e.defaultPrevented||console.error(a)}function va(){var a=this;this.g=void 0,this.F=new Promise(function(b){a.l=b})}va.prototype.resolve=function(a){if(this.g)throw Error("Already resolved.");this.g=a,this.l(a)};function wa(a){var b=document;this.l=void 0,this.h=a,this.g=b,V(this.h,this.g),this.g.readyState==="loading"&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function xa(a){a.l&&a.l.disconnect()}wa.prototype.G=function(a){var b=this.g.readyState;for(b!=="interactive"&&b!=="complete"||xa(this),b=0;b<a.length;b++)for(var c=a[b].addedNodes,f=0;f<c.length;f++)V(this.h,c[f])};function Y(a){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(b){return b()},this.i=!1,this.v=[],this.h=a,this.D=a.I?new wa(a):void 0}Y.prototype.H=function(a,b){var c=this;if(!(b instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");ya(this,a),this.s.set(a,b),this.v.push(a),this.i||(this.i=!0,this.o(function(){return za(c)}))},Y.prototype.define=function(a,b){var c=this;if(!(b instanceof Function))throw new TypeError("Custom element constructors must be functions.");ya(this,a),Aa(this,a,b),this.v.push(a),this.i||(this.i=!0,this.o(function(){return za(c)}))};function ya(a,b){if(!qa(b))throw new SyntaxError("The element name '"+b+"' is not valid.");if(W(a,b))throw Error("A custom element with name '"+(b+"' has already been defined."));if(a.A)throw Error("A custom element is already being defined.")}function Aa(a,b,c){a.A=!0;var f;try{var d=c.prototype;if(!(d instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var e=function(m){var x=d[m];if(x!==void 0&&!(x instanceof Function))throw Error("The '"+m+"' callback must be a function.");return x},g=e("connectedCallback"),h=e("disconnectedCallback"),k=e("adoptedCallback"),l=(f=e("attributeChangedCallback"))&&c.observedAttributes||[]}catch(m){throw m}finally{a.A=!1}return c={localName:b,constructorFunction:c,connectedCallback:g,disconnectedCallback:h,adoptedCallback:k,attributeChangedCallback:f,observedAttributes:l,constructionStack:[]},a.u.set(b,c),a.C.set(c.constructorFunction,c),c}Y.prototype.upgrade=function(a){V(this.h,a)};function za(a){if(a.i!==!1){a.i=!1;for(var b=[],c=a.v,f=new Map,d=0;d<c.length;d++)f.set(c[d],[]);for(V(a.h,document,{upgrade:function(k){if(k.__CE_state===void 0){var l=k.localName,m=f.get(l);m?m.push(k):a.u.has(l)&&b.push(k)}}}),d=0;d<b.length;d++)T(a.h,b[d]);for(d=0;d<c.length;d++){for(var e=c[d],g=f.get(e),h=0;h<g.length;h++)T(a.h,g[h]);(e=a.B.get(e))&&e.resolve(void 0)}c.length=0}}Y.prototype.get=function(a){if(a=W(this,a))return a.constructorFunction},Y.prototype.whenDefined=function(a){if(!qa(a))return Promise.reject(new SyntaxError("'"+a+"' is not a valid custom element name."));var b=this.B.get(a);if(b)return b.F;b=new va,this.B.set(a,b);var c=this.u.has(a)||this.s.has(a);return a=this.v.indexOf(a)===-1,c&&a&&b.resolve(void 0),b.F},Y.prototype.polyfillWrapFlushCallback=function(a){this.D&&xa(this.D);var b=this.o;this.o=function(c){return a(function(){return b(c)})}};function W(a,b){var c=a.u.get(b);if(c)return c;if(c=a.s.get(b)){a.s.delete(b);try{return Aa(a,b,c())}catch(f){X(f)}}}window.CustomElementRegistry=Y,Y.prototype.define=Y.prototype.define,Y.prototype.upgrade=Y.prototype.upgrade,Y.prototype.get=Y.prototype.get,Y.prototype.whenDefined=Y.prototype.whenDefined,Y.prototype.polyfillDefineLazy=Y.prototype.H,Y.prototype.polyfillWrapFlushCallback=Y.prototype.polyfillWrapFlushCallback;function Z(a,b,c){function f(d){return function(e){for(var g=[],h=0;h<arguments.length;++h)g[h]=arguments[h];h=[];for(var k=[],l=0;l<g.length;l++){var m=g[l];if(m instanceof Element&&J(m)&&k.push(m),m instanceof DocumentFragment)for(m=m.firstChild;m;m=m.nextSibling)h.push(m);else h.push(m)}for(d.apply(this,g),g=0;g<k.length;g++)U(a,k[g]);if(J(this))for(g=0;g<h.length;g++)k=h[g],k instanceof Element&&S(a,k)}}c.prepend!==void 0&&(b.prepend=f(c.prepend)),c.append!==void 0&&(b.append=f(c.append))}function Ba(a){Document.prototype.createElement=function(b){return ua(a,this,b,null)},Document.prototype.importNode=function(b,c){return b=aa.call(this,b,!!c),this.__CE_registry?V(a,b):Q(a,b),b},Document.prototype.createElementNS=function(b,c){return ua(a,this,c,b)},Z(a,Document.prototype,{prepend:ba,append:ca})}function Ca(a){function b(f){return function(d){for(var e=[],g=0;g<arguments.length;++g)e[g]=arguments[g];g=[];for(var h=[],k=0;k<e.length;k++){var l=e[k];if(l instanceof Element&&J(l)&&h.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)g.push(l);else g.push(l)}for(f.apply(this,e),e=0;e<h.length;e++)U(a,h[e]);if(J(this))for(e=0;e<g.length;e++)h=g[e],h instanceof Element&&S(a,h)}}var c=Element.prototype;ia!==void 0&&(c.before=b(ia)),ja!==void 0&&(c.after=b(ja)),ka!==void 0&&(c.replaceWith=function(f){for(var d=[],e=0;e<arguments.length;++e)d[e]=arguments[e];e=[];for(var g=[],h=0;h<d.length;h++){var k=d[h];if(k instanceof Element&&J(k)&&g.push(k),k instanceof DocumentFragment)for(k=k.firstChild;k;k=k.nextSibling)e.push(k);else e.push(k)}for(h=J(this),ka.apply(this,d),d=0;d<g.length;d++)U(a,g[d]);if(h)for(U(a,this),d=0;d<e.length;d++)g=e[d],g instanceof Element&&S(a,g)}),la!==void 0&&(c.remove=function(){var f=J(this);la.call(this),f&&U(a,this)})}function Da(a){function b(d,e){Object.defineProperty(d,"innerHTML",{enumerable:e.enumerable,configurable:!0,get:e.get,set:function(g){var h=this,k=void 0;if(J(this)&&(k=[],P(a,this,function(x){x!==h&&k.push(x)})),e.set.call(this,g),k)for(var l=0;l<k.length;l++){var m=k[l];m.__CE_state===1&&a.disconnectedCallback(m)}return this.ownerDocument.__CE_registry?V(a,this):Q(a,this),g}})}function c(d,e){d.insertAdjacentElement=function(g,h){var k=J(h);return g=e.call(this,g,h),k&&U(a,h),J(g)&&S(a,h),g}}function f(d,e){function g(h,k){for(var l=[];h!==k;h=h.nextSibling)l.push(h);for(k=0;k<l.length;k++)V(a,l[k])}d.insertAdjacentHTML=function(h,k){if(h=h.toLowerCase(),h==="beforebegin"){var l=this.previousSibling;e.call(this,h,k),g(l||this.parentNode.firstChild,this)}else if(h==="afterbegin")l=this.firstChild,e.call(this,h,k),g(this.firstChild,l);else if(h==="beforeend")l=this.lastChild,e.call(this,h,k),g(l||this.firstChild,null);else if(h==="afterend")l=this.nextSibling,e.call(this,h,k),g(this.nextSibling,l);else throw new SyntaxError("The value provided ("+String(h)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.")}}y&&(Element.prototype.attachShadow=function(d){if(d=y.call(this,d),a.j&&!d.__CE_patched){d.__CE_patched=!0;for(var e=0;e<a.m.length;e++)a.m[e](d)}return this.__CE_shadowRoot=d}),z&&z.get?b(Element.prototype,z):I&&I.get?b(HTMLElement.prototype,I):ta(a,function(d){b(d,{enumerable:!0,configurable:!0,get:function(){return q.call(this,!0).innerHTML},set:function(e){var g=this.localName==="template",h=g?this.content:this,k=p.call(document,this.namespaceURI,this.localName);for(k.innerHTML=e;0<h.childNodes.length;)u.call(h,h.childNodes[0]);for(e=g?k.content:k;0<e.childNodes.length;)r.call(h,e.childNodes[0])}})}),Element.prototype.setAttribute=function(d,e){if(this.__CE_state!==1)return B.call(this,d,e);var g=A.call(this,d);B.call(this,d,e),e=A.call(this,d),a.attributeChangedCallback(this,d,g,e,null)},Element.prototype.setAttributeNS=function(d,e,g){if(this.__CE_state!==1)return E.call(this,d,e,g);var h=D.call(this,d,e);E.call(this,d,e,g),g=D.call(this,d,e),a.attributeChangedCallback(this,e,h,g,d)},Element.prototype.removeAttribute=function(d){if(this.__CE_state!==1)return C.call(this,d);var e=A.call(this,d);C.call(this,d),e!==null&&a.attributeChangedCallback(this,d,e,null,null)},Element.prototype.removeAttributeNS=function(d,e){if(this.__CE_state!==1)return F.call(this,d,e);var g=D.call(this,d,e);F.call(this,d,e);var h=D.call(this,d,e);g!==h&&a.attributeChangedCallback(this,e,g,h,d)},na?c(HTMLElement.prototype,na):G&&c(Element.prototype,G),oa?f(HTMLElement.prototype,oa):H&&f(Element.prototype,H),Z(a,Element.prototype,{prepend:fa,append:ha}),Ca(a)}var Ea={};function Fa(a){function b(){var c=this.constructor,f=document.__CE_registry.C.get(c);if(!f)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var d=f.constructionStack;if(d.length===0)return d=n.call(document,f.localName),Object.setPrototypeOf(d,c.prototype),d.__CE_state=1,d.__CE_definition=f,R(a,d),d;var e=d.length-1,g=d[e];if(g===Ea)throw Error("Failed to construct '"+f.localName+"': This element was already constructed.");return d[e]=Ea,Object.setPrototypeOf(g,c.prototype),R(a,g),g}b.prototype=ma.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:b}),window.HTMLElement=b}function Ga(a){function b(c,f){Object.defineProperty(c,"textContent",{enumerable:f.enumerable,configurable:!0,get:f.get,set:function(d){if(this.nodeType===Node.TEXT_NODE)f.set.call(this,d);else{var e=void 0;if(this.firstChild){var g=this.childNodes,h=g.length;if(0<h&&J(this)){e=Array(h);for(var k=0;k<h;k++)e[k]=g[k]}}if(f.set.call(this,d),e)for(d=0;d<e.length;d++)U(a,e[d])}}})}Node.prototype.insertBefore=function(c,f){if(c instanceof DocumentFragment){var d=K(c);if(c=t.call(this,c,f),J(this))for(f=0;f<d.length;f++)S(a,d[f]);return c}return d=c instanceof Element&&J(c),f=t.call(this,c,f),d&&U(a,c),J(this)&&S(a,c),f},Node.prototype.appendChild=function(c){if(c instanceof DocumentFragment){var f=K(c);if(c=r.call(this,c),J(this))for(var d=0;d<f.length;d++)S(a,f[d]);return c}return f=c instanceof Element&&J(c),d=r.call(this,c),f&&U(a,c),J(this)&&S(a,c),d},Node.prototype.cloneNode=function(c){return c=q.call(this,!!c),this.ownerDocument.__CE_registry?V(a,c):Q(a,c),c},Node.prototype.removeChild=function(c){var f=c instanceof Element&&J(c),d=u.call(this,c);return f&&U(a,c),d},Node.prototype.replaceChild=function(c,f){if(c instanceof DocumentFragment){var d=K(c);if(c=v.call(this,c,f),J(this))for(U(a,f),f=0;f<d.length;f++)S(a,d[f]);return c}d=c instanceof Element&&J(c);var e=v.call(this,c,f),g=J(this);return g&&U(a,f),d&&U(a,c),g&&S(a,c),e},w&&w.get?b(Node.prototype,w):sa(a,function(c){b(c,{enumerable:!0,configurable:!0,get:function(){for(var f=[],d=this.firstChild;d;d=d.nextSibling)d.nodeType!==Node.COMMENT_NODE&&f.push(d.textContent);return f.join("")},set:function(f){for(;this.firstChild;)u.call(this,this.firstChild);f!=null&&f!==""&&r.call(this,document.createTextNode(f))}})})}var O=window.customElements;function Ha(){var a=new N;Fa(a),Ba(a),Z(a,DocumentFragment.prototype,{prepend:da,append:ea}),Ga(a),Da(a),a=new Y(a),document.__CE_registry=a,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:a})}O&&!O.forcePolyfill&&typeof O.define=="function"&&typeof O.get=="function"||Ha(),window.__CE_installPolyfill=Ha}).call(self)},9367:function(module){(function(t,e){module.exports=e()})(this,function(){return(()=>{"use strict";var t={d:(e2,o2)=>{for(var a2 in o2)t.o(o2,a2)&&!t.o(e2,a2)&&Object.defineProperty(e2,a2,{enumerable:!0,get:o2[a2]})},o:(t2,e2)=>Object.prototype.hasOwnProperty.call(t2,e2),r:t2=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t2,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t2,"__esModule",{value:!0})}},e={};function o(t2,e2){if(!(t2 instanceof e2))throw new TypeError("Cannot call a class as a function")}function a(t2,e2){for(var o2=0;o2<e2.length;o2++){var a2=e2[o2];a2.enumerable=a2.enumerable||!1,a2.configurable=!0,"value"in a2&&(a2.writable=!0),Object.defineProperty(t2,a2.key,a2)}}function i(t2,e2,o2){return e2 in t2?Object.defineProperty(t2,e2,{value:o2,enumerable:!0,configurable:!0,writable:!0}):t2[e2]=o2,t2}t.r(e),t.d(e,{default:()=>s});var s=function(){function t2(e3){var a2=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,t2),i(this,"selectors",{loadingBar:"al-loading-bar",loadingOverlay:"al-loading-overlay"}),i(this,"defaultOptions",{overlay:null,overlayShowClass:"overlay-show",thickness:"3px",color:"gray",startDuration:1e3,finishDuration:300}),this.options=Object.assign({},this.defaultOptions,a2),this.target=e3,this.overlay=this.options.overlay||this.target,this.cleanUp=this.cleanUp.bind(this),this.setLoadingData()}var e2,s2;return e2=t2,s2=[{key:"setLoadingData",value:function(){var t3=this.overlay,e3=this.options,o2=e3.startDuration,a2=e3.finishDuration,i2=e3.thickness,s3=e3.color;t3.style.setProperty("--al-thickness"," ".concat(i2)),t3.style.setProperty("--al-color"," ".concat(s3)),t3.style.setProperty("--al-start-duration"," ".concat(o2,"ms")),t3.style.setProperty("--al-finish-duration"," ".concat(a2,"ms"))}},{key:"start",value:function(){this.target.classList.add(this.selectors.loadingBar,"start","loading"),this.overlay.classList.add(this.selectors.loadingOverlay,this.options.overlayShowClass)}},{key:"finish",value:function(){var t3=this,e3=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},o2=this.target,a2=this.overlay,i2=this.cleanUp,s3=this.options.finishDuration,n=window.getComputedStyle(o2,":before").width;o2.style.setProperty("--al-end-width",n),o2.classList.add("loaded"),o2.classList.remove("loading"),window.requestAnimationFrame(function(){o2.classList.add("finished"),a2.classList.remove(t3.options.overlayShowClass)}),setTimeout(i2,2*s3),setTimeout(e3,s3)}},{key:"cleanUp",value:function(){this.target.classList.remove(this.selectors.loadingBar,"start","loaded","finished"),this.overlay.classList.remove(this.selectors.loadingOverlay)}}],s2&&a(e2.prototype,s2),Object.defineProperty(e2,"prototype",{writable:!1}),t2}();return e})()})},2422:function(){(function(){function t(){var e=Array.prototype.slice.call(arguments),n=document.createDocumentFragment();e.forEach(function(e2){var t2=e2 instanceof Node;n.appendChild(t2?e2:document.createTextNode(String(e2)))}),this.appendChild(n)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:t})})})()},643:function(module){var COMPLETE="complete",CANCELED="canceled";function raf(task){if("requestAnimationFrame"in window)return window.requestAnimationFrame(task);setTimeout(task,16)}function setElementScroll(element,x,y){Math.max(0,x),Math.max(0,y),element.self===element?element.scrollTo(x,y):(element.scrollLeft=x,element.scrollTop=y)}function getTargetScrollLocation(scrollSettings,parent){var align=scrollSettings.align,target=scrollSettings.target,targetPosition=target.getBoundingClientRect(),parentPosition,x,y,differenceX,differenceY,targetWidth,targetHeight,leftAlign=align&&align.left!=null?align.left:.5,topAlign=align&&align.top!=null?align.top:.5,leftOffset=align&&align.leftOffset!=null?align.leftOffset:0,topOffset=align&&align.topOffset!=null?align.topOffset:0,leftScalar=leftAlign,topScalar=topAlign;if(scrollSettings.isWindow(parent))targetWidth=Math.min(targetPosition.width,parent.innerWidth),targetHeight=Math.min(targetPosition.height,parent.innerHeight),x=targetPosition.left+parent.pageXOffset-parent.innerWidth*leftScalar+targetWidth*leftScalar,y=targetPosition.top+parent.pageYOffset-parent.innerHeight*topScalar+targetHeight*topScalar,x-=leftOffset,y-=topOffset,x=scrollSettings.align.lockX?parent.pageXOffset:x,y=scrollSettings.align.lockY?parent.pageYOffset:y,differenceX=x-parent.pageXOffset,differenceY=y-parent.pageYOffset;else{targetWidth=targetPosition.width,targetHeight=targetPosition.height,parentPosition=parent.getBoundingClientRect();var offsetLeft=targetPosition.left-(parentPosition.left-parent.scrollLeft),offsetTop=targetPosition.top-(parentPosition.top-parent.scrollTop);x=offsetLeft+targetWidth*leftScalar-parent.clientWidth*leftScalar,y=offsetTop+targetHeight*topScalar-parent.clientHeight*topScalar,x-=leftOffset,y-=topOffset,x=Math.max(Math.min(x,parent.scrollWidth-parent.clientWidth),0),y=Math.max(Math.min(y,parent.scrollHeight-parent.clientHeight),0),x=scrollSettings.align.lockX?parent.scrollLeft:x,y=scrollSettings.align.lockY?parent.scrollTop:y,differenceX=x-parent.scrollLeft,differenceY=y-parent.scrollTop}return{x,y,differenceX,differenceY}}function animate(parent){var scrollSettings=parent._scrollSettings;if(scrollSettings){var maxSynchronousAlignments=scrollSettings.maxSynchronousAlignments,location=getTargetScrollLocation(scrollSettings,parent),time=Date.now()-scrollSettings.startTime,timeValue=Math.min(1/scrollSettings.time*time,1);if(scrollSettings.endIterations>=maxSynchronousAlignments)return setElementScroll(parent,location.x,location.y),parent._scrollSettings=null,scrollSettings.end(COMPLETE);var easeValue=1-scrollSettings.ease(timeValue);if(setElementScroll(parent,location.x-location.differenceX*easeValue,location.y-location.differenceY*easeValue),time>=scrollSettings.time){scrollSettings.endIterations++,scrollSettings.scrollAncestor&&animate(scrollSettings.scrollAncestor),animate(parent);return}raf(animate.bind(null,parent))}}function defaultIsWindow(target){return target.self===target}function transitionScrollTo(target,parent,settings,scrollAncestor,callback){var idle=!parent._scrollSettings,lastSettings=parent._scrollSettings,now=Date.now(),cancelHandler,passiveOptions={passive:!0};lastSettings&&lastSettings.end(CANCELED);function end(endType){parent._scrollSettings=null,parent.parentElement&&parent.parentElement._scrollSettings&&parent.parentElement._scrollSettings.end(endType),settings.debug&&console.log("Scrolling ended with type",endType,"for",parent),callback(endType),cancelHandler&&(parent.removeEventListener("touchstart",cancelHandler,passiveOptions),parent.removeEventListener("wheel",cancelHandler,passiveOptions))}var maxSynchronousAlignments=settings.maxSynchronousAlignments;return maxSynchronousAlignments==null&&(maxSynchronousAlignments=3),parent._scrollSettings={startTime:now,endIterations:0,target,time:settings.time,ease:settings.ease,align:settings.align,isWindow:settings.isWindow||defaultIsWindow,maxSynchronousAlignments,end,scrollAncestor},(!("cancellable"in settings)||settings.cancellable)&&(cancelHandler=end.bind(null,CANCELED),parent.addEventListener("touchstart",cancelHandler,passiveOptions),parent.addEventListener("wheel",cancelHandler,passiveOptions)),idle&&animate(parent),cancelHandler}function defaultIsScrollable(element){return"pageXOffset"in element||(element.scrollHeight!==element.clientHeight||element.scrollWidth!==element.clientWidth)&&getComputedStyle(element).overflow!=="hidden"}function defaultValidTarget(){return!0}function findParentElement(el){if(el.assignedSlot)return findParentElement(el.assignedSlot);if(el.parentElement)return el.parentElement.tagName==="BODY"?el.parentElement.ownerDocument.defaultView||el.parentElement.ownerDocument.ownerWindow:el.parentElement;if(el.getRootNode){var parent=el.getRootNode();if(parent.nodeType===11)return parent.host}}module.exports=function(target,settings,callback){if(!target)return;typeof settings=="function"&&(callback=settings,settings=null),settings||(settings={}),settings.time=isNaN(settings.time)?1e3:settings.time,settings.ease=settings.ease||function(v){return 1-Math.pow(1-v,v/2)},settings.align=settings.align||{};var parent=findParentElement(target),parents=1;function done(endType){parents--,parents||callback&&callback(endType)}var validTarget=settings.validTarget||defaultValidTarget,isScrollable=settings.isScrollable;settings.debug&&(console.log("About to scroll to",target),parent||console.error("Target did not have a parent, is it mounted in the DOM?"));for(var scrollingElements=[];parent;)if(settings.debug&&console.log("Scrolling parent node",parent),validTarget(parent,parents)&&(isScrollable?isScrollable(parent,defaultIsScrollable):defaultIsScrollable(parent))&&(parents++,scrollingElements.push(parent)),parent=findParentElement(parent),!parent){done(COMPLETE);break}return scrollingElements.reduce((cancel,parent2,index)=>transitionScrollTo(target,parent2,settings,scrollingElements[index+1],done),null)}}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==void 0)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.exports}(function(){__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,{a:getter}),getter}})(),function(){__webpack_require__.d=function(exports,definition){for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})}}(),function(){__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}(),function(){__webpack_require__.r=function(exports){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})}}();var __webpack_exports__={};(function(){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var custom_elements_min=__webpack_require__(821),main=__webpack_require__(9367),main_default=__webpack_require__.n(main);function debounce(fn,wait=300){let t;return(...args)=>{clearTimeout(t),t=setTimeout(()=>fn.apply(this,args),wait)}}const events_addEventDelegate=({context=document.documentElement,event="click",selector,handler,capture=!1})=>{const listener=function(e){for(let target=e.target;target&&target!==this;target=target.parentNode)if(target.matches(selector)){handler.call(target,e,target);break}};return context.addEventListener(event,listener,capture),()=>{context.removeEventListener(event,listener,capture)}};class events_Event{constructor(){this.events={}}get evts(){return Object.keys(this.events)}subscribe(event,handler){return this.events[event]=this.events[event]||[],this.events[event].push(handler),()=>this.unSubscribe(event,handler)}unSubscribe(event,handler){const handlers=this.events[event];if(handlers&&Array.isArray(handlers)){for(let i=0;i<handlers.length;i++)if(handlers[i]===handler){handlers.splice(i,1);break}}}emit(event,...args){console.groupCollapsed(`Event emitted: ${event}`),console.trace(),console.groupEnd(),(this.events[event]||[]).forEach(handler=>{handler(...args)})}}var scroll_into_view_scrollIntoView=__webpack_require__(643),scrollIntoView_default=__webpack_require__.n(scroll_into_view_scrollIntoView);function load_assets_loadJS(src,target=document.body,async=!0,defer=!1){return new Promise((resolve,reject)=>{const doc=target.ownerDocument,currScript=doc.querySelector(`script[src="${src}"]`);if(currScript){if(currScript.dataset.loaded)return resolve(!0);currScript.addEventListener("load",()=>{currScript.dataset.loaded=!0,resolve(!0)});return}const script=doc.createElement("script");script.src=src,script.async=async,script.defer=defer,script.addEventListener("load",()=>{script.dataset.loaded=!0,resolve(!0)}),script.onerror=reject,target.appendChild(script)})}function load_assets_loadCSS(href,target=document.head){return new Promise((resolve,reject)=>{const doc=target.ownerDocument,currLink=doc.querySelector(`link[href="${href}"]`);if(currLink){if(currLink.dataset.loaded)return resolve(!0);currLink.addEventListener("load",()=>{currLink.dataset.loaded=!0,resolve(!0)});return}const link=doc.createElement("link");link.rel="stylesheet",link.href=href,link.addEventListener("load",()=>{link.dataset.loaded=!0,resolve(!0)}),link.onerror=reject,target.appendChild(link)})}const{themeScriptURLs,themeStyleURLs}=window;(!themeScriptURLs||!themeStyleURLs)&&console.warn("Missing Assest URLs source");const themeAssets={js:{urls:themeScriptURLs,load:load_assets_loadJS},css:{urls:themeStyleURLs,load:load_assets_loadCSS}};function log(asset){console.groupCollapsed("%c Asset loaded: ","#f7a046",asset),console.trace(),console.groupEnd()}function load_assets_loadAssets(param){return new Promise((resolve,reject)=>{const files=typeof param=="string"?[param]:param;Promise.all(files.map(async file=>{try{const[,name,type]=file.match(/(.*)\.(js|css)$/)||[,file,"js"],{urls:{[name]:{url}},load}=themeAssets[type];await load(url),log(`${name}.${type}`)}catch(err){console.warn(`Failed to load asset: ${file}.`,err)}})).then(resolve).catch(reject)})}var createElement=__webpack_require__(6295).default;window.__getSectionInstanceByType=type=>window.Shopify.theme.sections.instances.find(inst=>inst.type===type);function productFormCheck(form){const requiredFields=form.querySelectorAll('[data-theme-fields] [name][required]:not([hidden]):not([type="hidden"])'),missingFields=[];return requiredFields.forEach(field=>{if(field.type==="radio"){const raidoButtons=form.querySelectorAll(`input[name="${field.name}"]`);Array.from(raidoButtons).some(btn=>btn.checked)||missingFields.push(field)}else field.value||missingFields.push(field)}),missingFields}function queryDomNodes(selectors={},context=document){return Object.entries(selectors).reduce((acc,[name,selector])=>{var _context$queryMethod;const findOne=typeof selector=="string",queryMethod=findOne?"querySelector":"querySelectorAll",sl=findOne?selector:selector[0];return acc[name]=context==null||(_context$queryMethod=context[queryMethod])===null||_context$queryMethod===void 0?void 0:_context$queryMethod.call(context,sl),!findOne&&acc[name]&&(acc[name]=[...acc[name]]),acc},{})}const camelCaseToSnakeCase=str=>str.replace(/[A-Z]/g,$1=>`_${$1.toLowerCase()}`);function animateReplace(oldNode,newNode){!oldNode||!newNode||(oldNode.classList.add("ar__old-node"),newNode.classList.add("ar__new-node"),oldNode.style.opacity=0,oldNode.replaceWith(newNode),setTimeout(()=>newNode.style.opacity=1))}function createSearchLink(query){const searchParams=new URLSearchParams({type:"product","options[unavailable_products]":"last","options[prefix]":"last",q:query});return`${PredictiveSearch.SEARCH_PATH}?${searchParams.toString()}`}function isInViewport(elem){const rect=elem.getBoundingClientRect();return rect.top>0&&rect.top<(window.innerHeight||document.documentElement.clientHeight)}function loadStyles(){const{themeStyleURLs:themeStyleURLs2={}}=window;Object.values(themeStyleURLs2).forEach(style=>{const{url,required,afterWindowLoaded}=style;if(url&&required){var _window;!afterWindowLoaded||(_window=window)!==null&&_window!==void 0&&_window.__sfWindowLoaded?loadCSS(url):window.addEventListener("load",()=>loadCSS(url))}})}function loadScripts(){const{themeScriptURLs:themeScriptURLs2={}}=window;Object.values(themeScriptURLs2).forEach(script=>{const{url,required,afterWindowLoaded}=script;if(url&&required){var _window2;!afterWindowLoaded||(_window2=window)!==null&&_window2!==void 0&&_window2.__sfWindowLoaded?loadJS(url):window.addEventListener("load",()=>loadJS(url))}})}function addCustomerFormHandlers(){if(addEventDelegate({selector:".sf-customer__forms",handler:(e,form)=>{if(e.target.classList.contains("sf-customer__reset-password-btn")){form.classList.add("show-recover-password-form");return}if(e.target.classList.contains("sf-customer__cancel-reset")){form.classList.remove("show-recover-password-form");return}}}),document.querySelector(".sf-customer__recover-form-posted")){var _document$querySelect,_document$querySelect2;(_document$querySelect=document.querySelector(".sf-customer__forms"))===null||_document$querySelect===void 0||(_document$querySelect2=_document$querySelect.classList)===null||_document$querySelect2===void 0||_document$querySelect2.add("show-recover-password-form")}}function getVideoURL(id,host){return host==="youtube"?`https://www.youtube.com/watch?v=${id}&gl=true`:host==="vimeo"?`https://vimeo.com/${id}`:""}function showCookieConsent(){const{show_cookie_consent}=window.adminThemeSettings,cookieAccepted=getCookie("cookieconsent_status");show_cookie_consent&&!cookieAccepted&&loadAssets(["cookieConsent.css","cookieConsent.js"])}function initTermsCheckbox(){addEventDelegate({selector:'.agree-terms [name="agree_terms"]',event:"change",handler:(e,target)=>{const button=target.closest(".agree-terms").nextElementSibling;button&&button.hasAttributes("data-terms-action")&&(target.checked?button.removeAttribute("disabled"):button.setAttribute("disabled",!0))}})}const scrollToTopTarget=document.querySelector("#scroll-to-top-target");function scrollToTop(callback){scrollIntoView(scrollToTopTarget,callback)}function initScrollTop(){const scrollTopButton=document.querySelector("#scroll-to-top-button");scrollTopButton&&(scrollTopButton.addEventListener("click",scrollToTop),window.addEventListener("scroll",function(){const method=window.scrollY>100?"add":"remove";scrollTopButton.classList[method]("opacity-100")}))}function setCookie(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+exdays*24*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"}function getCookie(cname){for(var name=cname+"=",decodedCookie=decodeURIComponent(document.cookie),ca=decodedCookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];c.charAt(0)===" ";)c=c.substring(1);if(c.indexOf(name)===0)return c.substring(name.length,c.length)}return""}function addRecentViewedProduct(handle){let max=20;const saveKey="sf-recent-viewed-products",products=getCookie(saveKey)?JSON.parse(getCookie(saveKey)):[];handle&&!products.includes(handle)&&products.push(handle),setCookie(saveKey,JSON.stringify(products.filter((x,i)=>i<=max-1)))}const generateDomFromString=value=>{const d=createElement("div",null);return d.innerHTML=value,d};function emailIsValid(email){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)}function updateParam(key,value){var{location}=window,baseUrl=[location.protocol,"//",location.host,location.pathname].join("");const queryString=window.location.search,urlParams=new URLSearchParams(queryString);return urlParams.has(key)?(value!==""&&value!=="undefined"&&urlParams.set(key,value),(value===""||value==="undefined")&&urlParams.delete(key)):value&&urlParams.append(key,value),window.history.replaceState({},"",baseUrl+"?"+urlParams.toString()),!1}function getParams(){let params={};const queryString=window.location.search,urlParams=new URLSearchParams(queryString);for(const entry of urlParams.entries())params[entry[0]]=entry[1];return params}function runHelpers(){try{loadScripts(),loadStyles(),showCookieConsent(),initTermsCheckbox(),initLocalization(),addCustomerFormHandlers(),initScrollTop()}catch(err){console.error("Failed to run helpers.",err)}}var facet_remove=__webpack_require__(3207),price_range=__webpack_require__(4668),AmyrisTheme=__webpack_require__(4558).AmyrisTheme;const cachedFiltersResult=[];class CollectionFiltersForm extends HTMLElement{constructor(){super(),_defineProperty(this,"setData",()=>{const{section,initialActiveSortingOption}=this.domNodes;this.enableSorting=section.dataset.enableSorting==="true",this.filtersPosition=section.dataset.filtersPosition,this.sectionId=section.dataset.sectionId,this.activeSortingOption=initialActiveSortingOption,this.listeners=[]}),_defineProperty(this,"initSorting",()=>{if(!this.enableSorting)return;const{sortingInToolbar}=this.domNodes;sortingInToolbar.selectedIndex=sortingInToolbar.querySelector("option[selected]").dataset.index,sortingInToolbar.addEventListener("change",()=>{this.handleSorting(sortingInToolbar.selectedIndex)}),this.listeners=[events_addEventDelegate({selector:".sf__sortmb-list li",handler:(e,option)=>{if(option!==this.activeSortingOption){var _this$activeSortingOp,_this$activeSortingOp2,_this$activeSortingOp3;(_this$activeSortingOp=this.activeSortingOption)===null||_this$activeSortingOp===void 0||(_this$activeSortingOp2=_this$activeSortingOp.classList)===null||_this$activeSortingOp2===void 0||(_this$activeSortingOp3=_this$activeSortingOp2.remove)===null||_this$activeSortingOp3===void 0||_this$activeSortingOp3.call(_this$activeSortingOp2,"active"),option.classList.add("active"),this.activeSortingOption=option,AmyrisTheme.Collection.closeMobileSorting(),this.handleSorting(option.dataset.index)}}})]}),_defineProperty(this,"handleSorting",sortingOptionIndex=>{const{filtersForm,sortingInForm}=this.domNodes;sortingInForm.selectedIndex=Number(sortingOptionIndex)||0,filtersForm.dispatchEvent(new Event("input"))}),_defineProperty(this,"setLoadingTarget",()=>{const screen=window.innerWidth<768?"mobile":"desktop";let loadingTarget=this.domNodes.productGridContainer,options={};(screen==="mobile"||this.filtersPosition==="fixed")&&(loadingTarget=document.body,options.overlayShowClass="-"),this.loading=new(main_default())(loadingTarget,options)}),_defineProperty(this,"onHistoryChange",event=>{var _event$state;const searchParams=((_event$state=event.state)===null||_event$state===void 0?void 0:_event$state.searchParams)||"";this.renderPage(searchParams,!1)}),_defineProperty(this,"renderPage",(searchParams,updateURLHash=!0)=>{this.loading.start();const _url=`${window.location.pathname}?section_id=${this.sectionId}&${searchParams}`;(cachedFiltersResult.find(({url})=>url===_url)?this.renderSectionFromCache:this.renderSectionFromFetch)(_url).then(()=>{AmyrisTheme.Collection.init(),this.loading.finish(this.scrollToTop)}).catch(console.error),updateURLHash&&this.updateURLHash(searchParams)}),_defineProperty(this,"renderSectionFromFetch",url=>fetch(url).then(res=>{if(res.ok)return res.text();throw new Error("Failed to load section!")}).then(text=>{cachedFiltersResult.push({url,html:text}),this.renderProductGrid(text)}).catch(console.error)),_defineProperty(this,"renderSectionFromCache",async _url=>{const cachedResult=cachedFiltersResult.find(({url})=>url===_url);this.renderProductGrid(cachedResult.html)}),_defineProperty(this,"renderProductGrid",html=>{const newSection=new DOMParser().parseFromString(html,"text/html").querySelector('[data-section-type="collection-template"]');this.domNodes.section.replaceWith(newSection)}),_defineProperty(this,"scrollToTop",()=>{const target=document.getElementById("CollectionProductGrid");scrollIntoView_default()(target,{align:{topOffset:80}})}),this.selectors={section:'[data-section-type="collection-template"]',productGridContainer:"#CollectionProductGrid",filtersForm:"#CollectionFiltersForm",sortingInToolbar:"[data-toolbar-sorting] select",sortingInForm:"[data-form-sorting] select",initialActiveSortingOption:".sf__sortmb-list li.active"},this.domNodes=queryDomNodes(this.selectors),this.setData(),this.debouncedOnSubmit=debounce(event=>{this.onSubmitHandler(event)},500),this.domNodes.filtersForm.addEventListener("input",this.debouncedOnSubmit.bind(this)),this.setLoadingTarget(),this.initSorting(),window.addEventListener("popstate",this.onHistoryChange)}disconnectedCallback(){window.removeEventListener("popstate",this.onHistoryChange),this.listeners.forEach(unsubscribeFunc=>unsubscribeFunc())}onSubmitHandler(event){event.preventDefault();const formData=new FormData(this.domNodes.filtersForm),searchParams=new URLSearchParams(formData).toString();this.renderPage(searchParams)}updateURLHash(searchParams){history.pushState({searchParams},"",`${window.location.pathname}${searchParams&&"?".concat(searchParams)}`)}}customElements.define("collection-filters-form",CollectionFiltersForm)})()})();
//# sourceMappingURL=/s/files/1/0274/4044/7587/t/693/assets/2.0-filters.js.map?v=141763945311417598831678725199
