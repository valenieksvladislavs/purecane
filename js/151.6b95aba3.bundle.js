(self.webpackChunkpurecane_web=self.webpackChunkpurecane_web||[]).push([[151],{8354:(e,t,n)=>{"use strict";n.d(t,{g:()=>Ro});var r=n(1672),o=n(5069),i={},s=function(){function e(){}return e.setItem=function(e,t){return i[e]=t,i[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(i,e)?i[e]:void 0},e.removeItem=function(e){return delete i[e]},e.clear=function(){return i={}},e}(),a=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch(e){this.storageWindow=s}}return e.prototype.getStorage=function(){return this.storageWindow},e}();var u=[{type:"text/plain",ext:"txt"},{type:"text/html",ext:"html"},{type:"text/javascript",ext:"js"},{type:"text/css",ext:"css"},{type:"text/csv",ext:"csv"},{type:"text/yaml",ext:"yml"},{type:"text/yaml",ext:"yaml"},{type:"text/calendar",ext:"ics"},{type:"text/calendar",ext:"ical"},{type:"image/apng",ext:"apng"},{type:"image/bmp",ext:"bmp"},{type:"image/gif",ext:"gif"},{type:"image/x-icon",ext:"ico"},{type:"image/x-icon",ext:"cur"},{type:"image/jpeg",ext:"jpg"},{type:"image/jpeg",ext:"jpeg"},{type:"image/jpeg",ext:"jfif"},{type:"image/jpeg",ext:"pjp"},{type:"image/jpeg",ext:"pjpeg"},{type:"image/png",ext:"png"},{type:"image/svg+xml",ext:"svg"},{type:"image/tiff",ext:"tif"},{type:"image/tiff",ext:"tiff"},{type:"image/webp",ext:"webp"},{type:"application/json",ext:"json"},{type:"application/xml",ext:"xml"},{type:"application/x-sh",ext:"sh"},{type:"application/zip",ext:"zip"},{type:"application/x-rar-compressed",ext:"rar"},{type:"application/x-tar",ext:"tar"},{type:"application/x-bzip",ext:"bz"},{type:"application/x-bzip2",ext:"bz2"},{type:"application/pdf",ext:"pdf"},{type:"application/java-archive",ext:"jar"},{type:"application/msword",ext:"doc"},{type:"application/vnd.ms-excel",ext:"xls"},{type:"application/vnd.ms-excel",ext:"xlsx"},{type:"message/rfc822",ext:"eml"}],c=function(e){return void 0===e&&(e={}),0===Object.keys(e).length},l=function(e,t,n){if(!e||!e.sort)return!1;var r=n&&"desc"===n?-1:1;return e.sort((function(e,n){var o=e[t],i=n[t];return void 0===i?void 0===o?0:1*r:void 0===o||o<i?-1*r:o>i?1*r:0})),!0},f=function(e,t){var n=Object.assign({},e);return t&&("string"==typeof t?delete n[t]:t.forEach((function(e){delete n[e]}))),n},d=function(e,t){void 0===t&&(t="application/octet-stream");var n=e.toLowerCase(),r=u.filter((function(e){return n.endsWith("."+e.ext)}));return r.length>0?r[0].type:t},h=function(e){var t=e.toLowerCase();return!!t.startsWith("text/")||("application/json"===t||"application/xml"===t||"application/sh"===t)},p=function(){for(var e="",t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=32;n>0;n-=1)e+=t[Math.floor(Math.random()*t.length)];return e},g=function(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,o=e.then((function(e){return r=!0,t=!1,e}),(function(e){throw n=!0,t=!1,e}));return o.isFullfilled=function(){return r},o.isPending=function(){return t},o.isRejected=function(){return n},o},y=function(){if("undefined"==typeof self)return!1;var e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope},v=function(){return{isBrowser:"undefined"!=typeof window&&void 0!==window.document,isNode:"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}},m=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!_(e))return e;var r={};for(var o in e){if(e.hasOwnProperty(o))r[t.includes(o)?o:o[0].toLowerCase()+o.slice(1)]=n.includes(o)?e[o]:m(e[o],t,n)}return r},b=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!_(e))return e;var r={};for(var o in e){if(e.hasOwnProperty(o))r[t.includes(o)?o:o[0].toUpperCase()+o.slice(1)]=n.includes(o)?e[o]:b(e[o],t,n)}return r},_=function(e){return!(!(e instanceof Object)||e instanceof Array||e instanceof Function||e instanceof Number||e instanceof String||e instanceof Boolean)},w=function(){function e(){}return e.isEmpty=c,e.sortByField=l,e.objectLessAttributes=f,e.filenameToContentType=d,e.isTextFile=h,e.generateRandomString=p,e.makeQuerablePromise=g,e.isWebWorker=y,e.browserOrNode=v,e.transferKeyToLowerCase=m,e.transferKeyToUpperCase=b,e.isStrictObject=_,e}();var S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},E=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},I=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},C=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(I(arguments[t]));return e},P=new o.k("Util"),k=function(e){function t(t){var n=e.call(this,t)||this;return n.nonRetryable=!0,n}return S(t,e),t}(Error);function x(e,t,n,r){return void 0===r&&(r=1),A(this,void 0,void 0,(function(){var o,i;return E(this,(function(s){switch(s.label){case 0:if("function"!=typeof e)throw Error("functionToRetry must be a function");P.debug(e.name+" attempt #"+r+" with this vars: "+JSON.stringify(t)),s.label=1;case 1:return s.trys.push([1,3,,8]),[4,e.apply(void 0,C(t))];case 2:return[2,s.sent()];case 3:if(o=s.sent(),P.debug("error on "+e.name,o),(a=o)&&a.nonRetryable)throw P.debug(e.name+" non retryable error",o),o;return i=n(r,t,o),P.debug(e.name+" retrying in "+i+" ms"),!1===i?[3,6]:[4,new Promise((function(e){return setTimeout(e,i)}))];case 4:return s.sent(),[4,x(e,t,n,r+1)];case 5:return[2,s.sent()];case 6:throw o;case 7:return[3,8];case 8:return[2]}var a}))}))}var O=function(e,t,n){return void 0===n&&(n=3e5),x(e,t,function(e){return function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}(n))},j=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},T=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},U=new o.k("CognitoCredentials"),R=new Promise((function(e,t){return v().isBrowser?(window.gapi&&window.gapi.auth2?window.gapi.auth2:null)?(U.debug("google api already loaded"),e()):void setTimeout((function(){return e()}),2e3):(U.debug("not in the browser, directly resolved"),e())})),L=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){return j(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(U.debug("need to wait for the Google SDK loaded"),[4,R]);case 1:e.sent(),this.initialized=!0,U.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}}))}))},e.prototype._refreshGoogleTokenImpl=function(){var e=null;return v().isBrowser&&(e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),e?new Promise((function(t,n){e.getAuthInstance().then((function(e){e||(U.debug("google Auth undefined"),n(new k("google Auth undefined")));var r=e.currentUser.get();r.isSignedIn()?(U.debug("refreshing the google access token"),r.reloadAuthResponse().then((function(e){var n=e.id_token,r=e.expires_at;t({token:n,expires_at:r})})).catch((function(e){e&&"network_error"===e.error?n("Network error reloading google auth response"):n(new k("Failed to reload google auth response"))}))):n(new k("User is not signed in with Google"))})).catch((function(e){U.debug("Failed to refresh google token",e),n(new k("Failed to refresh google token"))}))})):(U.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}();var M=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},N=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},F=new o.k("CognitoCredentials"),D=new Promise((function(e,t){return v().isBrowser?window.FB?(F.debug("FB SDK already loaded"),e()):void setTimeout((function(){return e()}),2e3):(F.debug("not in the browser, directly resolved"),e())})),z=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){return M(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(F.debug("need to wait for the Facebook SDK loaded"),[4,D]);case 1:e.sent(),this.initialized=!0,F.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}}))}))},e.prototype._refreshFacebookTokenImpl=function(){var e=null;if(v().isBrowser&&(e=window.FB),!e){var t="no fb sdk available";return F.debug(t),Promise.reject(new k(t))}return new Promise((function(t,n){e.getLoginStatus((function(e){if(e&&e.authResponse){var r=e.authResponse,o=r.accessToken,i=1e3*r.expiresIn+(new Date).getTime();if(!o){s="the jwtToken is undefined";F.debug(s),n(new k(s))}t({token:o,expires_at:i})}else{var s="no response from facebook when refreshing the jwt token";F.debug(s),n(new k(s))}}),{scope:"public_profile,email"})}))},e}();var H=new L,B=new z,q="aws-amplify/3.8.23",G={userAgent:q+" js",product:"",navigator:null,isReactNative:!1};if("undefined"!=typeof navigator&&navigator.product)switch(G.product=navigator.product||"",G.navigator=navigator||null,navigator.product){case"ReactNative":G.userAgent=q+" react-native",G.isReactNative=!0;break;default:G.userAgent=q+" js",G.isReactNative=!1}var K=function(){return G.userAgent};var W=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},$=new o.k("Amplify"),V=new(function(){function e(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Logger=o.k,this.ServiceWorker=null}return e.prototype.register=function(e){$.debug("component registered in amplify",e),this._components.push(e),"function"==typeof e.getModuleName?(this._modules[e.getModuleName()]=e,this[e.getModuleName()]=e):$.debug("no getModuleName method for component",e),e.configure(this._config)},e.prototype.configure=function(e){var t=this;return e?(this._config=Object.assign(this._config,e),$.debug("amplify config",this._config),Object.entries(this._modules).forEach((function(e){var n=W(e,2),r=(n[0],n[1]);Object.keys(r).forEach((function(e){t._modules[e]&&(r[e]=t._modules[e])}))})),this._components.map((function(e){e.configure(t._config)})),this._config):this._config},e.prototype.addPluggable=function(e){e&&e.getCategory&&"function"==typeof e.getCategory&&this._components.map((function(t){t.addPluggable&&"function"==typeof t.addPluggable&&t.addPluggable(e)}))},e}());var Q=n(655),Z=function(e,t){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Z(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var J=function(){return(J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function X(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function ee(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}Object.create;function te(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var ne,re,oe,ie,se,ae,ue,ce,le,fe,de,he,pe,ge,ye,ve,me,be,_e,we,Se,Ae,Ee,Ie,Ce,Pe,ke,xe,Oe,je,Te,Ue,Re,Le,Me,Ne,Fe,De,ze,He,Be,qe,Ge,Ke,We,$e,Ve,Qe,Ze,Ye,Je,Xe,et,tt,nt,rt,ot;Object.create;!function(e){e.AUTHENTICATED_ROLE="AuthenticatedRole",e.DENY="Deny"}(ne||(ne={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(re||(re={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(oe||(oe={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(ie||(ie={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(se||(se={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(ae||(ae={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(ue||(ue={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(ce||(ce={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(le||(le={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(fe||(fe={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(de||(de={})),function(e){e.ACCESS_DENIED="AccessDenied",e.INTERNAL_SERVER_ERROR="InternalServerError"}(he||(he={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(pe||(pe={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(ge||(ge={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(ye||(ye={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(ve||(ve={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(me||(me={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(be||(be={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(_e||(_e={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(we||(we={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Se||(Se={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Ae||(Ae={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Ee||(Ee={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Ie||(Ie={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Ce||(Ce={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Pe||(Pe={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(ke||(ke={})),function(e){e.CONTAINS="Contains",e.EQUALS="Equals",e.NOT_EQUAL="NotEqual",e.STARTS_WITH="StartsWith"}(xe||(xe={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Oe||(Oe={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(je||(je={})),function(e){e.RULES="Rules",e.TOKEN="Token"}(Te||(Te={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Ue||(Ue={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Re||(Re={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Le||(Le={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Me||(Me={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Ne||(Ne={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Fe||(Fe={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(De||(De={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(ze||(ze={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(He||(He={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Be||(Be={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(qe||(qe={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Ge||(Ge={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Ke||(Ke={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(We||(We={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}($e||($e={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Ve||(Ve={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Qe||(Qe={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Ze||(Ze={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Ye||(Ye={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Je||(Je={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(Xe||(Xe={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(et||(et={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(tt||(tt={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(nt||(nt={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(rt||(rt={})),function(e){e.filterSensitiveLog=function(e){return J({},e)}}(ot||(ot={}));var it=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),st=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e((0,Q.__assign)((0,Q.__assign)({},this),{headers:(0,Q.__assign)({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var r,o=t[n];return(0,Q.__assign)((0,Q.__assign)({},e),((r={})[n]=Array.isArray(o)?(0,Q.__spread)(o):o,r))}),{}))),n},e}();var at=function(e,t){return X(void 0,void 0,void 0,(function(){var n,r,o,i,s,a,u,c,l,f,d,h,p,g,y;return ee(this,(function(v){switch(v.label){case 0:return r=[J({},e)],y={},[4,Mt(e.body,t)];case 1:switch(n=J.apply(void 0,r.concat([(y.body=v.sent(),y)])),i="UnknownError",i=Nt(e,n.body),i){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return s=[{}],[4,ct(n,t)];case 3:return o=J.apply(void 0,[J.apply(void 0,s.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 4:return a=[{}],[4,lt(n,t)];case 5:return o=J.apply(void 0,[J.apply(void 0,a.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 6:return u=[{}],[4,ft(n,t)];case 7:return o=J.apply(void 0,[J.apply(void 0,u.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 8:return c=[{}],[4,dt(n,t)];case 9:return o=J.apply(void 0,[J.apply(void 0,c.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 10:return l=[{}],[4,pt(n,t)];case 11:return o=J.apply(void 0,[J.apply(void 0,l.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 12:return f=[{}],[4,gt(n,t)];case 13:return o=J.apply(void 0,[J.apply(void 0,f.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 14:return d=[{}],[4,yt(n,t)];case 15:return o=J.apply(void 0,[J.apply(void 0,d.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 16:return h=[{}],[4,vt(n,t)];case 17:return o=J.apply(void 0,[J.apply(void 0,h.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 18:p=n.body,i=p.code||p.Code||i,o=J(J({},p),{name:""+i,message:p.message||p.Message||i,$fault:"client",$metadata:Ut(e)}),v.label=19;case 19:return g=o.message||o.Message||i,o.message=g,delete o.Message,[2,Promise.reject(Object.assign(new Error(g),o))]}}))}))},ut=function(e,t){return X(void 0,void 0,void 0,(function(){var n,r,o,i,s,a,u,c,l,f,d,h,p,g,y;return ee(this,(function(v){switch(v.label){case 0:return r=[J({},e)],y={},[4,Mt(e.body,t)];case 1:switch(n=J.apply(void 0,r.concat([(y.body=v.sent(),y)])),i="UnknownError",i=Nt(e,n.body),i){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return s=[{}],[4,ct(n,t)];case 3:return o=J.apply(void 0,[J.apply(void 0,s.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 4:return a=[{}],[4,lt(n,t)];case 5:return o=J.apply(void 0,[J.apply(void 0,a.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 6:return u=[{}],[4,dt(n,t)];case 7:return o=J.apply(void 0,[J.apply(void 0,u.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 8:return c=[{}],[4,ht(n,t)];case 9:return o=J.apply(void 0,[J.apply(void 0,c.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 10:return l=[{}],[4,pt(n,t)];case 11:return o=J.apply(void 0,[J.apply(void 0,l.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 12:return f=[{}],[4,gt(n,t)];case 13:return o=J.apply(void 0,[J.apply(void 0,f.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 14:return d=[{}],[4,yt(n,t)];case 15:return o=J.apply(void 0,[J.apply(void 0,d.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 16:return h=[{}],[4,vt(n,t)];case 17:return o=J.apply(void 0,[J.apply(void 0,h.concat([v.sent()])),{name:i,$metadata:Ut(e)}]),[3,19];case 18:p=n.body,i=p.code||p.Code||i,o=J(J({},p),{name:""+i,message:p.message||p.Message||i,$fault:"client",$metadata:Ut(e)}),v.label=19;case 19:return g=o.message||o.Message||i,o.message=g,delete o.Message,[2,Promise.reject(Object.assign(new Error(g),o))]}}))}))},ct=function(e,t){return X(void 0,void 0,void 0,(function(){var n,r;return ee(this,(function(o){return n=e.body,r=St(n,t),[2,J({name:"ExternalServiceException",$fault:"client",$metadata:Ut(e)},r)]}))}))},lt=function(e,t){return X(void 0,void 0,void 0,(function(){var n,r;return ee(this,(function(o){return n=e.body,r=It(n,t),[2,J({name:"InternalErrorException",$fault:"server",$metadata:Ut(e)},r)]}))}))},ft=function(e,t){return X(void 0,void 0,void 0,(function(){var n,r;return ee(this,(function(o){return n=e.body,r=Ct(n,t),[2,J({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:Ut(e)},r)]}))}))},dt=function(e,t){return X(void 0,void 0,void 0,(function(){var n,r;return ee(this,(function(o){return n=e.body,r=Pt(n,t),[2,J({name:"InvalidParameterException",$fault:"client",$metadata:Ut(e)},r)]}))}))},ht=function(e,t){return X(void 0,void 0,void 0,(function(){var n,r;return ee(this,(function(o){return n=e.body,r=kt(n,t),[2,J({name:"LimitExceededException",$fault:"client",$metadata:Ut(e)},r)]}))}))},pt=function(e,t){return X(void 0,void 0,void 0,(function(){var n,r;return ee(this,(function(o){return n=e.body,r=xt(n,t),[2,J({name:"NotAuthorizedException",$fault:"client",$metadata:Ut(e)},r)]}))}))},gt=function(e,t){return X(void 0,void 0,void 0,(function(){var n,r;return ee(this,(function(o){return n=e.body,r=Ot(n,t),[2,J({name:"ResourceConflictException",$fault:"client",$metadata:Ut(e)},r)]}))}))},yt=function(e,t){return X(void 0,void 0,void 0,(function(){var n,r;return ee(this,(function(o){return n=e.body,r=jt(n,t),[2,J({name:"ResourceNotFoundException",$fault:"client",$metadata:Ut(e)},r)]}))}))},vt=function(e,t){return X(void 0,void 0,void 0,(function(){var n,r;return ee(this,(function(o){return n=e.body,r=Tt(n,t),[2,J({name:"TooManyRequestsException",$fault:"client",$metadata:Ut(e)},r)]}))}))},mt=function(e,t){return J(J(J({},void 0!==e.CustomRoleArn&&null!==e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),void 0!==e.IdentityId&&null!==e.IdentityId&&{IdentityId:e.IdentityId}),void 0!==e.Logins&&null!==e.Logins&&{Logins:_t(e.Logins,t)})},bt=function(e,t){return J(J(J({},void 0!==e.AccountId&&null!==e.AccountId&&{AccountId:e.AccountId}),void 0!==e.IdentityPoolId&&null!==e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),void 0!==e.Logins&&null!==e.Logins&&{Logins:_t(e.Logins,t)})},_t=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=te(t,2),o=r[0],i=r[1];return null===i?e:J(J({},e),((n={})[o]=i,n))}),{})},wt=function(e,t){return{AccessKeyId:void 0!==e.AccessKeyId&&null!==e.AccessKeyId?e.AccessKeyId:void 0,Expiration:void 0!==e.Expiration&&null!==e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:void 0!==e.SecretKey&&null!==e.SecretKey?e.SecretKey:void 0,SessionToken:void 0!==e.SessionToken&&null!==e.SessionToken?e.SessionToken:void 0}},St=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},At=function(e,t){return{Credentials:void 0!==e.Credentials&&null!==e.Credentials?wt(e.Credentials):void 0,IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}},Et=function(e,t){return{IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}},It=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ct=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Pt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},kt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},xt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ot=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},jt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Tt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ut=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Rt=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},Lt=function(e,t,n,r,o){return X(void 0,void 0,void 0,(function(){var i,s,a,u,c,l;return ee(this,(function(f){switch(f.label){case 0:return[4,e.endpoint()];case 1:return i=f.sent(),s=i.hostname,a=i.protocol,u=void 0===a?"https":a,c=i.port,l={protocol:u,hostname:s,port:c,method:"POST",path:n,headers:t},void 0!==r&&(l.hostname=r),void 0!==o&&(l.body=o),[2,new st(l)]}}))}))},Mt=function(e,t){return function(e,t){return Rt(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},Nt=function(e,t){var n,r,o=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()===r.toLowerCase()})));return void 0!==i?o(e.headers[i]):void 0!==t.code?o(t.code):void 0!==t.__type?o(t.__type):""},Ft={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Dt={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function zt(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(r){return(0,Q.__awaiter)(void 0,void 0,void 0,(function(){var o,i;return(0,Q.__generator)(this,(function(s){switch(s.label){case 0:return[4,n(r)];case 1:return o=s.sent().response,[4,t(o,e)];case 2:return i=s.sent(),[2,{response:o,output:i}]}}))}))}}}(e,n),Ft),r.add(function(e,t){return function(n,r){return function(r){return(0,Q.__awaiter)(void 0,void 0,void 0,(function(){var o;return(0,Q.__generator)(this,(function(i){switch(i.label){case 0:return[4,t(r.input,e)];case 1:return o=i.sent(),[2,n((0,Q.__assign)((0,Q.__assign)({},r),{request:o}))]}}))}))}}}(e,t),Dt)}}}var Ht=function(){var e=[],t=[],n=new Set,r=function(n){return e.forEach((function(e){n.add(e.middleware,(0,Q.__assign)({},e))})),t.forEach((function(e){n.addRelativeTo(e.middleware,(0,Q.__assign)({},e))})),n},o=function(e){var t=[];return e.before.forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,(0,Q.__spread)(o(e)))})),t.push(e),e.after.reverse().forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,(0,Q.__spread)(o(e)))})),t},i=function(){var n,r=[],i=[],s={};return e.forEach((function(e){var t=(0,Q.__assign)((0,Q.__assign)({},e),{before:[],after:[]});t.name&&(s[t.name]=t),r.push(t)})),t.forEach((function(e){var t=(0,Q.__assign)((0,Q.__assign)({},e),{before:[],after:[]});t.name&&(s[t.name]=t),i.push(t)})),i.forEach((function(e){if(e.toMiddleware){var t=s[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(n=r,n.sort((function(e,t){return Bt[t.step]-Bt[e.step]||qt[t.priority||"normal"]-qt[e.priority||"normal"]}))).map(o).reduce((function(e,t){return e.push.apply(e,(0,Q.__spread)(t)),e}),[]).map((function(e){return e.middleware}))},s={add:function(t,r){void 0===r&&(r={});var o=r.name,i=r.override,s=(0,Q.__assign)({step:"initialize",priority:"normal",middleware:t},r);if(o){if(n.has(o)){if(!i)throw new Error("Duplicate middleware name '"+o+"'");var a=e.findIndex((function(e){return e.name===o})),u=e[a];if(u.step!==s.step||u.priority!==s.priority)throw new Error('"'+o+'" middleware with '+u.priority+" priority in "+u.step+" step cannot be overridden by same-name middleware with "+s.priority+" priority in "+s.step+" step.");e.splice(a,1)}n.add(o)}e.push(s)},addRelativeTo:function(e,r){var o=r.name,i=r.override,s=(0,Q.__assign)({middleware:e},r);if(o){if(n.has(o)){if(!i)throw new Error("Duplicate middleware name '"+o+"'");var a=t.findIndex((function(e){return e.name===o})),u=t[a];if(u.toMiddleware!==s.toMiddleware||u.relation!==s.relation)throw new Error('"'+o+'" middleware '+u.relation+' "'+u.toMiddleware+'" middleware cannot be overridden by same-name middleware '+s.relation+' "'+s.toMiddleware+'" middleware.');t.splice(a,1)}n.add(o)}t.push(s)},clone:function(){return r(Ht())},use:function(e){e.applyToStack(s)},remove:function(r){return"string"==typeof r?function(r){var o=!1,i=function(e){return!e.name||e.name!==r||(o=!0,n.delete(r),!1)};return e=e.filter(i),t=t.filter(i),o}(r):function(r){var o=!1,i=function(e){return e.middleware!==r||(o=!0,e.name&&n.delete(e.name),!1)};return e=e.filter(i),t=t.filter(i),o}(r)},removeByTag:function(r){var o=!1,i=function(e){var t=e.tags,i=e.name;return!t||!t.includes(r)||(i&&n.delete(i),o=!0,!1)};return e=e.filter(i),t=t.filter(i),o},concat:function(e){var t=r(Ht());return t.use(e),t},applyToStack:r,resolve:function(e,t){var n,r;try{for(var o=(0,Q.__values)(i().reverse()),s=o.next();!s.done;s=o.next()){e=(0,s.value)(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return e}};return s},Bt={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},qt={high:3,normal:2,low:1},Gt=function(){function e(e){this.middlewareStack=Ht(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,o="function"==typeof t?t:n,i=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!o)return i(e).then((function(e){return e.output}));i(e).then((function(e){return o(null,e.output)}),(function(e){return o(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),Kt=function(){this.middlewareStack=Ht()},Wt=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,(0,Q.__spread)([null],arguments)),n=new t;return Object.setPrototypeOf(n,e.prototype),n};Wt.prototype=Object.create(String.prototype,{constructor:{value:Wt,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Wt,String);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}(0,Q.__extends)(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(Wt);var $t=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(zt(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:Se.filterSensitiveLog,outputFilterSensitiveLog:Ee.filterSensitiveLog},i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),o)},t.prototype.serialize=function(e,t){return function(e,t){return X(void 0,void 0,void 0,(function(){var n,r;return ee(this,(function(o){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(mt(e,t)),[2,Lt(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return X(void 0,void 0,void 0,(function(){var n,r,o;return ee(this,(function(i){switch(i.label){case 0:return e.statusCode>=300?[2,at(e,t)]:[4,Mt(e.body,t)];case 1:return n=i.sent(),r=At(n,t),o=J({$metadata:Ut(e)},r),[2,Promise.resolve(o)]}}))}))}(e,t)},t}(Kt),Vt=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t)||this;return r.tryNextLink=n,r}return(0,Q.__extends)(t,e),t}(Error);function Qt(e){return Promise.all(Object.keys(e).reduce((function(t,n){var r=e[n];return"string"==typeof r?t.push([n,r]):t.push(r().then((function(e){return[n,e]}))),t}),[])).then((function(e){return e.reduce((function(e,t){var n=(0,Q.__read)(t,2),r=n[0],o=n[1];return e[r]=o,e}),{})}))}function Zt(e){var t=this;return function(){return(0,Q.__awaiter)(t,void 0,void 0,(function(){var t,n,r,o,i,s,a,u,c,l,f,d,h;return(0,Q.__generator)(this,(function(p){switch(p.label){case 0:return l=(c=e.client).send,f=$t.bind,h={CustomRoleArn:e.customRoleArn,IdentityId:e.identityId},e.logins?[4,Qt(e.logins)]:[3,2];case 1:return d=p.sent(),[3,3];case 2:d=void 0,p.label=3;case 3:return[4,l.apply(c,[new(f.apply($t,[void 0,(h.Logins=d,h)]))])];case 4:return t=p.sent().Credentials,n=void 0===t?function(){throw new Vt("Response from Amazon Cognito contained no credentials")}():t,r=n.AccessKeyId,o=void 0===r?function(){throw new Vt("Response from Amazon Cognito contained no access key ID")}():r,i=n.Expiration,s=n.SecretKey,a=void 0===s?function(){throw new Vt("Response from Amazon Cognito contained no secret key")}():s,u=n.SessionToken,[2,{identityId:e.identityId,accessKeyId:o,secretAccessKey:a,sessionToken:u,expiration:i}]}}))}))}}var Yt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Y(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(zt(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:Ce.filterSensitiveLog,outputFilterSensitiveLog:Pe.filterSensitiveLog},i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),o)},t.prototype.serialize=function(e,t){return function(e,t){return X(void 0,void 0,void 0,(function(){var n,r;return ee(this,(function(o){return n={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(bt(e,t)),[2,Lt(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return X(void 0,void 0,void 0,(function(){var n,r,o;return ee(this,(function(i){switch(i.label){case 0:return e.statusCode>=300?[2,ut(e,t)]:[4,Mt(e.body,t)];case 1:return n=i.sent(),r=Et(n,t),o=J({$metadata:Ut(e)},r),[2,Promise.resolve(o)]}}))}))}(e,t)},t}(Kt),Jt="IdentityIds",Xt=function(){function e(e){void 0===e&&(e="aws:cognito-identity-ids"),this.dbName=e}return e.prototype.getItem=function(e){return this.withObjectStore("readonly",(function(t){var n=t.get(e);return new Promise((function(e){n.onerror=function(){return e(null)},n.onsuccess=function(){return e(n.result?n.result.value:null)}}))})).catch((function(){return null}))},e.prototype.removeItem=function(e){return this.withObjectStore("readwrite",(function(t){var n=t.delete(e);return new Promise((function(e,t){n.onerror=function(){return t(n.error)},n.onsuccess=function(){return e()}}))}))},e.prototype.setItem=function(e,t){return this.withObjectStore("readwrite",(function(n){var r=n.put({id:e,value:t});return new Promise((function(e,t){r.onerror=function(){return t(r.error)},r.onsuccess=function(){return e()}}))}))},e.prototype.getDb=function(){var e=self.indexedDB.open(this.dbName,1);return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)},e.onblocked=function(){n(new Error("Unable to access DB"))},e.onupgradeneeded=function(){var t=e.result;t.onerror=function(){n(new Error("Failed to create object store"))},t.createObjectStore(Jt,{keyPath:"id"})}}))},e.prototype.withObjectStore=function(e,t){return this.getDb().then((function(n){var r=n.transaction(Jt,e);return r.oncomplete=function(){return n.close()},new Promise((function(e,n){r.onerror=function(){return n(r.error)},e(t(r.objectStore(Jt)))})).catch((function(e){throw n.close(),e}))}))},e}(),en=new(function(){function e(e){void 0===e&&(e={}),this.store=e}return e.prototype.getItem=function(e){return e in this.store?this.store[e]:null},e.prototype.removeItem=function(e){delete this.store[e]},e.prototype.setItem=function(e,t){this.store[e]=t},e}());function tn(e){var t=this,n=e.accountId,r=e.cache,o=void 0===r?"object"==typeof self&&self.indexedDB?new Xt:"object"==typeof window&&window.localStorage?window.localStorage:en:r,i=e.client,s=e.customRoleArn,a=e.identityPoolId,u=e.logins,c=e.userIdentifier,l=void 0===c?u&&0!==Object.keys(u).length?void 0:"ANONYMOUS":c,f=l?"aws:cognito-identity-credentials:"+a+":"+l:void 0,d=function(){return(0,Q.__awaiter)(t,void 0,void 0,(function(){var e,t,r,c,l,h,p,g,y;return(0,Q.__generator)(this,(function(v){switch(v.label){case 0:return(t=f)?[4,o.getItem(f)]:[3,2];case 1:t=v.sent(),v.label=2;case 2:return(e=t)?[3,7]:(h=(l=i).send,p=Yt.bind,y={AccountId:n,IdentityPoolId:a},u?[4,Qt(u)]:[3,4]);case 3:return g=v.sent(),[3,5];case 4:g=void 0,v.label=5;case 5:return[4,h.apply(l,[new(p.apply(Yt,[void 0,(y.Logins=g,y)]))])];case 6:r=v.sent().IdentityId,c=void 0===r?function(){throw new Vt("Response from Amazon Cognito contained no identity ID")}():r,e=c,f&&Promise.resolve(o.setItem(f,e)).catch((function(){})),v.label=7;case 7:return[2,(d=Zt({client:i,customRoleArn:s,logins:u,identityId:e}))()]}}))}))};return function(){return d().catch((function(e){return(0,Q.__awaiter)(t,void 0,void 0,(function(){return(0,Q.__generator)(this,(function(t){throw f&&Promise.resolve(o.removeItem(f)).catch((function(){})),e}))}))}))}}var nn=n(7643),rn=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,on)},on=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};for(var sn=function(){function e(e){var t=(void 0===e?{}:e).requestTimeout;this.requestTimeout=t}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal,r=this.requestTimeout;if(null==n?void 0:n.aborted){var o=new Error("Request aborted");return o.name="AbortError",Promise.reject(o)}var i=e.path;if(e.query){var s=function(e){var t,n,r=[];try{for(var o=(0,Q.__values)(Object.keys(e).sort()),i=o.next();!i.done;i=o.next()){var s=i.value,a=e[s];if(s=rn(s),Array.isArray(a))for(var u=0,c=a.length;u<c;u++)r.push(s+"="+rn(a[u]));else{var l=s;(a||"string"==typeof a)&&(l+="="+rn(a)),r.push(l)}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r.join("&")}(e.query);s&&(i+="?"+s)}var a=e.port,u=e.method,c=e.protocol+"//"+e.hostname+(a?":"+a:"")+i,l={body:"GET"===u||"HEAD"===u?void 0:e.body,headers:new Headers(e.headers),method:u};"undefined"!=typeof AbortController&&(l.signal=n);var f,d=new Request(c,l),h=[fetch(d).then((function(e){var t,n,r=e.headers,o={};try{for(var i=(0,Q.__values)(r.entries()),s=i.next();!s.done;s=i.next()){var a=s.value;o[a[0]]=a[1]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new it({headers:o,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new it({headers:o,statusCode:e.status,body:t})}}))})),(f=r,void 0===f&&(f=0),new Promise((function(e,t){f&&setTimeout((function(){var e=new Error("Request did not complete within "+f+" ms");e.name="TimeoutError",t(e)}),f)})))];return n&&h.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(h)},e}(),an={},un=new Array(64),cn=0,ln="A".charCodeAt(0),fn="Z".charCodeAt(0);cn+ln<=fn;cn++){var dn=String.fromCharCode(cn+ln);an[dn]=cn,un[cn]=dn}for(cn=0,ln="a".charCodeAt(0),fn="z".charCodeAt(0);cn+ln<=fn;cn++){dn=String.fromCharCode(cn+ln);var hn=cn+26;an[dn]=hn,un[hn]=dn}for(cn=0;cn<10;cn++){an[cn.toString(10)]=cn+52;dn=cn.toString(10),hn=cn+52;an[dn]=hn,un[hn]=dn}an["+"]=62,un[62]="+",an["/"]=63,un[63]="/";function pn(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),o=0;o<e.length;o+=4){for(var i=0,s=0,a=o,u=o+3;a<=u;a++)"="!==e[a]?(i|=an[e[a]]<<6*(u-a),s+=6):i>>=6;var c=o/4*3;i>>=s%8;for(var l=Math.floor(s/8),f=0;f<l;f++){var d=8*(l-f-1);r.setUint8(c+f,(i&255<<d)>>d)}}return new Uint8Array(n)}function gn(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var o=null!==(e=r.result)&&void 0!==e?e:"",i=o.indexOf(","),s=i>-1?i+1:o.length;t(o.substring(s))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)}))}var yn={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},vn=function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return(0,Q.__awaiter)(void 0,void 0,void 0,(function(){var o;return(0,Q.__generator)(this,(function(i){return(null===(o=null==e?void 0:e.retryStrategy)||void 0===o?void 0:o.mode)&&(n.userAgent=(0,Q.__spread)(n.userAgent||[],[["cfg/retry-mode",e.retryStrategy.mode]])),[2,e.retryStrategy.retry(t,r)]}))}))}}}(e),yn)}}},mn=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],bn=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],_n=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],wn=[500,502,503,504],Sn=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||bn.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},An=n(4776),En=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},In=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return mn.includes(e.name)}(e)||Sn(e)||function(e){var t;return _n.includes(e.name)||wn.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},Cn="standard",Pn=function(){function e(e,t){var n,r,o,i,s,a,u,c;this.maxAttemptsProvider=e,this.mode=Cn,this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:In,this.delayDecider=null!==(r=null==t?void 0:t.delayDecider)&&void 0!==r?r:En,this.retryQuota=null!==(o=null==t?void 0:t.retryQuota)&&void 0!==o?o:(s=i=500,a=i,u=function(e){return"TimeoutError"===e.name?10:5},c=function(e){return u(e)<=a},Object.freeze({hasRetryTokens:c,retrieveRetryTokens:function(e){if(!c(e))throw new Error("No retry token available");var t=u(e);return a-=t,t},releaseRetryTokens:function(e){a+=null!=e?e:1,a=Math.min(a,s)}}))}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return(0,Q.__awaiter)(this,void 0,void 0,(function(){var e;return(0,Q.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t){return(0,Q.__awaiter)(this,void 0,void 0,(function(){var n,r,o,i,s,a,u,c;return(0,Q.__generator)(this,(function(l){switch(l.label){case 0:return r=0,o=0,[4,this.getMaxAttempts()];case 1:i=l.sent(),s=t.request,st.isInstance(s)&&(s.headers["amz-sdk-invocation-id"]=(0,An.v4)()),a=function(){var a,c,l,f,d;return(0,Q.__generator)(this,(function(h){switch(h.label){case 0:return h.trys.push([0,2,,5]),st.isInstance(s)&&(s.headers["amz-sdk-request"]="attempt="+(r+1)+"; max="+i),[4,e(t)];case 1:return a=h.sent(),c=a.response,l=a.output,u.retryQuota.releaseRetryTokens(n),l.$metadata.attempts=r+1,l.$metadata.totalRetryDelay=o,[2,{value:{response:c,output:l}}];case 2:return f=h.sent(),r++,u.shouldRetry(f,r,i)?(n=u.retryQuota.retrieveRetryTokens(f),d=u.delayDecider(Sn(f)?500:100,r),o+=d,[4,new Promise((function(e){return setTimeout(e,d)}))]):[3,4];case 3:return h.sent(),[2,"continue"];case 4:throw f.$metadata||(f.$metadata={}),f.$metadata.attempts=r,f.$metadata.totalRetryDelay=o,f;case 5:return[2]}}))},u=this,l.label=2;case 2:return[5,a()];case 3:return"object"==typeof(c=l.sent())?[2,c.value]:[3,2];case 4:return[2]}}))}))},e}(),kn=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};var xn=n(1206),On=n.n(xn);var jn="cognito-identity.{region}.amazonaws.com",Tn=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Un=new Set(["cn-north-1","cn-northwest-1"]),Rn=new Set(["us-iso-east-1"]),Ln=new Set(["us-isob-east-1"]),Mn=new Set(["us-gov-east-1","us-gov-west-1"]);var Nn,Fn,Dn,zn,Hn={apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"cognito-identity.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"cognito-identity.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":n={hostname:"cognito-identity-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":n={hostname:"cognito-identity-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-west-1":n={hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":n={hostname:"cognito-identity-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"sa-east-1":n={hostname:"cognito-identity.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-west-1":n={hostname:"cognito-identity.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":n={hostname:"cognito-identity.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:Tn.has(e)&&(n={hostname:jn.replace("{region}",e),partition:"aws"}),Un.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Rn.has(e)&&(n={hostname:"cognito-identity.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Ln.has(e)&&(n={hostname:"cognito-identity.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Mn.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:jn.replace("{region}",e),partition:"aws"})}return Promise.resolve(J({signingService:"cognito-identity"},n))},serviceId:"Cognito Identity",urlParser:function(e){var t,n=new URL(e),r=n.hostname,o=n.pathname,i=n.port,s=n.protocol,a=n.search;return a&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var o=(0,Q.__values)(e.split("&")),i=o.next();!i.done;i=o.next()){var s=i.value,a=(0,Q.__read)(s.split("="),2),u=a[0],c=a[1],l=void 0===c?null:c;u=decodeURIComponent(u),l&&(l=decodeURIComponent(l)),u in r?Array.isArray(r[u])?r[u].push(l):r[u]=[r[u],l]:r[u]=l}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(a)),{hostname:r,port:i?parseInt(i):void 0,protocol:s,path:o,query:t}}},Bn=J(J({},Hn),{runtime:"browser",base64Decoder:pn,base64Encoder:function(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,o=0,i=n,s=Math.min(n+3,e.length);i<s;i++)r|=e[i]<<8*(s-i-1),o+=8;var a=Math.ceil(o/6);r<<=6*a-o;for(var u=1;u<=a;u++){var c=6*(a-u);t+=un[(r&63<<c)>>c]}t+="==".slice(0,4-a)}return t},bodyLengthChecker:function(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0},credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:(Fn={serviceId:Hn.serviceId,clientVersion:"3.6.1"},Dn=Fn.serviceId,zn=Fn.clientVersion,function(){return(0,Q.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n,r,o,i,s,a,u;return(0,Q.__generator)(this,(function(c){return e=(null===(n=null===window||void 0===window?void 0:window.navigator)||void 0===n?void 0:n.userAgent)?On().parse(window.navigator.userAgent):void 0,t=[["aws-sdk-js",zn],["os/"+((null===(r=null==e?void 0:e.os)||void 0===r?void 0:r.name)||"other"),null===(o=null==e?void 0:e.os)||void 0===o?void 0:o.version],["lang/js"],["md/browser",(null!==(s=null===(i=null==e?void 0:e.browser)||void 0===i?void 0:i.name)&&void 0!==s?s:"unknown")+"_"+(null!==(u=null===(a=null==e?void 0:e.browser)||void 0===a?void 0:a.version)&&void 0!==u?u:"unknown")]],Dn&&t.push(["api/"+Dn,zn]),[2,t]}))}))}),maxAttempts:3,region:(Nn="Region is missing",function(){return Promise.reject(Nn)}),requestHandler:new sn,sha256:nn.Sha256,streamCollector:function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return(0,Q.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,Q.__generator)(this,(function(r){switch(r.label){case 0:return[4,gn(e)];case 1:return t=r.sent(),n=pn(t),[2,new Uint8Array(n)]}}))}))}(e):function(e){return(0,Q.__awaiter)(this,void 0,void 0,(function(){var t,n,r,o,i,s,a;return(0,Q.__generator)(this,(function(u){switch(u.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,u.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return o=u.sent(),i=o.done,(s=o.value)&&(a=t,(t=new Uint8Array(a.length+s.length)).set(a),t.set(s,a.length)),r=i,[3,1];case 3:return[2,t]}}))}))}(e)},utf8Decoder:function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,63&o|128);else if(n+1<e.length&&55296==(64512&o)&&56320==(64512&e.charCodeAt(n+1))){var i=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(o>>12|224,o>>6&63|128,63&o|128)}return Uint8Array.from(t)}(e)},utf8Encoder:function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var o=e[n];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){var i=e[++n];t+=String.fromCharCode((31&o)<<6|63&i)}else if(240<=o&&o<365){var s="%"+[o,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&o)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}});var qn=function(){return(qn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Gn(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function Kn(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var Wn=function(e){var t=e.endpoint,n=e.urlParser;if("string"==typeof t){var r=Promise.resolve(n(t));return function(){return r}}if("object"==typeof t){var o=Promise.resolve(t);return function(){return o}}return t},$n=function(e){return Gn(void 0,void 0,void 0,(function(){var t,n,r,o,i;return Kn(this,(function(s){switch(s.label){case 0:return t=e.tls,n=void 0===t||t,[4,e.region()];case 1:if(r=s.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(r)];case 2:if(!(o=(null!==(i=s.sent())&&void 0!==i?i:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+o)]}}))}))},Vn=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Qn="content-length";var Zn={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Yn=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return(0,Q.__awaiter)(t,void 0,void 0,(function(){var t,o,i,s,a;return(0,Q.__generator)(this,(function(u){return t=r.request,st.isInstance(t)&&(o=t.body,i=t.headers,o&&-1===Object.keys(i).map((function(e){return e.toLowerCase()})).indexOf(Qn)&&void 0!==(s=e(o))&&(t.headers=(0,Q.__assign)((0,Q.__assign)({},t.headers),((a={})["content-length"]=String(s),a)))),[2,n((0,Q.__assign)((0,Q.__assign)({},r),{request:t}))]}))}))}}}(e.bodyLengthChecker),Zn)}}};for(var Jn={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Xn=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return(0,Q.__awaiter)(void 0,void 0,void 0,(function(){var r,o;return(0,Q.__generator)(this,(function(i){return st.isInstance(n.request)?(r=n.request,(void 0===(o=(e.requestHandler.metadata||{}).handlerProtocol)?"":o).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]}))}))}}}(e),Jn)}}},er={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},tr=function(e){return{applyToStack:function(e){e.add((function(e,t){return function(n){return(0,Q.__awaiter)(void 0,void 0,void 0,(function(){var r,o,i,s,a,u,c,l,f;return(0,Q.__generator)(this,(function(d){switch(d.label){case 0:return r=t.clientName,o=t.commandName,i=t.inputFilterSensitiveLog,s=t.logger,a=t.outputFilterSensitiveLog,[4,e(n)];case 1:return u=d.sent(),s?("function"==typeof s.info&&(c=u.output,l=c.$metadata,f=(0,Q.__rest)(c,["$metadata"]),s.info({clientName:r,commandName:o,input:i(n.input),output:a(f),metadata:l})),[2,u]):[2,u]}}))}))}}),er)}}},nr={},rr={},or=0;or<256;or++){var ir=or.toString(16).toLowerCase();1===ir.length&&(ir="0"+ir),nr[or]=ir,rr[ir]=or}function sr(e){for(var t="",n=0;n<e.byteLength;n++)t+=nr[e[n]];return t}var ar="X-Amz-Date",ur="X-Amz-Signature",cr="X-Amz-Security-Token",lr="authorization",fr=ar.toLowerCase(),dr=[lr,fr,"date"],hr=ur.toLowerCase(),pr="x-amz-content-sha256",gr=cr.toLowerCase(),yr={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},vr=/^proxy-/,mr=/^sec-/,br="AWS4-HMAC-SHA256",_r="AWS4-HMAC-SHA256-PAYLOAD",wr="aws4_request",Sr={},Ar=[];function Er(e,t,n){return e+"/"+t+"/"+n+"/"+wr}function Ir(e,t,n){var r=new e(t);return r.update(n),r.digest()}function Cr(e,t,n){var r,o,i=e.headers,s={};try{for(var a=(0,Q.__values)(Object.keys(i).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(l in yr||(null==t?void 0:t.has(l))||vr.test(l)||mr.test(l))&&(!n||n&&!n.has(l))||(s[l]=i[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return s}var Pr=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,kr)},kr=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function xr(e,t){var n=e.headers,r=e.body;return(0,Q.__awaiter)(this,void 0,void 0,(function(){var e,o,i,s,a,u,c;return(0,Q.__generator)(this,(function(l){switch(l.label){case 0:try{for(e=(0,Q.__values)(Object.keys(n)),o=e.next();!o.done;o=e.next())if((i=o.value).toLowerCase()===pr)return[2,n[i]]}catch(e){u={error:e}}finally{try{o&&!o.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(f=r,"function"==typeof ArrayBuffer&&f instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(f))?((s=new t).update(r),a=sr,[4,s.digest()]):[3,3];case 2:return[2,a.apply(void 0,[l.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var f}))}))}function Or(e){var t=e.headers,n=e.query,r=(0,Q.__rest)(e,["headers","query"]);return(0,Q.__assign)((0,Q.__assign)({},r),{headers:(0,Q.__assign)({},t),query:n?jr(n):void 0})}function jr(e){return Object.keys(e).reduce((function(t,n){var r,o=e[n];return(0,Q.__assign)((0,Q.__assign)({},t),((r={})[n]=Array.isArray(o)?(0,Q.__spread)(o):o,r))}),{})}function Tr(e){var t,n;e="function"==typeof e.clone?e.clone():Or(e);try{for(var r=(0,Q.__values)(Object.keys(e.headers)),o=r.next();!o.done;o=r.next()){var i=o.value;dr.indexOf(i.toLowerCase())>-1&&delete e.headers[i]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function Ur(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"==typeof e)return Number(e)?new Date(1e3*Number(e)):new Date(e);return e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var Rr=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,o=e.service,i=e.sha256,s=e.uriEscapePath,a=void 0===s||s;this.service=o,this.sha256=i,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Nr(r),this.credentialProvider=Fr(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),(0,Q.__awaiter)(this,void 0,void 0,(function(){var n,r,o,i,s,a,u,c,l,f,d,h,p,g,y,v,m,b,_,w,S,A,E,I;return(0,Q.__generator)(this,(function(C){switch(C.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,o=t.expiresIn,i=void 0===o?3600:o,s=t.unsignableHeaders,a=t.unhoistableHeaders,u=t.signableHeaders,c=t.signingRegion,l=t.signingService,[4,this.credentialProvider()];case 1:return f=C.sent(),null==c?[3,2]:(h=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:h=C.sent(),C.label=4;case 4:return d=h,p=Lr(r),g=p.longDate,y=p.shortDate,i>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(v=Er(y,d,null!=l?l:this.service),m=function(e,t){var n,r,o;void 0===t&&(t={});var i="function"==typeof e.clone?e.clone():Or(e),s=i.headers,a=i.query,u=void 0===a?{}:a;try{for(var c=(0,Q.__values)(Object.keys(s)),l=c.next();!l.done;l=c.next()){var f=l.value,d=f.toLowerCase();"x-amz-"!==d.substr(0,6)||(null===(o=t.unhoistableHeaders)||void 0===o?void 0:o.has(d))||(u[f]=s[f],delete s[f])}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return(0,Q.__assign)((0,Q.__assign)({},e),{headers:s,query:u})}(Tr(e),{unhoistableHeaders:a}),f.sessionToken&&(m.query[cr]=f.sessionToken),m.query["X-Amz-Algorithm"]=br,m.query["X-Amz-Credential"]=f.accessKeyId+"/"+v,m.query["X-Amz-Date"]=g,m.query["X-Amz-Expires"]=i.toString(10),b=Cr(m,s,u),m.query["X-Amz-SignedHeaders"]=Mr(b),_=m.query,w=ur,S=this.getSignature,A=[g,v,this.getSigningKey(f,d,y,l)],E=this.createCanonicalRequest,I=[m,b],[4,xr(e,this.sha256)]);case 5:return[4,S.apply(this,A.concat([E.apply(this,I.concat([C.sent()]))]))];case 6:return _[w]=C.sent(),[2,m]}}))}))},e.prototype.sign=function(e,t){return(0,Q.__awaiter)(this,void 0,void 0,(function(){return(0,Q.__generator)(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,o=t.signingDate,i=void 0===o?new Date:o,s=t.priorSignature,a=t.signingRegion,u=t.signingService;return(0,Q.__awaiter)(this,void 0,void 0,(function(){var e,t,o,c,l,f,d,h,p,g,y;return(0,Q.__generator)(this,(function(v){switch(v.label){case 0:return null==a?[3,1]:(t=a,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=v.sent(),v.label=3;case 3:return e=t,o=Lr(i),c=o.shortDate,l=o.longDate,f=Er(c,e,null!=u?u:this.service),[4,xr({headers:{},body:r},this.sha256)];case 4:return d=v.sent(),(h=new this.sha256).update(n),g=sr,[4,h.digest()];case 5:return p=g.apply(void 0,[v.sent()]),y=[_r,l,f,s,p,d].join("\n"),[2,this.signString(y,{signingDate:i,signingRegion:e,signingService:u})]}}))}))},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,o=void 0===r?new Date:r,i=n.signingRegion,s=n.signingService;return(0,Q.__awaiter)(this,void 0,void 0,(function(){var t,n,r,a,u,c,l,f;return(0,Q.__generator)(this,(function(d){switch(d.label){case 0:return[4,this.credentialProvider()];case 1:return t=d.sent(),null==i?[3,2]:(r=i,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=d.sent(),d.label=4;case 4:return n=r,a=Lr(o).shortDate,l=(c=this.sha256).bind,[4,this.getSigningKey(t,n,a,s)];case 5:return(u=new(l.apply(c,[void 0,d.sent()]))).update(e),f=sr,[4,u.digest()];case 6:return[2,f.apply(void 0,[d.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,o=void 0===r?new Date:r,i=n.signableHeaders,s=n.unsignableHeaders,a=n.signingRegion,u=n.signingService;return(0,Q.__awaiter)(this,void 0,void 0,(function(){var t,n,r,c,l,f,d,h,p,g,y;return(0,Q.__generator)(this,(function(v){switch(v.label){case 0:return[4,this.credentialProvider()];case 1:return t=v.sent(),null==a?[3,2]:(r=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=v.sent(),v.label=4;case 4:return n=r,c=Tr(e),l=Lr(o),f=l.longDate,d=l.shortDate,h=Er(d,n,null!=u?u:this.service),c.headers[fr]=f,t.sessionToken&&(c.headers[gr]=t.sessionToken),[4,xr(c,this.sha256)];case 5:return p=v.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var o=(0,Q.__values)(Object.keys(t)),i=o.next();!i.done;i=o.next())if(e===i.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1}(pr,c.headers)&&this.applyChecksum&&(c.headers[pr]=p),g=Cr(c,s,i),[4,this.getSignature(f,h,this.getSigningKey(t,n,d,u),this.createCanonicalRequest(c,g,p))];case 6:return y=v.sent(),c.headers[lr]="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+h+", SignedHeaders="+Mr(g)+", Signature="+y,[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=e.query,o=void 0===r?{}:r,i=[],s={},a=function(e){if(e.toLowerCase()===hr)return"continue";i.push(e);var t=o[e];"string"==typeof t?s[e]=Pr(e)+"="+Pr(t):Array.isArray(t)&&(s[e]=t.slice(0).sort().reduce((function(t,n){return t.concat([Pr(e)+"="+Pr(n)])}),[]).join("&"))};try{for(var u=(0,Q.__values)(Object.keys(o).sort()),c=u.next();!c.done;c=u.next())a(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return i.map((function(e){return s[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+r.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return(0,Q.__awaiter)(this,void 0,void 0,(function(){var r,o;return(0,Q.__generator)(this,(function(i){switch(i.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return o=i.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+sr(o)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,r){return(0,Q.__awaiter)(this,void 0,void 0,(function(){var o,i,s,a,u;return(0,Q.__generator)(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return o=c.sent(),a=(s=this.sha256).bind,[4,n];case 2:return(i=new(a.apply(s,[void 0,c.sent()]))).update(o),u=sr,[4,i.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,o){return(0,Q.__awaiter)(void 0,void 0,void 0,(function(){var i,s,a,u,c,l,f,d,h;return(0,Q.__generator)(this,(function(p){switch(p.label){case 0:return[4,Ir(e,t.secretAccessKey,t.accessKeyId)];case 1:if(i=p.sent(),(s=n+":"+r+":"+o+":"+sr(i)+":"+t.sessionToken)in Sr)return[2,Sr[s]];for(Ar.push(s);Ar.length>50;)delete Sr[Ar.shift()];a="AWS4"+t.secretAccessKey,p.label=2;case 2:p.trys.push([2,7,8,9]),u=(0,Q.__values)([n,r,o,wr]),c=u.next(),p.label=3;case 3:return c.done?[3,6]:(l=c.value,[4,Ir(e,a,l)]);case 4:a=p.sent(),p.label=5;case 5:return c=u.next(),[3,3];case 6:return[3,9];case 7:return f=p.sent(),d={error:f},[3,9];case 8:try{c&&!c.done&&(h=u.return)&&h.call(u)}finally{if(d)throw d.error}return[7];case 9:return[2,Sr[s]=a]}}))}))}(this.sha256,e,n,t,r||this.service)},e}(),Lr=function(e){var t=Ur(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},Mr=function(e){return Object.keys(e).sort().join(";")},Nr=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Fr=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function Dr(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}var zr="user-agent",Hr=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Br=function(e){var t=(0,Q.__read)(e,2),n=t[0],r=t[1],o=n.indexOf("/"),i=n.substring(0,o),s=n.substring(o+1);return"api"===i&&(s=s.toLowerCase()),[i,s,r].filter((function(e){return e&&e.length>0})).map((function(e){return null==e?void 0:e.replace(Hr,"_")})).join("/")},qr={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Gr=function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e,t){return function(r){return(0,Q.__awaiter)(void 0,void 0,void 0,(function(){var o,i,s,a,u,c,l,f;return(0,Q.__generator)(this,(function(d){switch(d.label){case 0:return o=r.request,st.isInstance(o)?(i=o.headers,s=(null===(l=null==t?void 0:t.userAgent)||void 0===l?void 0:l.map(Br))||[],[4,n.defaultUserAgentProvider()]):[2,e(r)];case 1:return a=d.sent().map(Br),u=(null===(f=null==n?void 0:n.customUserAgent)||void 0===f?void 0:f.map(Br))||[],i["x-amz-user-agent"]=(0,Q.__spread)(a,s,u).join(" "),c=(0,Q.__spread)(a.filter((function(e){return e.startsWith("aws-sdk-")})),u).join(" "),"browser"!==n.runtime&&c&&(i[zr]=i[zr]?i[zr]+" "+c:c),[2,e((0,Q.__assign)((0,Q.__assign)({},r),{request:o}))]}}))}))}}),qr)}}},Kr=function(e){function t(t){var n,r,o=this,i=function(e){var t,n=this,r=Dr(e.credentials||e.credentialDefaultProvider(e)),o=e.signingEscapePath,i=void 0===o||o,s=e.systemClockOffset,a=void 0===s?e.systemClockOffset||0:s,u=e.sha256;return t=e.signer?Dr(e.signer):function(){return Dr(e.region)().then((function(t){return(0,Q.__awaiter)(n,void 0,void 0,(function(){return(0,Q.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[n.sent()||{},t]]}}))}))})).then((function(t){var n=(0,Q.__read)(t,2),o=n[0],s=n[1],a=o.signingRegion,c=o.signingService;return e.signingRegion=e.signingRegion||a||s,e.signingName=e.signingName||c||e.serviceId,new Rr({credentials:r,region:e.signingRegion,service:e.signingName,sha256:u,uriEscapePath:i})}))},(0,Q.__assign)((0,Q.__assign)({},e),{systemClockOffset:a,signingEscapePath:i,credentials:r,signer:t})}(function(e){var t;return qn(qn({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?Wn(e):function(){return $n(e)},isCustomEndpoint:!!e.endpoint})}(function(e){if(!e.region)throw new Error("Region is missing");return qn(qn({},e),{region:Vn(e.region)})}(J(J({},Bn),t)))),s=function(e){return(0,Q.__assign)((0,Q.__assign)({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}((r=kn((n=i).maxAttempts),(0,Q.__assign)((0,Q.__assign)({},n),{maxAttempts:r,retryStrategy:n.retryStrategy||new Pn(r)})));return(o=e.call(this,s)||this).config=s,o.middlewareStack.use(vn(o.config)),o.middlewareStack.use(Yn(o.config)),o.middlewareStack.use(Xn(o.config)),o.middlewareStack.use(tr(o.config)),o.middlewareStack.use(Gr(o.config)),o}return Y(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Gt),Wr=function(){return(Wr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},$r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Vr=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Qr=new o.k("Credentials"),Zr=new(function(){function e(e){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(e),this._refreshHandlers.google=H.refreshGoogleToken,this._refreshHandlers.facebook=B.refreshFacebookToken}return e.prototype.getModuleName=function(){return"Credentials"},e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(e){if(!e)return this._config||{};this._config=Object.assign({},this._config,e);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=Wr(Wr({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=(new a).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),this._config},e.prototype.get=function(){return Qr.debug("getting credentials"),this._pickupCredentials()},e.prototype._pickupCredentials=function(){return Qr.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?Qr.debug("getting old cred promise"):(Qr.debug("getting new cred promise"),this._gettingCredPromise=g(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){return $r(this,void 0,void 0,(function(){var e,t,n,r,o,i,s;return Vr(this,(function(a){switch(a.label){case 0:if(Qr.debug("checking if credentials exists and not expired"),(e=this._credentials)&&!this._isExpired(e)&&!this._isPastTTL())return Qr.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(e)];if(Qr.debug("need to get a new credential or refresh the existing one"),t=this.Auth,!(n=void 0===t?V.Auth:t)||"function"!=typeof n.currentUserCredentials)return[2,Promise.reject("No Auth module registered in Amplify")];if(this._isExpired(e)||!this._isPastTTL())return[3,6];Qr.debug("ttl has passed but token is not yet expired"),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,n.currentUserPoolUser()];case 2:return r=a.sent(),[4,n.currentSession()];case 3:return o=a.sent(),i=o.refreshToken,[4,new Promise((function(e,t){r.refreshSession(i,(function(n,r){return n?t(n):e(r)}))}))];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),Qr.debug("Error attempting to refreshing the session",s),[3,6];case 6:return[2,n.currentUserCredentials()]}}))}))},e.prototype.refreshFederatedToken=function(e){Qr.debug("Getting federated credentials");var t=e.provider,n=e.user,r=e.token,o=e.identity_id,i=e.expires_at;i=1970===new Date(i).getFullYear()?1e3*i:i;var s=this;return Qr.debug("checking if federated jwt token expired"),i>(new Date).getTime()?(Qr.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:r,user:n,identity_id:o,expires_at:i})):s._refreshHandlers[t]&&"function"==typeof s._refreshHandlers[t]?(Qr.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:s._refreshHandlers[t],provider:t,user:n})):(Qr.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._providerRefreshWithRetry=function(e){var t=this,n=e.refreshHandler,r=e.provider,o=e.user;return O(n,[],1e4).then((function(e){return Qr.debug("refresh federated token sucessfully",e),t._setCredentialsFromFederation({provider:r,token:e.token,user:o,identity_id:e.identity_id,expires_at:e.expires_at})})).catch((function(e){return"string"==typeof e&&0===e.toLowerCase().lastIndexOf("network error",e.length)||t.clear(),Qr.debug("refresh federated token failed",e),Promise.reject("refreshing federation token failed: "+e)}))},e.prototype._isExpired=function(e){if(!e)return Qr.debug("no credentials for expiration check"),!0;Qr.debug("are these credentials expired?",e);var t=Date.now();return e.expiration.getTime()<=t},e.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},e.prototype._setCredentialsForGuest=function(){return $r(this,void 0,void 0,(function(){var e,t,n,r,o,i,s,a=this;return Vr(this,(function(u){switch(u.label){case 0:if(Qr.debug("setting credentials for guest"),e=this._config,t=e.identityPoolId,n=e.region,e.mandatorySignIn)return[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")];if(!t)return Qr.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")];if(!n)return Qr.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")];r=void 0,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this._storageSync];case 2:return u.sent(),r=this._storage.getItem("CognitoIdentityId-"+t),this._identityId=r,[3,4];case 3:return o=u.sent(),Qr.debug("Failed to get the cached identityId",o),[3,4];case 4:return i=new Kr({region:n,customUserAgent:K()}),s=void 0,s=r?Zt({identityId:r,client:i})():function(){return $r(a,void 0,void 0,(function(){var e;return Vr(this,(function(n){switch(n.label){case 0:return[4,i.send(new Yt({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,Zt({client:i,identityId:e})()]}}))}))}().catch((function(e){return $r(a,void 0,void 0,(function(){return Vr(this,(function(t){throw e}))}))})),[2,this._loadCredentials(s,"guest",!1,null).then((function(e){return e})).catch((function(e){return $r(a,void 0,void 0,(function(){var n=this;return Vr(this,(function(o){return"ResourceNotFoundException"===e.name&&e.message==="Identity '"+r+"' not found."?(Qr.debug("Failed to load guest credentials"),this._storage.removeItem("CognitoIdentityId-"+t),s=function(){return $r(n,void 0,void 0,(function(){var e;return Vr(this,(function(n){switch(n.label){case 0:return[4,i.send(new Yt({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,Zt({client:i,identityId:e})()]}}))}))}().catch((function(e){return $r(n,void 0,void 0,(function(){return Vr(this,(function(t){throw e}))}))})),[2,this._loadCredentials(s,"guest",!1,null)]):[2,e]}))}))}))]}}))}))},e.prototype._setCredentialsFromFederation=function(e){var t=e.provider,n=e.token,r=e.identity_id,o={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[t]||t;if(!o)return Promise.reject("You must specify a federated provider");var i={};i[o]=n;var s=this._config,a=s.identityPoolId,u=s.region;if(!a)return Qr.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!u)return Qr.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var c=new Kr({region:u,customUserAgent:K()}),l=void 0;r?l=Zt({identityId:r,logins:i,client:c})():l=tn({logins:i,identityPoolId:a,client:c})();return this._loadCredentials(l,"federated",!0,e)},e.prototype._setCredentialsFromSession=function(e){var t=this;Qr.debug("set credentials from session");var n=e.getIdToken().getJwtToken(),r=this._config,o=r.region,i=r.userPoolId,s=r.identityPoolId;if(!s)return Qr.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!o)return Qr.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var a={};a["cognito-idp."+o+".amazonaws.com/"+i]=n;var u=new Kr({region:o,customUserAgent:K()}),c=$r(t,void 0,void 0,(function(){var e;return Vr(this,(function(t){switch(t.label){case 0:return[4,u.send(new Yt({IdentityPoolId:s,Logins:a}))];case 1:return e=t.sent().IdentityId,this._identityId=e,[2,Zt({client:u,logins:a,identityId:e})()]}}))})).catch((function(e){return $r(t,void 0,void 0,(function(){return Vr(this,(function(t){throw e}))}))}));return this._loadCredentials(c,"userPool",!0,null)},e.prototype._loadCredentials=function(e,t,n,r){var o=this,i=this,s=this._config.identityPoolId;return new Promise((function(a,u){e.then((function(e){return $r(o,void 0,void 0,(function(){var o,u,c,l,f,d;return Vr(this,(function(h){switch(h.label){case 0:if(Qr.debug("Load credentials successfully",e),this._identityId&&!e.identityId&&(e.identityId=this._identityId),i._credentials=e,i._credentials.authenticated=n,i._credentials_source=t,i._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===t){o=Object.assign({id:this._credentials.identityId},r.user),u=r.provider,c=r.token,l=r.expires_at,f=r.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:u,token:c,user:o,expires_at:l,identity_id:f}))}catch(e){Qr.debug("Failed to put federated info into auth storage",e)}}if("guest"!==t)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this._storageSync];case 2:return h.sent(),this._storage.setItem("CognitoIdentityId-"+s,e.identityId),[3,4];case 3:return d=h.sent(),Qr.debug("Failed to cache identityId",d),[3,4];case 4:return a(i._credentials),[2]}}))}))})).catch((function(t){if(t)return Qr.debug("Failed to load credentials",e),Qr.debug("Error loading credentials",t),void u(t)}))}))},e.prototype.set=function(e,t){return"session"===t?this._setCredentialsFromSession(e):"federation"===t?this._setCredentialsFromFederation(e):"guest"===t?this._setCredentialsForGuest():(Qr.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return $r(this,void 0,void 0,(function(){return Vr(this,(function(e){return this._credentials=null,this._credentials_source=null,Qr.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]}))}))},e.prototype.shear=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e}())(null);V.register(Zr);var Yr=new o.k("Parser"),Jr=function(e){var t,n={};if(e.aws_mobile_analytics_app_id){var r={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}};n.Analytics=r}return(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(n.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in}),t=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},n.Analytics=Object.assign({},n.Analytics,e.Analytics),n.Auth=Object.assign({},n.Auth,e.Auth),n.Storage=Object.assign({},t),Yr.debug("parse config",e,"to amplifyconfig",n),n},Xr=function(){function e(){}return e.parseMobilehubConfig=Jr,e}();var eo=n(9585),to=v().isBrowser,no=function(){function e(e){void 0===e&&(e={}),this.cookies=new eo.Z,this.store=to?window.localStorage:Object.create(null),this.cookies=e.req?new eo.Z(e.req.headers.cookie):new eo.Z,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var e=this;Array.from(new Array(this.length)).map((function(t,n){return e.key(n)})).forEach((function(t){return e.removeItem(t)}))},e.prototype.getItem=function(e){return this.getLocalItem(e)},e.prototype.getLocalItem=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)?this.store[e]:null},e.prototype.getUniversalItem=function(e){return this.cookies.get(e)},e.prototype.key=function(e){return Object.keys(this.store)[e]},e.prototype.removeItem=function(e){this.removeLocalItem(e),this.removeUniversalItem(e)},e.prototype.removeLocalItem=function(e){delete this.store[e]},e.prototype.removeUniversalItem=function(e){this.cookies.remove(e,{path:"/"})},e.prototype.setItem=function(e,t){switch(this.setLocalItem(e,t),e.split(".").pop()){case"LastAuthUser":case"accessToken":case"idToken":this.setUniversalItem(e,t)}},e.prototype.setLocalItem=function(e,t){this.store[e]=t},e.prototype.setUniversalItem=function(e,t){this.cookies.set(e,t,{path:"/",sameSite:!0,secure:"localhost"!==window.location.hostname})},e}();var ro=n(7117),oo=n(2043),io=n(8575),so=function(e){var t=window.open(e,"_self");return t?Promise.resolve(t):Promise.reject()},ao=n(2153),uo=n.n(ao),co=n(8269),lo=n.n(co),fo=function(){return(fo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ho=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},po=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},go=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},yo="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",vo=function(e,t,n){ro.Xb.dispatch("auth",{event:e,data:t,message:n},"Auth",yo)},mo=new o.k("OAuth");const bo=function(){function e(e){var t=e.config,n=e.cognitoClientId,r=e.scopes,o=void 0===r?[]:r;if(this._urlOpener=t.urlOpener||so,this._config=t,this._cognitoClientId=n,!this.isValidScopes(o))throw Error("scopes must be a String Array");this._scopes=o}return e.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))},e.prototype.oauthSignIn=function(e,t,n,o,i,s){void 0===e&&(e="code"),void 0===i&&(i=r.JG.Cognito);var a=this._generateState(32),u=s?a+"-"+s.split("").map((function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")})).join(""):a;!function(e){window.sessionStorage.setItem("oauth_state",e)}(u);var c,l=this._generateRandom(128);c=l,window.sessionStorage.setItem("ouath_pkce_key",c);var f=this._generateChallenge(l),d=this._scopes.join(" "),h="https://"+t+"/oauth2/authorize?"+Object.entries(fo(fo({redirect_uri:n,response_type:e,client_id:o,identity_provider:i,scope:d,state:u},"code"===e?{code_challenge:f}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map((function(e){var t=go(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&");mo.debug("Redirecting to "+h),this._urlOpener(h,n)},e.prototype._handleCodeFlow=function(e){return ho(this,void 0,void 0,(function(){var t,n,o,i,s,a,u,c,l,f,d,h,p,g;return po(this,(function(y){switch(y.label){case 0:return t=((0,io.Qc)(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=go(t,2),o=r[0],i=r[1];return fo(fo({},e),((n={})[o]=i,n))}),{code:void 0}).code,n=(0,io.Qc)(e).pathname||"/",o=(0,io.Qc)(this._config.redirectSignIn).pathname||"/",t&&n===o?(i="https://"+this._config.domain+"/oauth2/token",vo("codeFlow",{},"Retrieving tokens from "+i),s=(0,r.ic)(this._config)?this._cognitoClientId:this._config.clientID,a=(0,r.ic)(this._config)?this._config.redirectSignIn:this._config.redirectUri,v=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),c=fo({grant_type:"authorization_code",code:t,client_id:s,redirect_uri:a},(u=v)?{code_verifier:u}:{}),mo.debug("Calling token endpoint: "+i+" with",c),l=Object.entries(c).map((function(e){var t=go(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&"),[4,fetch(i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l})]):[2];case 1:return[4,y.sent().json()];case 2:if(f=y.sent(),d=f.access_token,h=f.refresh_token,p=f.id_token,g=f.error)throw new Error(g);return[2,{accessToken:d,refreshToken:h,idToken:p}]}var v}))}))},e.prototype._handleImplicitFlow=function(e){return ho(this,void 0,void 0,(function(){var t,n,r;return po(this,(function(o){return t=((0,io.Qc)(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=go(t,2),o=r[0],i=r[1];return fo(fo({},e),((n={})[o]=i,n))}),{id_token:void 0,access_token:void 0}),n=t.id_token,r=t.access_token,vo("implicitFlow",{},"Got tokens from "+e),mo.debug("Retrieving implicit tokens from "+e+" with"),[2,{accessToken:r,idToken:n,refreshToken:null}]}))}))},e.prototype.handleAuthResponse=function(e){return ho(this,void 0,void 0,(function(){var t,n,r,o,i,s,a;return po(this,(function(u){switch(u.label){case 0:if(u.trys.push([0,5,,6]),t=e?fo(fo({},((0,io.Qc)(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=go(t,2),r=n[0],o=n[1];return e[r]=o,e}),{})),((0,io.Qc)(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=go(t,2),r=n[0],o=n[1];return e[r]=o,e}),{})):{},n=t.error,r=t.error_description,n)throw new Error(r);return o=this._validateState(t),mo.debug("Starting "+this._config.responseType+" flow with "+e),"code"!==this._config.responseType?[3,2]:(i=[{}],[4,this._handleCodeFlow(e)]);case 1:return[2,fo.apply(void 0,[fo.apply(void 0,i.concat([u.sent()])),{state:o}])];case 2:return s=[{}],[4,this._handleImplicitFlow(e)];case 3:return[2,fo.apply(void 0,[fo.apply(void 0,s.concat([u.sent()])),{state:o}])];case 4:return[3,6];case 5:throw a=u.sent(),mo.error("Error handling auth response.",a),a;case 6:return[2]}}))}))},e.prototype._validateState=function(e){if(e){var t,n=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),r=e.state;if(n&&n!==r)throw new Error("Invalid state in OAuth flow");return r}},e.prototype.signOut=function(){return ho(this,void 0,void 0,(function(){var e,t,n;return po(this,(function(o){return e="https://"+this._config.domain+"/logout?",t=(0,r.ic)(this._config)?this._cognitoClientId:this._config.oauth.clientID,n=(0,r.ic)(this._config)?this._config.redirectSignOut:this._config.returnTo,e+=Object.entries({client_id:t,logout_uri:encodeURIComponent(n)}).map((function(e){var t=go(e,2);return t[0]+"="+t[1]})).join("&"),vo("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+e),mo.debug("Signing out from "+e),[2,this._urlOpener(e)]}))}))},e.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";n>0;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},e.prototype._generateChallenge=function(e){return this._base64URL(uo()(e))},e.prototype._base64URL=function(e){return e.toString(lo()).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},e.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var o=e[r]%t.length;n.push(t[o])}return n.join("")},e}();var _o;!function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty"}(_o||(_o={}));var wo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),So=new o.k("AuthError"),Ao=function(e){function t(n){var r=this,o=Io[n],i=o.message,s=o.log;return(r=e.call(this,i)||this).constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="AuthError",r.log=s||i,So.error(r.log),r}return wo(t,e),t}(Error),Eo=function(e){function t(n){var r=e.call(this,n)||this;return r.constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="NoUserPoolError",r}return wo(t,e),t}(Ao),Io={noConfig:{message:_o.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        "},missingAuthConfig:{message:_o.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run `amplify push` after adding auth via `amplify add auth`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        "},emptyUsername:{message:_o.EMPTY_USERNAME},invalidUsername:{message:_o.INVALID_USERNAME},emptyPassword:{message:_o.EMPTY_PASSWORD},emptyCode:{message:_o.EMPTY_CODE},signUpError:{message:_o.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:_o.NO_MFA},invalidMFA:{message:_o.INVALID_MFA},emptyChallengeResponse:{message:_o.EMPTY_CHALLENGE},noUserSession:{message:_o.NO_USER_SESSION},default:{message:_o.DEFAULT_MSG}},Co=function(){return(Co=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Po=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ko=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},xo=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},Oo=new o.k("AuthClass"),jo="aws.cognito.signin.user.admin",To="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Uo=function(e,t,n){ro.Xb.dispatch("auth",{event:e,data:t,message:n},"Auth",To)},Ro=new(function(){function e(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=Zr,this.wrapRefreshSessionCallback=function(e){return function(t,n){return n?Uo("tokenRefresh",void 0,"New token retrieved"):Uo("tokenRefresh_failure",t,"Failed to retrieve new token"),e(t,n)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),ro.Xb.listen("auth",(function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}}))}return e.prototype.getModuleName=function(){return"Auth"},e.prototype.configure=function(e){var t=this;if(!e)return this._config||{};Oo.debug("configure Auth");var n=Object.assign({},this._config,Xr.parseMobilehubConfig(e).Auth,e);this._config=n;var o=this._config,i=o.userPoolId,s=o.userPoolWebClientId,u=o.cookieStorage,c=o.oauth,l=o.region,f=o.identityPoolId,d=o.mandatorySignIn,h=o.refreshHandlers,p=o.identityPoolRegion,g=o.clientMetadata,y=o.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw Oo.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=u?new oo.eR(u):e.ssr?new no:(new a).getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i){var v={UserPoolId:i,ClientId:s,endpoint:y};v.Storage=this._storage,this.userPool=new oo.AM(v,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:d,region:p||l,userPoolId:i,identityPoolId:f,refreshHandlers:h,storage:this._storage});var m=c?(0,r.ic)(this._config.oauth)?c:c.awsCognito:void 0;if(m){var b=Object.assign({cognitoClientId:s,UserPoolId:i,domain:m.domain,scopes:m.scope,redirectSignIn:m.redirectSignIn,redirectSignOut:m.redirectSignOut,responseType:m.responseType,Storage:this._storage,urlOpener:m.urlOpener,clientMetadata:g},m.options);this._oAuthHandler=new bo({scopes:b.scopes,config:b,cognitoClientId:b.cognitoClientId});var _={};!function(e){if(w.browserOrNode().isBrowser&&window.location)e({url:window.location.href});else if(!w.browserOrNode().isNode)throw new Error("Not supported")}((function(e){var n=e.url;_[n]||(_[n]=!0,t._handleAuthResponse(n))}))}return Uo("configured",null,"The Auth category has been configured successfully"),this._config},e.prototype.signUp=function(e){for(var t=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(!this.userPool)return this.rejectNoUserPool();var i,s=null,a=null,u=[],c=null;if(e&&"string"==typeof e){s=e,a=n?n[0]:null;var l=n?n[1]:null,f=n?n[2]:null;l&&u.push(new oo.KC({Name:"email",Value:l})),f&&u.push(new oo.KC({Name:"phone_number",Value:f}))}else{if(!e||"object"!=typeof e)return this.rejectAuthError(r.Qg.SignUpError);s=e.username,a=e.password,e&&e.clientMetadata?i=e.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata);var d=e.attributes;d&&Object.keys(d).map((function(e){u.push(new oo.KC({Name:e,Value:d[e]}))}));var h=e.validationData;h&&(c=[],Object.keys(h).map((function(e){c.push(new oo.KC({Name:e,Value:h[e]}))})))}return s?a?(Oo.debug("signUp attrs:",u),Oo.debug("signUp validation data:",c),new Promise((function(e,n){t.userPool.signUp(s,a,u,c,(function(t,r){t?(Uo("signUp_failure",t,s+" failed to signup"),n(t)):(Uo("signUp",r,s+" has signed up successfully"),e(r))}),i)}))):this.rejectAuthError(r.Qg.EmptyPassword):this.rejectAuthError(r.Qg.EmptyUsername)},e.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(r.Qg.EmptyUsername);if(!t)return this.rejectAuthError(r.Qg.EmptyCode);var o,i=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?o=n.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata),new Promise((function(e,n){i.confirmRegistration(t,s,(function(t,r){t?n(t):e(r)}),o)}))},e.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(r.Qg.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(e,r){n.resendConfirmationCode((function(t,n){t?r(t):e(n)}),t)}))},e.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var o=null,i=null,s={};if("string"==typeof e)o=e,i=t;else{if(!(0,r.lg)(e))return this.rejectAuthError(r.Qg.InvalidUsername);void 0!==t&&Oo.warn("The password should be defined under the first parameter object!"),o=e.username,i=e.password,s=e.validationData}if(!o)return this.rejectAuthError(r.Qg.EmptyUsername);var a=new oo.sD({Username:o,Password:i,ValidationData:s,ClientMetadata:n});return i?this.signInWithPassword(a):this.signInWithoutPassword(a)},e.prototype.authCallbacks=function(e,t,n){var r=this,o=this;return{onSuccess:function(i){return Po(r,void 0,void 0,(function(){var r,s,a,u;return ko(this,(function(c){switch(c.label){case 0:Oo.debug(i),delete e.challengeName,delete e.challengeParam,c.label=1;case 1:return c.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return c.sent(),[4,this.Credentials.set(i,"session")];case 3:return r=c.sent(),Oo.debug("succeed to get cognito credentials",r),[3,9];case 4:return s=c.sent(),Oo.debug("cannot get cognito credentials",s),[3,9];case 5:return c.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return a=c.sent(),o.user=a,Uo("signIn",a,"A user "+e.getUsername()+" has been signed in"),t(a),[3,8];case 7:return u=c.sent(),Oo.error("Failed to get the signed in user",u),n(u),[3,8];case 8:return[7];case 9:return[2]}}))}))},onFailure:function(t){Oo.debug("signIn failure",t),Uo("signIn_failure",t,e.getUsername()+" failed to signin"),n(t)},customChallenge:function(n){Oo.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=n,t(e)},mfaRequired:function(n,r){Oo.debug("signIn MFA required"),e.challengeName=n,e.challengeParam=r,t(e)},mfaSetup:function(n,r){Oo.debug("signIn mfa setup",n),e.challengeName=n,e.challengeParam=r,t(e)},newPasswordRequired:function(n,r){Oo.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:n,requiredAttributes:r},t(e)},totpRequired:function(n,r){Oo.debug("signIn totpRequired"),e.challengeName=n,e.challengeParam=r,t(e)},selectMFAType:function(n,r){Oo.debug("signIn selectMFAType",n),e.challengeName=n,e.challengeParam=r,t(e)}}},e.prototype.signInWithPassword=function(e){var t=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var n=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise((function(r,o){n.authenticateUser(e,t.authCallbacks(n,(function(e){t.pendingSignIn=null,r(e)}),(function(e){t.pendingSignIn=null,o(e)})))})),this.pendingSignIn},e.prototype.signInWithoutPassword=function(e){var t=this,n=this.createCognitoUser(e.getUsername());return n.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise((function(r,o){n.initiateAuth(e,t.authCallbacks(n,r,o))}))},e.prototype.getMFAOptions=function(e){return new Promise((function(t,n){e.getMFAOptions((function(e,r){if(e)return Oo.debug("get MFA Options failed",e),void n(e);Oo.debug("get MFA options success",r),t(r)}))}))},e.prototype.getPreferredMFA=function(e,t){var n=this,r=this;return new Promise((function(o,i){var s=n._config.clientMetadata,a=!!t&&t.bypassCache;e.getUserData((function(e,t){if(e)return Oo.debug("getting preferred mfa failed",e),void i(e);var n=r._getMfaTypeFromUserData(t);return n?void o(n):void i("invalid MFA Type")}),{bypassCache:a,clientMetadata:s})}))},e.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;if(n)t=n;else{var r=e.UserMFASettingList;if(r)0===r.length?t="NOMFA":Oo.debug("invalid case for getPreferredMFA",e);else t=e.MFAOptions?"SMS_MFA":"NOMFA"}return t},e.prototype._getUserData=function(e,t){return new Promise((function(n,r){e.getUserData((function(e,t){return e?(Oo.debug("getting user data failed",e),void r(e)):void n(t)}),t)}))},e.prototype.setPreferredMFA=function(e,t){return Po(this,void 0,void 0,(function(){var n,o,i,s,a,u;return ko(this,(function(c){switch(c.label){case 0:return n=this._config.clientMetadata,[4,this._getUserData(e,{bypassCache:!0,clientMetadata:n})];case 1:switch(o=c.sent(),i=null,s=null,t){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return s={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return a=o.UserMFASettingList,[4,this._getMfaTypeFromUserData(o)];case 5:if("NOMFA"===(u=c.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===u)i={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==u)return[2,this.rejectAuthError(r.Qg.InvalidMFA)];s={PreferredMfa:!1,Enabled:!1}}return a&&0!==a.length&&a.forEach((function(e){"SMS_MFA"===e?i={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(s={PreferredMfa:!1,Enabled:!1})})),[3,7];case 6:return Oo.debug("no validmfa method provided"),[2,this.rejectAuthError(r.Qg.NoMFA)];case 7:return this,[2,new Promise((function(t,r){e.setUserMfaPreference(i,s,(function(o,i){if(o)return Oo.debug("Set user mfa preference error",o),r(o);Oo.debug("Set user mfa success",i),Oo.debug("Caching the latest user data into local"),e.getUserData((function(e,n){return e?(Oo.debug("getting user data failed",e),r(e)):t(i)}),{bypassCache:!0,clientMetadata:n})}))}))]}}))}))},e.prototype.disableSMS=function(e){return new Promise((function(t,n){e.disableMFA((function(e,r){if(e)return Oo.debug("disable mfa failed",e),void n(e);Oo.debug("disable mfa succeed",r),t(r)}))}))},e.prototype.enableSMS=function(e){return new Promise((function(t,n){e.enableMFA((function(e,r){if(e)return Oo.debug("enable mfa failed",e),void n(e);Oo.debug("enable mfa succeed",r),t(r)}))}))},e.prototype.setupTOTP=function(e){return new Promise((function(t,n){e.associateSoftwareToken({onFailure:function(e){Oo.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){Oo.debug("associateSoftwareToken sucess",e),t(e)}})}))},e.prototype.verifyTotpToken=function(e,t){return Oo.debug("verification totp token",e,t),new Promise((function(n,r){e.verifySoftwareToken(t,"My TOTP device",{onFailure:function(e){Oo.debug("verifyTotpToken failed",e),r(e)},onSuccess:function(t){Uo("signIn",e,"A user "+e.getUsername()+" has been signed in"),Oo.debug("verifyTotpToken success",t),n(t)}})}))},e.prototype.confirmSignIn=function(e,t,n,o){var i=this;if(void 0===o&&(o=this._config.clientMetadata),!t)return this.rejectAuthError(r.Qg.EmptyCode);var s=this;return new Promise((function(r,a){e.sendMFACode(t,{onSuccess:function(t){return Po(i,void 0,void 0,(function(){var n,o;return ko(this,(function(i){switch(i.label){case 0:Oo.debug(t),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return i.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=i.sent(),Oo.debug("succeed to get cognito credentials",n),[3,6];case 4:return o=i.sent(),Oo.debug("cannot get cognito credentials",o),[3,6];case 5:return s.user=e,Uo("signIn",e,"A user "+e.getUsername()+" has been signed in"),r(e),[7];case 6:return[2]}}))}))},onFailure:function(e){Oo.debug("confirm signIn failure",e),a(e)}},n,o)}))},e.prototype.completeNewPassword=function(e,t,n,o){var i=this;if(void 0===n&&(n={}),void 0===o&&(o=this._config.clientMetadata),!t)return this.rejectAuthError(r.Qg.EmptyPassword);var s=this;return new Promise((function(r,a){e.completeNewPasswordChallenge(t,n,{onSuccess:function(t){return Po(i,void 0,void 0,(function(){var n,o;return ko(this,(function(i){switch(i.label){case 0:Oo.debug(t),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return i.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=i.sent(),Oo.debug("succeed to get cognito credentials",n),[3,6];case 4:return o=i.sent(),Oo.debug("cannot get cognito credentials",o),[3,6];case 5:return s.user=e,Uo("signIn",e,"A user "+e.getUsername()+" has been signed in"),r(e),[7];case 6:return[2]}}))}))},onFailure:function(e){Oo.debug("completeNewPassword failure",e),Uo("completeNewPassword_failure",e,i.user+" failed to complete the new password flow"),a(e)},mfaRequired:function(t,n){Oo.debug("signIn MFA required"),e.challengeName=t,e.challengeParam=n,r(e)},mfaSetup:function(t,n){Oo.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,r(e)},totpRequired:function(t,n){Oo.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,r(e)}},o)}))},e.prototype.sendCustomChallengeAnswer=function(e,t,n){var o=this;if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!t)return this.rejectAuthError(r.Qg.EmptyChallengeResponse);return new Promise((function(r,i){e.sendCustomChallengeAnswer(t,o.authCallbacks(e,r,i),n)}))},e.prototype.updateUserAttributes=function(e,t,n){void 0===n&&(n=this._config.clientMetadata);var r=[],o=this;return new Promise((function(i,s){o.userSession(e).then((function(o){for(var a in t)if("sub"!==a&&a.indexOf("_verified")<0){var u={Name:a,Value:t[a]};r.push(u)}e.updateAttributes(r,(function(e,t){return e?s(e):i(t)}),n)}))}))},e.prototype.userAttributes=function(e){var t=this;return new Promise((function(n,r){t.userSession(e).then((function(t){e.getUserAttributes((function(e,t){e?r(e):n(t)}))}))}))},e.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then((function(e){var n=t.attributesToObject(e),r={},o={};return n.email&&(n.email_verified?o.email=n.email:r.email=n.email),n.phone_number&&(n.phone_number_verified?o.phone_number=n.phone_number:r.phone_number=n.phone_number),{verified:o,unverified:r}}))},e.prototype.currentUserPoolUser=function(e){var t=this;return this.userPool?new Promise((function(n,r){t._storageSync.then((function(){return Po(t,void 0,void 0,(function(){var t,o,i=this;return ko(this,(function(s){switch(s.label){case 0:return this.isOAuthInProgress()?(Oo.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise((function(e){var t=setTimeout((function(){Oo.debug("OAuth signIn in progress timeout"),ro.Xb.remove("auth",n),e()}),1e4);function n(r){var o=r.payload.event;"cognitoHostedUI"!==o&&"cognitoHostedUI_failure"!==o||(Oo.debug("OAuth signIn resolved: "+o),clearTimeout(t),ro.Xb.remove("auth",n),e())}ro.Xb.listen("auth",n)}))]):[3,2];case 1:s.sent(),s.label=2;case 2:return(t=this.userPool.getCurrentUser())?(o=this._config.clientMetadata,t.getSession((function(o,s){return Po(i,void 0,void 0,(function(){var i,a,u,c=this;return ko(this,(function(l){switch(l.label){case 0:return o?(Oo.debug("Failed to get the user session",o),r(o),[2]):(i=!!e&&e.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:l.sent(),l.label=2;case 2:return a=this._config.clientMetadata,u=s.getAccessToken().decodePayload().scope,(void 0===u?"":u).split(" ").includes(jo)?(t.getUserData((function(e,o){if(e)return Oo.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?r(e):n(t));for(var i=o.PreferredMfaSetting||"NOMFA",s=[],a=0;a<o.UserAttributes.length;a++){var u={Name:o.UserAttributes[a].Name,Value:o.UserAttributes[a].Value},l=new oo.KC(u);s.push(l)}var f=c.attributesToObject(s);return Object.assign(t,{attributes:f,preferredMFA:i}),n(t)}),{bypassCache:i,clientMetadata:a}),[2]):(Oo.debug("Unable to get the user data because the "+jo+" is not in the scopes of the access token"),[2,n(t)])}}))}))}),{clientMetadata:o}),[2]):(Oo.debug("Failed to get user from user pool"),r("No current user"),[2])}}))}))})).catch((function(e){return Oo.debug("Failed to sync cache info into memory",e),r(e)}))})):this.rejectNoUserPool()},e.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},e.prototype.currentAuthenticatedUser=function(e){return Po(this,void 0,void 0,(function(){var t,n,r,o,i;return ko(this,(function(s){switch(s.label){case 0:Oo.debug("getting current authenticated user"),t=null,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._storageSync];case 2:return s.sent(),[3,4];case 3:throw n=s.sent(),Oo.debug("Failed to sync cache info into memory",n),n;case 4:try{(r=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=Co(Co({},r.user),{token:r.token}))}catch(e){Oo.debug("cannot load federated user from auth storage")}return t?(this.user=t,Oo.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Oo.debug("get current authenticated userpool user"),o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,this.currentUserPoolUser(e)];case 7:return o=s.sent(),[3,9];case 8:return"No userPool"===(i=s.sent())&&Oo.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Oo.debug("The user is not authenticated by the error",i),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=o,[2,this.user]}}))}))},e.prototype.currentSession=function(){var e=this;return Oo.debug("Getting current session"),this.userPool?new Promise((function(t,n){e.currentUserPoolUser().then((function(r){e.userSession(r).then((function(e){t(e)})).catch((function(e){Oo.debug("Failed to get the current session",e),n(e)}))})).catch((function(e){Oo.debug("Failed to get the current user",e),n(e)}))})):Promise.reject()},e.prototype.userSession=function(e){if(!e)return Oo.debug("the user is null"),this.rejectAuthError(r.Qg.NoUserSession);var t=this._config.clientMetadata;return new Promise((function(n,r){Oo.debug("Getting the session from this user:",e),e.getSession((function(t,o){return t?(Oo.debug("Failed to get the session from user",e),void r(t)):(Oo.debug("Succeed to get the user session",o),void n(o))}),{clientMetadata:t})}))},e.prototype.currentUserCredentials=function(){return Po(this,void 0,void 0,(function(){var e,t,n=this;return ko(this,(function(r){switch(r.label){case 0:Oo.debug("Getting current user credentials"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[3,4];case 3:throw e=r.sent(),Oo.debug("Failed to sync cache info into memory",e),e;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){Oo.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then((function(e){return Oo.debug("getting session success",e),n.Credentials.set(e,"session")})).catch((function(e){return Oo.debug("getting session failed",e),n.Credentials.set(null,"guest")}))]}}))}))},e.prototype.currentCredentials=function(){return Oo.debug("getting current credentials"),this.Credentials.get()},e.prototype.verifyUserAttribute=function(e,t,n){return void 0===n&&(n=this._config.clientMetadata),new Promise((function(r,o){e.getAttributeVerificationCode(t,{onSuccess:function(){return r()},onFailure:function(e){return o(e)}},n)}))},e.prototype.verifyUserAttributeSubmit=function(e,t,n){return n?new Promise((function(r,o){e.verifyAttribute(t,n,{onSuccess:function(e){r(e)},onFailure:function(e){o(e)}})})):this.rejectAuthError(r.Qg.EmptyCode)},e.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then((function(n){return t.verifyUserAttribute(n,e)}))},e.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var n=this;return n.currentUserPoolUser().then((function(r){return n.verifyUserAttributeSubmit(r,e,t)}))},e.prototype.cognitoIdentitySignOut=function(e,t){return Po(this,void 0,void 0,(function(){var n,r,o=this;return ko(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._storageSync];case 1:return i.sent(),[3,3];case 2:throw n=i.sent(),Oo.debug("Failed to sync cache info into memory",n),n;case 3:return r=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise((function(n,i){if(e&&e.global){Oo.debug("user global sign out",t);var s=o._config.clientMetadata;t.getSession((function(e,s){if(e)return Oo.debug("failed to get the user session",e),i(e);t.globalSignOut({onSuccess:function(e){if(Oo.debug("global sign out success"),!r)return n();o.oAuthSignOutRedirect(n,i)},onFailure:function(e){return Oo.debug("global sign out failed",e),i(e)}})}),{clientMetadata:s})}else{if(Oo.debug("user sign out",t),t.signOut(),!r)return n();o.oAuthSignOutRedirect(n,i)}}))]}}))}))},e.prototype.oAuthSignOutRedirect=function(e,t){w.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},e.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},e.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout((function(){return e("Signout timeout fail")}),3e3)},e.prototype.signOut=function(e){return Po(this,void 0,void 0,(function(){var t;return ko(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return n.sent(),[3,3];case 2:return n.sent(),Oo.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(e,t)]:[3,5]:[3,7];case 4:return n.sent(),[3,6];case 5:Oo.debug("no current Cognito user"),n.label=6;case 6:return[3,8];case 7:Oo.debug("no Congito User pool"),n.label=8;case 8:return Uo("signOut",this.user,"A user has been signed out"),this.user=null,[2]}}))}))},e.prototype.cleanCachedItems=function(){return Po(this,void 0,void 0,(function(){return ko(this,(function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}}))}))},e.prototype.changePassword=function(e,t,n,r){var o=this;return void 0===r&&(r=this._config.clientMetadata),new Promise((function(i,s){o.userSession(e).then((function(o){e.changePassword(t,n,(function(e,t){return e?(Oo.debug("change password failure",e),s(e)):i(t)}),r)}))}))},e.prototype.forgotPassword=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(r.Qg.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(r,o){n.forgotPassword({onSuccess:function(){r()},onFailure:function(t){Oo.debug("forgot password failure",t),Uo("forgotPassword_failure",t,e+" forgotPassword failed"),o(t)},inputVerificationCode:function(t){Uo("forgotPassword",n,e+" has initiated forgot password flow"),r(t)}},t)}))},e.prototype.forgotPasswordSubmit=function(e,t,n,o){if(void 0===o&&(o=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(r.Qg.EmptyUsername);if(!t)return this.rejectAuthError(r.Qg.EmptyCode);if(!n)return this.rejectAuthError(r.Qg.EmptyPassword);var i=this.createCognitoUser(e);return new Promise((function(r,s){i.confirmPassword(t,n,{onSuccess:function(){Uo("forgotPasswordSubmit",i,e+" forgotPasswordSubmit successful"),r()},onFailure:function(t){Uo("forgotPasswordSubmit_failure",t,e+" forgotPasswordSubmit failed"),s(t)}},o)}))},e.prototype.currentUserInfo=function(){return Po(this,void 0,void 0,(function(){var e,t,n,r,o,i,s;return ko(this,(function(a){switch(a.label){case 0:return(e=this.Credentials.getCredSource())&&"aws"!==e&&"userPool"!==e?[3,9]:[4,this.currentUserPoolUser().catch((function(e){return Oo.debug(e)}))];case 1:if(!(s=a.sent()))return[2,null];a.label=2;case 2:return a.trys.push([2,8,,9]),[4,this.userAttributes(s)];case 3:t=a.sent(),n=this.attributesToObject(t),r=null,a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return r=a.sent(),[3,7];case 6:return o=a.sent(),Oo.debug("Failed to retrieve credentials while getting current user info",o),[3,7];case 7:return[2,{id:r?r.identityId:void 0,username:s.getUsername(),attributes:n}];case 8:return i=a.sent(),Oo.debug("currentUserInfo error",i),[2,{}];case 9:return"federated"===e?[2,(s=this.user)||{}]:[2]}}))}))},e.prototype.federatedSignIn=function(e,t,n){return Po(this,void 0,void 0,(function(){var o,i,s,a,u,c,l,f,d,h,p;return ko(this,(function(g){switch(g.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===e&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return(0,r.SU)(e)||(0,r.zB)(e)||(0,r.Ay)(e)||void 0===e?(o=e||{provider:r.JG.Cognito},u=(0,r.SU)(o)?o.provider:o.customProvider,(0,r.SU)(o),i=o.customState,this._config.userPoolId&&(s=(0,r.ic)(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,a=(0,r.ic)(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,a,s,u,i)),[3,4]):[3,1];case 1:u=e;try{(c=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Oo.warn("There is already a signed in user: "+c+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return l=t.token,f=t.identity_id,d=t.expires_at,[4,this.Credentials.set({provider:u,token:l,identity_id:f,user:n,expires_at:d},"federation")];case 2:return h=g.sent(),[4,this.currentAuthenticatedUser()];case 3:return p=g.sent(),Uo("signIn",p,"A user "+p.username+" has been signed in"),Oo.debug("federated sign in credentials",h),[2,h];case 4:return[2]}}))}))},e.prototype._handleAuthResponse=function(e){return Po(this,void 0,void 0,(function(){var t,n,r,o,i,s,a,u,c,l,f,d,h,p;return ko(this,(function(g){switch(g.label){case 0:if(this.oAuthFlowInProgress)return Oo.debug("Skipping URL "+e+" current flow in progress"),[2];g.label=1;case 1:if(g.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Uo("parsingCallbackUrl",{url:e},"The callback url is being parsed"),t=e||(w.browserOrNode().isBrowser?window.location.href:""),n=!!((0,io.Qc)(t).query||"").split("&").map((function(e){return e.split("=")})).find((function(e){var t=xo(e,1)[0];return"code"===t||"error"===t})),r=!!((0,io.Qc)(t).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).find((function(e){var t=xo(e,1)[0];return"access_token"===t||"error"===t})),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),g.label=2;case 2:return g.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return o=g.sent(),i=o.accessToken,s=o.idToken,a=o.refreshToken,u=o.state,c=new oo.MZ({IdToken:new oo.xk({IdToken:s}),RefreshToken:new oo.bR({RefreshToken:a}),AccessToken:new oo.ZA({AccessToken:i})}),l=void 0,this._config.identityPoolId?[4,this.Credentials.set(c,"session")]:[3,5];case 4:l=g.sent(),Oo.debug("AWS credentials",l),g.label=5;case 5:return f=/-/.test(u),(d=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(c),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Uo("signIn",d,"A user "+d.getUsername()+" has been signed in"),Uo("cognitoHostedUI",d,"A user "+d.getUsername()+" has been signed in via Cognito Hosted UI"),f&&(h=u.split("-").splice(1).join("-"),Uo("customOAuthState",h.match(/.{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""),"State for user "+d.getUsername())),[2,l];case 6:return p=g.sent(),Oo.debug("Error in cognito hosted auth response",p),Uo("signIn_failure",p,"The OAuth response flow failed"),Uo("cognitoHostedUI_failure",p,"A failure occurred when returning to the Cognito Hosted UI"),Uo("customState_failure",p,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}}))}))},e.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e.prototype.attributesToObject=function(e){var t=this,n={};return e&&e.map((function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?n[e.Name]=t.isTruthyString(e.Value)||!0===e.Value:n[e.Name]=e.Value})),n},e.prototype.isTruthyString=function(e){return"function"==typeof e.toLowerCase&&"true"===e.toLowerCase()},e.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,r=new oo.ws(t);return n&&r.setAuthenticationFlowType(n),r},e.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},e.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?r.Qg.NoConfig:r.Qg.MissingAuthConfig},e.prototype.rejectAuthError=function(e){return Promise.reject(new Ao(e))},e.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new Eo(e))},e}())(null);V.register(Ro)},7402:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>o});var r=n(8354);n(2043);const o=r.g},1672:(e,t,n)=>{"use strict";var r,o;function i(e){return e&&!!["provider"].find((function(t){return e.hasOwnProperty(t)}))}function s(e){return e&&!!["customProvider"].find((function(t){return e.hasOwnProperty(t)}))}function a(e){return e&&!!["customState"].find((function(t){return e.hasOwnProperty(t)}))}function u(e){return void 0!==e.redirectSignIn}function c(e){return!!e.username}n.d(t,{JG:()=>r,SU:()=>i,zB:()=>s,Ay:()=>a,ic:()=>u,Qg:()=>o,lg:()=>c}),function(e){e.Cognito="COGNITO",e.Google="Google",e.Facebook="Facebook",e.Amazon="LoginWithAmazon",e.Apple="SignInWithApple"}(r||(r={})),function(e){e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default"}(o||(o={}))},7117:(e,t,n)=>{"use strict";n.d(t,{Xb:()=>c});var r=n(5069),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},a=new r.k("Hub"),u="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";var c=new(function(){function e(e){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","xr"],this.name=e}return e.prototype.remove=function(e,t){if(e instanceof RegExp){var n=this.patterns.find((function(t){return t.pattern.source===e.source}));if(!n)return void a.warn("No listeners for "+e);this.patterns=s(this.patterns.filter((function(e){return e!==n})))}else{var r=this.listeners[e];if(!r)return void a.warn("No listeners for "+e);this.listeners[e]=s(r.filter((function(e){return e.callback!==t})))}},e.prototype.dispatch=function(e,t,n,r){(void 0===n&&(n=""),this.protectedChannels.indexOf(e)>-1)&&(r===u||a.warn("WARNING: "+e+" is protected and dispatching on it can have unintended consequences"));var i={channel:e,payload:o({},t),source:n,patternInfo:[]};try{this._toListeners(i)}catch(e){a.error(e)}},e.prototype.listen=function(e,t,n){var r,o=this;if(void 0===n&&(n="noname"),function(e){return void 0!==e.onHubCapsule}(t))a.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),r=t.onHubCapsule.bind(t);else{if("function"!=typeof t)throw new Error("No callback supplied to Hub");r=t}if(e instanceof RegExp)this.patterns.push({pattern:e,callback:r});else{var i=this.listeners[e];i||(i=[],this.listeners[e]=i),i.push({name:n,callback:r})}return function(){o.remove(e,r)}},e.prototype._toListeners=function(e){var t=e.channel,n=e.payload,r=this.listeners[t];if(r&&r.forEach((function(r){a.debug("Dispatching to "+t+" with ",n);try{r.callback(e)}catch(e){a.error(e)}})),this.patterns.length>0){if(!n.message)return void a.warn("Cannot perform pattern matching without a message key");var s=n.message;this.patterns.forEach((function(t){var n=s.match(t.pattern);if(n){var r=i(n).slice(1),u=o(o({},e),{patternInfo:r});try{t.callback(u)}catch(e){a.error(e)}}}))}},e}())("__default__")},5069:(e,t,n)=>{"use strict";n.d(t,{k:()=>s});var r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},s=function(){function e(e,t){void 0===t&&(t="WARN"),this.name=e,this.level=t}return e.prototype._padding=function(e){return e<10?"0"+e:""+e},e.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},e.prototype._log=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.level;e.LOG_LEVEL&&(o=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(o=window.LOG_LEVEL);var s=i[o],a=i[t];if(a>=s){var u=console.log.bind(console);"ERROR"===t&&console.error&&(u=console.error.bind(console)),"WARN"===t&&console.warn&&(u=console.warn.bind(console));var c="["+t+"] "+this._ts()+" "+this.name;if(1===n.length&&"string"==typeof n[0])u(c+" - "+n[0]);else if(1===n.length)u(c,n[0]);else if("string"==typeof n[0]){var l=n.slice(1);1===l.length&&(l=l[0]),u(c+" - "+n[0],l)}else u(c,n)}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,o(["INFO"],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,o(["INFO"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,o(["WARN"],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,o(["ERROR"],e))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,o(["DEBUG"],e))},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,o(["VERBOSE"],e))},e.LOG_LEVEL=null,e}()},8260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6665:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5470:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},969:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5287:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,r=t.getRandomValues,o=t.subtle;return n.map((function(e){return o[e]})).concat(r).every((function(e){return"function"==typeof e}))}return!1}},87:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(655);r.__exportStar(n(8260),t),r.__exportStar(n(6665),t),r.__exportStar(n(5470),t),r.__exportStar(n(969),t),r.__exportStar(n(5287),t)},7333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},2769:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(3479),o=n(8889),i=n(1938),s=n(21),a=n(87),u=n(1135),c=function(){function e(e){s.supportsWebCrypto(u.locateWindow())?this.hash=new o.Sha256(e):a.isMsWindow(u.locateWindow())?this.hash=new r.Sha256(e):this.hash=new i.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=c},3479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(8036),o=n(7333),i=n(8668),s=n(1135),a=function(){function e(e){e?(this.operation=function(e){return new Promise((function(t,n){var r=s.locateWindow().msCrypto.subtle.importKey("raw",u(e),o.SHA_256_HMAC_ALGO,!1,["sign"]);r.oncomplete=function(){r.result&&t(r.result),n(new Error("ImportKey completed without importing key."))},r.onerror=function(){n(new Error("ImportKey failed to import key."))}}))}(e).then((function(e){return s.locateWindow().msCrypto.subtle.sign(o.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve(s.locateWindow().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;r.isEmptyData(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(u(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()}))}))},e}();function u(e){return"string"==typeof e?i.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},7643:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha256=t.Ie11Sha256=void 0,n(655).__exportStar(n(2769),t);var r=n(3479);Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var o=n(8889);Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return o.Sha256}})},8036:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},8889:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(8668),o=n(8036),i=n(7333),s=n(1135),a=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){s.locateWindow().crypto.subtle.importKey("raw",u(e),i.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!o.isEmptyData(e)){var t=u(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return s.locateWindow().crypto.subtle.sign(i.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):o.isEmptyData(this.toHash)?Promise.resolve(i.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return s.locateWindow().crypto.subtle.digest(i.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e}();function u(e){return"string"==typeof e?r.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},914:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var r=n(9945),o=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var o=this.bufferLength;o<r.BLOCK_SIZE;o++)t.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(o=this.bufferLength;o<r.BLOCK_SIZE-8;o++)t.setUint8(o,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(r.DIGEST_LENGTH);for(o=0;o<8;o++)i[4*o]=this.state[o]>>>24&255,i[4*o+1]=this.state[o]>>>16&255,i[4*o+2]=this.state[o]>>>8&255,i[4*o+3]=this.state[o]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],f=0;f<r.BLOCK_SIZE;f++){if(f<16)this.temp[f]=(255&e[4*f])<<24|(255&e[4*f+1])<<16|(255&e[4*f+2])<<8|255&e[4*f+3];else{var d=this.temp[f-2],h=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,p=((d=this.temp[f-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3;this.temp[f]=(h+this.temp[f-7]|0)+(p+this.temp[f-16]|0)}var g=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(r.KEY[f]+this.temp[f]|0)|0)|0,y=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&o^n&i^o&i)|0;l=c,c=u,u=a,a=s+g|0,s=i,i=o,o=n,n=g+y|0}t[0]+=n,t[1]+=o,t[2]+=i,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=o},9945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},1938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(655).__exportStar(n(5430),t)},5430:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(655),o=n(9945),i=n(914),s=n(8668),a=function(){function e(e){if(this.hash=new i.RawSha256,e){this.outer=new i.RawSha256;var t=function(e){var t=u(e);if(t.byteLength>o.BLOCK_SIZE){var n=new i.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(o.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(o.BLOCK_SIZE);n.set(t);for(var r=0;r<o.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!function(e){if("string"==typeof e)return 0===e.length;return 0===e.byteLength}(e)&&!this.error)try{this.hash.update(u(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function u(e){return"string"==typeof e?s.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},21:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(655).__exportStar(n(7787),t)},7787:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var r=n(655),o=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function i(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function s(e){return e&&o.every((function(t){return"function"==typeof e[t]}))}t.supportsWebCrypto=function(e){return!(!i(e)||"object"!=typeof e.crypto.subtle)&&s(e.crypto.subtle)},t.supportsSecureRandom=i,t.supportsSubtleCrypto=s,t.supportsZeroByteGCM=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:if(!s(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}}))}))}},4776:(e,t,n)=>{var r=n(2694),o=n(9946),i=o;i.v1=r,i.v4=o,e.exports=i},8724:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,o=t;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},9430:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},2694:(e,t,n)=>{var r,o,i=n(9430),s=n(8724),a=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==d){var h=i();null==f&&(f=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=o=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:u+1,y=p-a+(g-u)/1e4;if(y<0&&void 0===e.clockseq&&(d=d+1&16383),(y<0||p>a)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,u=g,o=d;var v=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;l[c++]=v>>>24&255,l[c++]=v>>>16&255,l[c++]=v>>>8&255,l[c++]=255&v;var m=p/4294967296*1e4&268435455;l[c++]=m>>>8&255,l[c++]=255&m,l[c++]=m>>>24&15|16,l[c++]=m>>>16&255,l[c++]=d>>>8|128,l[c++]=255&d;for(var b=0;b<6;++b)l[c+b]=f[b];return t||s(l)}},9946:(e,t,n)=>{var r=n(9430),o=n(8724);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[i+a]=s[a];return t||o(s)}},1135:(e,t,n)=>{"use strict";n.r(t),n.d(t,{locateWindow:()=>o});var r={};function o(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:r}},8668:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fromUtf8:()=>r,toUtf8:()=>o});var r=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,63&o|128);else if(n+1<e.length&&55296==(64512&o)&&56320==(64512&e.charCodeAt(n+1))){var i=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(o>>12|224,o>>6&63|128,63&o|128)}return Uint8Array.from(t)}(e)},o=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var o=e[n];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){var i=e[++n];t+=String.fromCharCode((31&o)<<6|63&i)}else if(240<=o&&o<365){var s="%"+[o,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&o)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}},2122:(e,t,n)=>{"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{Z:()=>r})},3552:(e,t,n)=>{"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,{Z:()=>o})},9756:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}n.d(t,{Z:()=>r})},9809:(e,t,n)=>{"use strict";const r=t;r.bignum=n(3550),r.define=n(2500).define,r.base=n(1979),r.constants=n(6826),r.decoders=n(8307),r.encoders=n(6579)},2500:(e,t,n)=>{"use strict";const r=n(6579),o=n(8307),i=n(5717);function s(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new s(e,t)},s.prototype._createNamed=function(e){const t=this.name;function n(e){this._initNamed(e,t)}return i(n,e),n.prototype._initNamed=function(t,n){e.call(this,t,n)},new n(this)},s.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(o[e])),this.decoders[e]},s.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},s.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(r[e])),this.encoders[e]},s.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}},6625:(e,t,n)=>{"use strict";const r=n(5717),o=n(8465).b,i=n(2399).Buffer;function s(e,t){o.call(this,t),i.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function a(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return a.isEncoderBuffer(e)||(e=new a(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=i.byteLength(e);else{if(!i.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}r(s,o),t.C=s,s.isDecoderBuffer=function(e){if(e instanceof s)return!0;return"object"==typeof e&&i.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},s.prototype.save=function(){return{offset:this.offset,reporter:o.prototype.save.call(this)}},s.prototype.restore=function(e){const t=new s(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,o.prototype.restore.call(this,e.reporter),t},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},s.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const n=new s(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},s.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.R=a,a.isEncoderBuffer=function(e){if(e instanceof a)return!0;return"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},a.prototype.join=function(e,t){return e||(e=i.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(n){n.join(e,t),t+=n.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):i.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},1979:(e,t,n)=>{"use strict";const r=t;r.Reporter=n(8465).b,r.DecoderBuffer=n(6625).C,r.EncoderBuffer=n(6625).R,r.Node=n(1949)},1949:(e,t,n)=>{"use strict";const r=n(8465).b,o=n(6625).R,i=n(6625).C,s=n(9746),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function c(e,t,n){const r={};this._baseState=r,r.name=n,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}e.exports=c;const l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){const e=this._baseState,t={};l.forEach((function(n){t[n]=e[n]}));const n=new this.constructor(t.parent);return n._baseState=t,n},c.prototype._wrap=function(){const e=this._baseState;u.forEach((function(t){this[t]=function(){const n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}}),this)},c.prototype._init=function(e){const t=this._baseState;s(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),s.equal(t.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(e){const t=this._baseState,n=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==n.length&&(s(null===t.children),t.children=n,n.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(s(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(n){n==(0|n)&&(n|=0);const r=e[n];t[r]=n})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){c.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),a.forEach((function(e){c.prototype[e]=function(){const t=this._baseState,n=Array.prototype.slice.call(arguments);return s(null===t.tag),t.tag=e,this._useArgs(n),this}})),c.prototype.use=function(e){s(e);const t=this._baseState;return s(null===t.use),t.use=e,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(e){const t=this._baseState;return s(null===t.default),t.default=e,t.optional=!0,this},c.prototype.explicit=function(e){const t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.explicit=e,this},c.prototype.implicit=function(e){const t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.implicit=e,this},c.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},c.prototype.key=function(e){const t=this._baseState;return s(null===t.key),t.key=e,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(e){const t=this._baseState;return s(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},c.prototype.contains=function(e){const t=this._baseState;return s(null===t.use),t.contains=e,this},c.prototype._decode=function(e,t){const n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));let r,o=n.default,s=!0,a=null;if(null!==n.key&&(a=e.enterKey(n.key)),n.optional){let r=null;if(null!==n.explicit?r=n.explicit:null!==n.implicit?r=n.implicit:null!==n.tag&&(r=n.tag),null!==r||n.any){if(s=this._peekTag(e,r,n.any),e.isError(s))return s}else{const r=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),s=!0}catch(e){s=!1}e.restore(r)}}if(n.obj&&s&&(r=e.enterObject()),s){if(null!==n.explicit){const t=this._decodeTag(e,n.explicit);if(e.isError(t))return t;e=t}const r=e.offset;if(null===n.use&&null===n.choice){let t;n.any&&(t=e.save());const r=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(r))return r;n.any?o=e.raw(t):e=r}if(t&&t.track&&null!==n.tag&&t.track(e.path(),r,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),n.any||(o=null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t)),e.isError(o))return o;if(n.any||null!==n.choice||null===n.children||n.children.forEach((function(n){n._decode(e,t)})),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){const r=new i(o);o=this._getUse(n.contains,e._reporterState.obj)._decode(r,t)}}return n.obj&&s&&(o=e.leaveObject(r)),null===n.key||null===o&&!0!==s?null!==a&&e.exitKey(a):e.leaveKey(a,n.key,o),o},c.prototype._decodeGeneric=function(e,t,n){const r=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,r.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&r.args?this._decodeObjid(t,r.args[0],r.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},c.prototype._getUse=function(e,t){const n=this._baseState;return n.useDecoder=this._use(e,t),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},c.prototype._decodeChoice=function(e,t){const n=this._baseState;let r=null,o=!1;return Object.keys(n.choice).some((function(i){const s=e.save(),a=n.choice[i];try{const n=a._decode(e,t);if(e.isError(n))return!1;r={type:i,value:n},o=!0}catch(t){return e.restore(s),!1}return!0}),this),o?r:e.error("Choice not matched")},c.prototype._createEncoderBuffer=function(e){return new o(e,this.reporter)},c.prototype._encode=function(e,t,n){const r=this._baseState;if(null!==r.default&&r.default===e)return;const o=this._encodeValue(e,t,n);return void 0===o||this._skipDefault(o,t,n)?void 0:o},c.prototype._encodeValue=function(e,t,n){const o=this._baseState;if(null===o.parent)return o.children[0]._encode(e,t||new r);let i=null;if(this.reporter=t,o.optional&&void 0===e){if(null===o.default)return;e=o.default}let s=null,a=!1;if(o.any)i=this._createEncoderBuffer(e);else if(o.choice)i=this._encodeChoice(e,t);else if(o.contains)s=this._getUse(o.contains,n)._encode(e,t),a=!0;else if(o.children)s=o.children.map((function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");const r=t.enterKey(n._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const o=n._encode(e[n._baseState.key],t,e);return t.leaveKey(r),o}),this).filter((function(e){return e})),s=this._createEncoderBuffer(s);else if("seqof"===o.tag||"setof"===o.tag){if(!o.args||1!==o.args.length)return t.error("Too many args for : "+o.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const n=this.clone();n._baseState.implicit=null,s=this._createEncoderBuffer(e.map((function(n){const r=this._baseState;return this._getUse(r.args[0],e)._encode(n,t)}),n))}else null!==o.use?i=this._getUse(o.use,n)._encode(e,t):(s=this._encodePrimitive(o.tag,e),a=!0);if(!o.any&&null===o.choice){const e=null!==o.implicit?o.implicit:o.tag,n=null===o.implicit?"universal":"context";null===e?null===o.use&&t.error("Tag could be omitted only for .use()"):null===o.use&&(i=this._encodeComposite(e,a,n,s))}return null!==o.explicit&&(i=this._encodeComposite(o.explicit,!1,"context",i)),i},c.prototype._encodeChoice=function(e,t){const n=this._baseState,r=n.choice[e.type];return r||s(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(e.value,t)},c.prototype._encodePrimitive=function(e,t){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},c.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},c.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},8465:(e,t,n)=>{"use strict";const r=n(5717);function o(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function i(e,t){this.path=e,this.rethrow(t)}t.b=o,o.prototype.isError=function(e){return e instanceof i},o.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},o.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},o.prototype.enterKey=function(e){return this._reporterState.path.push(e)},o.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},o.prototype.leaveKey=function(e,t,n){const r=this._reporterState;this.exitKey(e),null!==r.obj&&(r.obj[t]=n)},o.prototype.path=function(){return this._reporterState.path.join("/")},o.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},o.prototype.leaveObject=function(e){const t=this._reporterState,n=t.obj;return t.obj=e,n},o.prototype.error=function(e){let t;const n=this._reporterState,r=e instanceof i;if(t=r?e:new i(n.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!n.options.partial)throw t;return r||n.errors.push(t),t},o.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},r(i,Error),i.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,i),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},160:(e,t)=>{"use strict";function n(e){const t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);const r=e[n];t[r]=n})),t}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n(t.tag)},6826:(e,t,n)=>{"use strict";const r=t;r._reverse=function(e){const t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);const r=e[n];t[r]=n})),t},r.der=n(160)},1671:(e,t,n)=>{"use strict";const r=n(5717),o=n(3550),i=n(6625).C,s=n(1949),a=n(160);function u(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){s.call(this,"der",e)}function l(e,t){let n=e.readUInt8(t);if(e.isError(n))return n;const r=a.tagClass[n>>6],o=0==(32&n);if(31==(31&n)){let r=n;for(n=0;128==(128&r);){if(r=e.readUInt8(t),e.isError(r))return r;n<<=7,n|=127&r}}else n&=31;return{cls:r,primitive:o,tag:n,tagStr:a.tag[n]}}function f(e,t,n){let r=e.readUInt8(n);if(e.isError(r))return r;if(!t&&128===r)return null;if(0==(128&r))return r;const o=127&r;if(o>4)return e.error("length octect is too long");r=0;for(let t=0;t<o;t++){r<<=8;const t=e.readUInt8(n);if(e.isError(t))return t;r|=t}return r}e.exports=u,u.prototype.decode=function(e,t){return i.isDecoderBuffer(e)||(e=new i(e,t)),this.tree._decode(e,t)},r(c,s),c.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;const r=e.save(),o=l(e,'Failed to peek tag: "'+t+'"');return e.isError(o)?o:(e.restore(r),o.tag===t||o.tagStr===t||o.tagStr+"of"===t||n)},c.prototype._decodeTag=function(e,t,n){const r=l(e,'Failed to decode tag of "'+t+'"');if(e.isError(r))return r;let o=f(e,r.primitive,'Failed to get length of "'+t+'"');if(e.isError(o))return o;if(!n&&r.tag!==t&&r.tagStr!==t&&r.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(r.primitive||null!==o)return e.skip(o,'Failed to match body of: "'+t+'"');const i=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(o=e.offset-i.offset,e.restore(i),e.skip(o,'Failed to match body of: "'+t+'"'))},c.prototype._skipUntilEnd=function(e,t){for(;;){const n=l(e,t);if(e.isError(n))return n;const r=f(e,n.primitive,t);if(e.isError(r))return r;let o;if(o=n.primitive||null!==r?e.skip(r):this._skipUntilEnd(e,t),e.isError(o))return o;if("end"===n.tagStr)break}},c.prototype._decodeList=function(e,t,n,r){const o=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const i=n.decode(e,"der",r);if(e.isError(i)&&t)break;o.push(i)}return o},c.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let n="";for(let e=0;e<t.length/2;e++)n+=String.fromCharCode(t.readUInt16BE(2*e));return n}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},c.prototype._decodeObjid=function(e,t,n){let r;const o=[];let i=0,s=0;for(;!e.isEmpty();)s=e.readUInt8(),i<<=7,i|=127&s,0==(128&s)&&(o.push(i),i=0);128&s&&o.push(i);const a=o[0]/40|0,u=o[0]%40;if(r=n?o:[a,u].concat(o.slice(1)),t){let e=t[r.join(" ")];void 0===e&&(e=t[r.join(".")]),void 0!==e&&(r=e)}return r},c.prototype._decodeTime=function(e,t){const n=e.raw().toString();let r,o,i,s,a,u;if("gentime"===t)r=0|n.slice(0,4),o=0|n.slice(4,6),i=0|n.slice(6,8),s=0|n.slice(8,10),a=0|n.slice(10,12),u=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");r=0|n.slice(0,2),o=0|n.slice(2,4),i=0|n.slice(4,6),s=0|n.slice(6,8),a=0|n.slice(8,10),u=0|n.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,o-1,i,s,a,u,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},c.prototype._decodeInt=function(e,t){const n=e.raw();let r=new o(n);return t&&(r=t[r.toString(10)]||r),r},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},8307:(e,t,n)=>{"use strict";const r=t;r.der=n(1671),r.pem=n(9631)},9631:(e,t,n)=>{"use strict";const r=n(5717),o=n(2399).Buffer,i=n(1671);function s(e){i.call(this,e),this.enc="pem"}r(s,i),e.exports=s,s.prototype.decode=function(e,t){const n=e.toString().split(/[\r\n]+/g),r=t.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,u=-1;for(let e=0;e<n.length;e++){const t=n[e].match(s);if(null!==t&&t[2]===r){if(-1!==a){if("END"!==t[1])break;u=e;break}if("BEGIN"!==t[1])break;a=e}}if(-1===a||-1===u)throw new Error("PEM section not found for: "+r);const c=n.slice(a+1,u).join("");c.replace(/[^a-z0-9+/=]+/gi,"");const l=o.from(c,"base64");return i.prototype.decode.call(this,l,t)}},6984:(e,t,n)=>{"use strict";const r=n(5717),o=n(2399).Buffer,i=n(1949),s=n(160);function a(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new u,this.tree._init(e.body)}function u(e){i.call(this,"der",e)}function c(e){return e<10?"0"+e:e}e.exports=a,a.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},r(u,i),u.prototype._encodeComposite=function(e,t,n,r){const i=function(e,t,n,r){let o;"seqof"===e?e="seq":"setof"===e&&(e="set");if(s.tagByName.hasOwnProperty(e))o=s.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return r.error("Unknown tag: "+e);o=e}if(o>=31)return r.error("Multi-octet tag encoding unsupported");t||(o|=32);return o|=s.tagClassByName[n||"universal"]<<6,o}(e,t,n,this.reporter);if(r.length<128){const e=o.alloc(2);return e[0]=i,e[1]=r.length,this._createEncoderBuffer([e,r])}let a=1;for(let e=r.length;e>=256;e>>=8)a++;const u=o.alloc(2+a);u[0]=i,u[1]=128|a;for(let e=1+a,t=r.length;t>0;e--,t>>=8)u[e]=255&t;return this._createEncoderBuffer([u,r])},u.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=o.alloc(2*e.length);for(let n=0;n<e.length;n++)t.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},u.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let r=0;for(let t=0;t<e.length;t++){let n=e[t];for(r++;n>=128;n>>=7)r++}const i=o.alloc(r);let s=i.length-1;for(let t=e.length-1;t>=0;t--){let n=e[t];for(i[s--]=127&n;(n>>=7)>0;)i[s--]=128|127&n}return this._createEncoderBuffer(i)},u.prototype._encodeTime=function(e,t){let n;const r=new Date(e);return"gentime"===t?n=[c(r.getUTCFullYear()),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[c(r.getUTCFullYear()%100),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!o.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=o.from(t)}if(o.isBuffer(e)){let t=e.length;0===e.length&&t++;const n=o.alloc(t);return e.copy(n),0===e.length&&(n[0]=0),this._createEncoderBuffer(n)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let t=e;t>=256;t>>=8)n++;const r=new Array(n);for(let t=r.length-1;t>=0;t--)r[t]=255&e,e>>=8;return 128&r[0]&&r.unshift(0),this._createEncoderBuffer(o.from(r))},u.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},u.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},u.prototype._skipDefault=function(e,t,n){const r=this._baseState;let o;if(null===r.default)return!1;const i=e.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r.default,t,n).join()),i.length!==r.defaultBuffer.length)return!1;for(o=0;o<i.length;o++)if(i[o]!==r.defaultBuffer[o])return!1;return!0}},6579:(e,t,n)=>{"use strict";const r=t;r.der=n(6984),r.pem=n(2883)},2883:(e,t,n)=>{"use strict";const r=n(5717),o=n(6984);function i(e){o.call(this,e),this.enc="pem"}r(i,o),e.exports=i,i.prototype.encode=function(e,t){const n=o.prototype.encode.call(this,e).toString("base64"),r=["-----BEGIN "+t.label+"-----"];for(let e=0;e<n.length;e+=64)r.push(n.slice(e,e+64));return r.push("-----END "+t.label+"-----"),r.join("\n")}},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,i=u(e),s=i[0],a=i[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=16383,a=0,u=r-o;a<u;a+=s)i.push(c(e,a,a+s>u?u:a+s));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=i.length;s<a;++s)n[s]=i[s],r[i.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var o,i,s=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63}}]);