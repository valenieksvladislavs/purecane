(function(){var __webpack_modules__={7345:function(__unused_webpack_module,__webpack_exports__2,__webpack_require__2){"use strict";__webpack_require__2.r(__webpack_exports__2);var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__2(4942);class I18N{constructor(){var _window$spratlyThemeS,_window$spratlyThemeS2;(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"shop_locale",((_window$spratlyThemeS=window.spratlyThemeSettings)===null||_window$spratlyThemeS===void 0||(_window$spratlyThemeS2=_window$spratlyThemeS.shop_locale)===null||_window$spratlyThemeS2===void 0?void 0:_window$spratlyThemeS2.current)||"en"),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"locales",{default:{add_button:"Add",added_button:"Added",bundle_button:"Add selected item(s)",bundle_saved:"Saved",bundle_select:"Select",bundle_selected:"Selected",bundle_this_item:"This item",bundle_total:"Total price",checkout:"Checkout",discount_summary:"You will get <strong>{discount_value} OFF</strong> on each product",discount_title:"SPECIAL OFFER",free:"FREE",incart_title:'Customers also bought with "{product_title}"',prepurchase_added:"You just added",prepurchase_title:'Frequently bought with "{product_title}"',qty_discount_note:"on each product",qty_discount_title:"{item_count} item(s) get {discount_value} OFF",sizechart_button:"Size chart",field_name:"Enter your name",field_email:"Enter your email",field_birthday:"Date of birth",discount_noti:"* Discount will be calculated and applied at checkout",beauty_discount_noti:"* You are entitled to 1 discount offer of <span>{price}</span> (<span>{discount_title}</span>). This offer <b>can't be combined</b> with any other discount you add here!",bis_open:"Notify me when available",bis_heading:"Back in stock alert \u{1F4EC}",bis_desc:"We will send you a notification as soon as this product is available again.",bis_submit:"Notify me",bis_email:"Your email",bis_name:"Your name",bis_phone:"Your phone number",bis_note:"Your note",bis_signup:"Email me with news and offers",bis_thankyou:"Thank you! We'll send you an email when this product is available!",preorder_discount_title:"\u{1F381} Preorder now to get <strong>{discount_value} OFF</strong>",preorder_shipping_note:"\u{1F69A} Item will be delivered on or before <strong>{eta}</strong>"}}),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"tr",(key,_params={})=>{var _locales$shop_locale;const{locales,shop_locale}=this;let text=((_locales$shop_locale=locales[shop_locale])===null||_locales$shop_locale===void 0?void 0:_locales$shop_locale[key])||locales.default[key]||`Beauty: translation missing for ${key}!`;return Object.keys(_params).length&&Object.entries(_params).forEach(([k,v])=>text=text.replace(`{${k}}`,v)),text}),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"setLocales",(locale,data)=>{this.locales[locale]=data})}}const i18n=window.__i18n||new I18N;window.__i18n=window.__i18n||i18n,__webpack_exports__2.default=i18n},4558:function(__unused_webpack_module,__webpack_exports__2,__webpack_require__2){"use strict";__webpack_require__2.r(__webpack_exports__2),__webpack_require__2.d(__webpack_exports__2,{AmyrisTheme:function(){return AmyrisTheme},AmyrisThemeSettings:function(){return AmyrisThemeSettings},AmyrisThemeStrings:function(){return AmyrisThemeStrings},_ThemeEvent:function(){return _ThemeEvent}});const AmyrisTheme=window.spratlyTheme||{},AmyrisThemeSettings=window.spratlyThemeSettings||{},AmyrisThemeStrings=window.spratlyThemeStrings||{},_ThemeEvent=window._ThemeEvent||{}},6295:function(__unused_webpack_module,__webpack_exports__2,__webpack_require__2){"use strict";__webpack_require__2.r(__webpack_exports__2);var mdn_polyfills_Node_prototype_append_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__2(2422),mdn_polyfills_Node_prototype_append_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__2.n(mdn_polyfills_Node_prototype_append_js__WEBPACK_IMPORTED_MODULE_0__);class JSX{constructor(){return this.component=this.component.bind(this),this.component}component(tagName,attrs,...children){if(typeof tagName=="function")return tagName({...attrs,children});children&&(children=children.filter(val=>val!==null)),attrs&&(attrs.class&&(attrs.className=attrs.class),delete attrs.children);function createWithAttrs(tagName2,attrs2){attrs2=attrs2||{};let elem2=document.createElement(tagName2);try{elem2=Object.assign(elem2,attrs2)}catch{const attrKeys=Object.keys(attrs2);for(let i=0;i<attrKeys.length;i++)attrs2[i]!=="dataSet"&&elem2.setAttribute(attrKeys[i],attrs2[attrKeys[i]])}return elem2}let elem=tagName!=="fragment"?createWithAttrs(tagName,attrs):document.createDocumentFragment();if(["svg","path","rect","text","circle","g"].indexOf(tagName)!==-1){elem=document.createElementNS("http://www.w3.org/2000/svg",tagName);for(const key in attrs){const attrName=key==="className"?"class":key;elem.setAttribute(attrName,attrs[key])}}for(const child of children)Array.isArray(child)?elem.append(...child):elem.append(child);if(attrs!=null&&attrs.dataSet)for(const key in attrs.dataSet)Object.prototype.hasOwnProperty.call(attrs.dataSet,key)&&(elem.dataset[key]=attrs.dataSet[key]);return attrs&&!window.__aleartedJSXData&&Object.keys(attrs).find(key=>key.match(/^data-/))&&(console.trace(`Your "${tagName}" component uses a data-* attribute! Use dataSet instead!!`),alert("Do not use data-* in your JSX component! Use dataSet instead!! - Check the console.trace for more info"),window.__aleartedJSXData=!0),attrs!=null&&attrs.ref&&(typeof attrs.ref=="function"?attrs.ref(elem):attrs.ref=elem),attrs!=null&&attrs.on&&Object.entries(attrs.on).forEach(([event,handler])=>{elem.addEventListener(event,handler)}),attrs!=null&&attrs.style&&Object.entries(attrs.style).forEach(([property,value])=>{elem.style.setProperty(property,value)}),elem}}__webpack_exports__2.default=new JSX},2422:function(){(function(){function t(){var e=Array.prototype.slice.call(arguments),n=document.createDocumentFragment();e.forEach(function(e2){var t2=e2 instanceof Node;n.appendChild(t2?e2:document.createTextNode(String(e2)))}),this.appendChild(n)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:t})})})()},643:function(module){var COMPLETE="complete",CANCELED="canceled";function raf(task){if("requestAnimationFrame"in window)return window.requestAnimationFrame(task);setTimeout(task,16)}function setElementScroll(element,x,y){Math.max(0,x),Math.max(0,y),element.self===element?element.scrollTo(x,y):(element.scrollLeft=x,element.scrollTop=y)}function getTargetScrollLocation(scrollSettings,parent){var align=scrollSettings.align,target=scrollSettings.target,targetPosition=target.getBoundingClientRect(),parentPosition,x,y,differenceX,differenceY,targetWidth,targetHeight,leftAlign=align&&align.left!=null?align.left:.5,topAlign=align&&align.top!=null?align.top:.5,leftOffset=align&&align.leftOffset!=null?align.leftOffset:0,topOffset=align&&align.topOffset!=null?align.topOffset:0,leftScalar=leftAlign,topScalar=topAlign;if(scrollSettings.isWindow(parent))targetWidth=Math.min(targetPosition.width,parent.innerWidth),targetHeight=Math.min(targetPosition.height,parent.innerHeight),x=targetPosition.left+parent.pageXOffset-parent.innerWidth*leftScalar+targetWidth*leftScalar,y=targetPosition.top+parent.pageYOffset-parent.innerHeight*topScalar+targetHeight*topScalar,x-=leftOffset,y-=topOffset,x=scrollSettings.align.lockX?parent.pageXOffset:x,y=scrollSettings.align.lockY?parent.pageYOffset:y,differenceX=x-parent.pageXOffset,differenceY=y-parent.pageYOffset;else{targetWidth=targetPosition.width,targetHeight=targetPosition.height,parentPosition=parent.getBoundingClientRect();var offsetLeft=targetPosition.left-(parentPosition.left-parent.scrollLeft),offsetTop=targetPosition.top-(parentPosition.top-parent.scrollTop);x=offsetLeft+targetWidth*leftScalar-parent.clientWidth*leftScalar,y=offsetTop+targetHeight*topScalar-parent.clientHeight*topScalar,x-=leftOffset,y-=topOffset,x=Math.max(Math.min(x,parent.scrollWidth-parent.clientWidth),0),y=Math.max(Math.min(y,parent.scrollHeight-parent.clientHeight),0),x=scrollSettings.align.lockX?parent.scrollLeft:x,y=scrollSettings.align.lockY?parent.scrollTop:y,differenceX=x-parent.scrollLeft,differenceY=y-parent.scrollTop}return{x,y,differenceX,differenceY}}function animate(parent){var scrollSettings=parent._scrollSettings;if(scrollSettings){var maxSynchronousAlignments=scrollSettings.maxSynchronousAlignments,location=getTargetScrollLocation(scrollSettings,parent),time=Date.now()-scrollSettings.startTime,timeValue=Math.min(1/scrollSettings.time*time,1);if(scrollSettings.endIterations>=maxSynchronousAlignments)return setElementScroll(parent,location.x,location.y),parent._scrollSettings=null,scrollSettings.end(COMPLETE);var easeValue=1-scrollSettings.ease(timeValue);if(setElementScroll(parent,location.x-location.differenceX*easeValue,location.y-location.differenceY*easeValue),time>=scrollSettings.time){scrollSettings.endIterations++,scrollSettings.scrollAncestor&&animate(scrollSettings.scrollAncestor),animate(parent);return}raf(animate.bind(null,parent))}}function defaultIsWindow(target){return target.self===target}function transitionScrollTo(target,parent,settings,scrollAncestor,callback){var idle=!parent._scrollSettings,lastSettings=parent._scrollSettings,now=Date.now(),cancelHandler,passiveOptions={passive:!0};lastSettings&&lastSettings.end(CANCELED);function end(endType){parent._scrollSettings=null,parent.parentElement&&parent.parentElement._scrollSettings&&parent.parentElement._scrollSettings.end(endType),settings.debug&&console.log("Scrolling ended with type",endType,"for",parent),callback(endType),cancelHandler&&(parent.removeEventListener("touchstart",cancelHandler,passiveOptions),parent.removeEventListener("wheel",cancelHandler,passiveOptions))}var maxSynchronousAlignments=settings.maxSynchronousAlignments;return maxSynchronousAlignments==null&&(maxSynchronousAlignments=3),parent._scrollSettings={startTime:now,endIterations:0,target,time:settings.time,ease:settings.ease,align:settings.align,isWindow:settings.isWindow||defaultIsWindow,maxSynchronousAlignments,end,scrollAncestor},(!("cancellable"in settings)||settings.cancellable)&&(cancelHandler=end.bind(null,CANCELED),parent.addEventListener("touchstart",cancelHandler,passiveOptions),parent.addEventListener("wheel",cancelHandler,passiveOptions)),idle&&animate(parent),cancelHandler}function defaultIsScrollable(element){return"pageXOffset"in element||(element.scrollHeight!==element.clientHeight||element.scrollWidth!==element.clientWidth)&&getComputedStyle(element).overflow!=="hidden"}function defaultValidTarget(){return!0}function findParentElement(el){if(el.assignedSlot)return findParentElement(el.assignedSlot);if(el.parentElement)return el.parentElement.tagName==="BODY"?el.parentElement.ownerDocument.defaultView||el.parentElement.ownerDocument.ownerWindow:el.parentElement;if(el.getRootNode){var parent=el.getRootNode();if(parent.nodeType===11)return parent.host}}module.exports=function(target,settings,callback){if(!target)return;typeof settings=="function"&&(callback=settings,settings=null),settings||(settings={}),settings.time=isNaN(settings.time)?1e3:settings.time,settings.ease=settings.ease||function(v){return 1-Math.pow(1-v,v/2)},settings.align=settings.align||{};var parent=findParentElement(target),parents=1;function done(endType){parents--,parents||callback&&callback(endType)}var validTarget=settings.validTarget||defaultValidTarget,isScrollable=settings.isScrollable;settings.debug&&(console.log("About to scroll to",target),parent||console.error("Target did not have a parent, is it mounted in the DOM?"));for(var scrollingElements=[];parent;)if(settings.debug&&console.log("Scrolling parent node",parent),validTarget(parent,parents)&&(isScrollable?isScrollable(parent,defaultIsScrollable):defaultIsScrollable(parent))&&(parents++,scrollingElements.push(parent)),parent=findParentElement(parent),!parent){done(COMPLETE);break}return scrollingElements.reduce((cancel,parent2,index)=>transitionScrollTo(target,parent2,settings,scrollingElements[index+1],done),null)}},4942:function(__unused_webpack___webpack_module__,__webpack_exports__2,__webpack_require__2){"use strict";__webpack_require__2.d(__webpack_exports__2,{Z:function(){return _defineProperty}});function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==void 0)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}(function(){__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,{a:getter}),getter}})(),function(){__webpack_require__.d=function(exports,definition){for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})}}(),function(){__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}(),function(){__webpack_require__.r=function(exports){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})}}();var __webpack_exports__={};(function(){"use strict";var defineProperty=__webpack_require__(4942),createElement=__webpack_require__(6295).default;function Spinner({className=""}){return createElement("svg",{className:`animate-spin hidden w-[20px] h-[20px] ${className}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none"},createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))}const moneyFormat="${{amount}}";function formatMoney(cents,format){typeof cents=="string"&&(cents=cents.replace(".",""));let value="";const placeholderRegex=/\{\{\s*(\w+)\s*\}\}/,formatString=format||moneyFormat;function formatWithDelimiters(number,precision=2,thousands=",",decimal="."){if(isNaN(number)||number==null)return 0;number=(number/100).toFixed(precision);const parts=number.split("."),dollarsAmount=parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,`$1${thousands}`),centsAmount=parts[1]?decimal+parts[1]:"";return dollarsAmount+centsAmount}switch(formatString.match(placeholderRegex)[1]){case"amount":value=formatWithDelimiters(cents,2);break;case"amount_no_decimals":value=formatWithDelimiters(cents,0);break;case"amount_with_comma_separator":value=formatWithDelimiters(cents,2,".",",");break;case"amount_no_decimals_with_comma_separator":value=formatWithDelimiters(cents,0,".",",");break}return formatString.replace(placeholderRegex,value)}const events_addEventDelegate=({context=document.documentElement,event="click",selector,handler,capture=!1})=>{const listener=function(e){for(let target=e.target;target&&target!==this;target=target.parentNode)if(target.matches(selector)){handler.call(target,e,target);break}};return context.addEventListener(event,listener,capture),()=>{context.removeEventListener(event,listener,capture)}};class Event{constructor(){this.events={}}get evts(){return Object.keys(this.events)}subscribe(event,handler){return this.events[event]=this.events[event]||[],this.events[event].push(handler),()=>this.unSubscribe(event,handler)}unSubscribe(event,handler){const handlers=this.events[event];if(handlers&&Array.isArray(handlers)){for(let i=0;i<handlers.length;i++)if(handlers[i]===handler){handlers.splice(i,1);break}}}emit(event,...args){console.groupCollapsed(`Event emitted: ${event}`),console.trace(),console.groupEnd(),(this.events[event]||[]).forEach(handler=>{handler(...args)})}}var fetch_createElement=__webpack_require__(6295).default;const requestDefaultConfigs={mode:"same-origin",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}};function fetch_getRequestDefaultConfigs(){return JSON.parse(JSON.stringify(requestDefaultConfigs))}const fetch_fetchJSON=(url,config=fetch_getRequestDefaultConfigs())=>fetch(url,config).then(function(response){if(!response.ok)throw response;return response.json()}),cache=new Map,fetchCache=(url,config=fetch_getRequestDefaultConfigs())=>new Promise((resolve,reject)=>{let cached=cache.get(url);if(cached)return resolve(cached);fetch(url,config).then(res=>{cached=res.text(),cache.set(url,cached),resolve(cached)}).catch(reject)}),sectionCache=new Map,fetchSection=(sectionId,fetchFromCache=!1,params={})=>new Promise((resolve,reject)=>{const url=new URL(window.location.href);if(url.searchParams.set("section_id",sectionId),Object.entries(params).forEach(([k,v])=>url.searchParams.set(k,v)),fetchFromCache){const cached=sectionCache.get(url);if(cached)return resolve(cached)}fetch(url,fetch_getRequestDefaultConfigs()).then(res=>res.text()).then(html=>{const div=fetch_createElement("div",null);div.innerHTML=html,sectionCache.set(url,div),resolve(div)}).catch(reject)}),cache2=new Map,fetch_fetchJsonCache=(url,config=requestDefaultConfigs)=>new Promise((resolve,reject)=>{if(cache2.get(url))return resolve(cache2.get(url));fetch(url,config).then(res=>{if(res.ok){const json=res.json();return resolve(json),cache2.set(url,json),json}else reject(res)}).catch(reject)});var scroll_into_view_scrollIntoView=__webpack_require__(643);function load_assets_loadJS(src,target=document.body,async=!0,defer=!1){return new Promise((resolve,reject)=>{const doc=target.ownerDocument,currScript=doc.querySelector(`script[src="${src}"]`);if(currScript){if(currScript.dataset.loaded)return resolve(!0);currScript.addEventListener("load",()=>{currScript.dataset.loaded=!0,resolve(!0)});return}const script=doc.createElement("script");script.src=src,script.async=async,script.defer=defer,script.addEventListener("load",()=>{script.dataset.loaded=!0,resolve(!0)}),script.onerror=reject,target.appendChild(script)})}function load_assets_loadCSS(href,target=document.head){return new Promise((resolve,reject)=>{const doc=target.ownerDocument,currLink=doc.querySelector(`link[href="${href}"]`);if(currLink){if(currLink.dataset.loaded)return resolve(!0);currLink.addEventListener("load",()=>{currLink.dataset.loaded=!0,resolve(!0)});return}const link=doc.createElement("link");link.rel="stylesheet",link.href=href,link.addEventListener("load",()=>{link.dataset.loaded=!0,resolve(!0)}),link.onerror=reject,target.appendChild(link)})}const{themeScriptURLs,themeStyleURLs}=window;(!themeScriptURLs||!themeStyleURLs)&&console.warn("Missing Assest URLs source");const themeAssets={js:{urls:themeScriptURLs,load:load_assets_loadJS},css:{urls:themeStyleURLs,load:load_assets_loadCSS}};function log(asset){console.groupCollapsed("%c Asset loaded: ","#f7a046",asset),console.trace(),console.groupEnd()}function load_assets_loadAssets(param){return new Promise((resolve,reject)=>{const files=typeof param=="string"?[param]:param;Promise.all(files.map(async file=>{try{const[,name,type]=file.match(/(.*)\.(js|css)$/)||[,file,"js"],{urls:{[name]:{url}},load}=themeAssets[type];await load(url),log(`${name}.${type}`)}catch(err){console.warn(`Failed to load asset: ${file}.`,err)}})).then(resolve).catch(reject)})}var utilities_createElement=__webpack_require__(6295).default;window.__getSectionInstanceByType=type=>window.Shopify.theme.sections.instances.find(inst=>inst.type===type);function productFormCheck(form){const requiredFields=form.querySelectorAll('[data-theme-fields] [name][required]:not([hidden]):not([type="hidden"])'),missingFields=[];return requiredFields.forEach(field=>{if(field.type==="radio"){const raidoButtons=form.querySelectorAll(`input[name="${field.name}"]`);Array.from(raidoButtons).some(btn=>btn.checked)||missingFields.push(field)}else field.value||missingFields.push(field)}),missingFields}function queryDomNodes(selectors={},context=document){return Object.entries(selectors).reduce((acc,[name,selector])=>{var _context$queryMethod;const findOne=typeof selector=="string",queryMethod=findOne?"querySelector":"querySelectorAll",sl=findOne?selector:selector[0];return acc[name]=context==null||(_context$queryMethod=context[queryMethod])===null||_context$queryMethod===void 0?void 0:_context$queryMethod.call(context,sl),!findOne&&acc[name]&&(acc[name]=[...acc[name]]),acc},{})}const camelCaseToSnakeCase=str=>str.replace(/[A-Z]/g,$1=>`_${$1.toLowerCase()}`);function animateReplace(oldNode,newNode){!oldNode||!newNode||(oldNode.classList.add("ar__old-node"),newNode.classList.add("ar__new-node"),oldNode.style.opacity=0,oldNode.replaceWith(newNode),setTimeout(()=>newNode.style.opacity=1))}function createSearchLink(query){const searchParams=new URLSearchParams({type:"product","options[unavailable_products]":"last","options[prefix]":"last",q:query});return`${PredictiveSearch.SEARCH_PATH}?${searchParams.toString()}`}function isInViewport(elem){const rect=elem.getBoundingClientRect();return rect.top>0&&rect.top<(window.innerHeight||document.documentElement.clientHeight)}function loadStyles(){const{themeStyleURLs:themeStyleURLs2={}}=window;Object.values(themeStyleURLs2).forEach(style=>{const{url,required,afterWindowLoaded}=style;if(url&&required){var _window;!afterWindowLoaded||(_window=window)!==null&&_window!==void 0&&_window.__sfWindowLoaded?loadCSS(url):window.addEventListener("load",()=>loadCSS(url))}})}function loadScripts(){const{themeScriptURLs:themeScriptURLs2={}}=window;Object.values(themeScriptURLs2).forEach(script=>{const{url,required,afterWindowLoaded}=script;if(url&&required){var _window2;!afterWindowLoaded||(_window2=window)!==null&&_window2!==void 0&&_window2.__sfWindowLoaded?loadJS(url):window.addEventListener("load",()=>loadJS(url))}})}function addCustomerFormHandlers(){if(addEventDelegate({selector:".sf-customer__forms",handler:(e,form)=>{if(e.target.classList.contains("sf-customer__reset-password-btn")){form.classList.add("show-recover-password-form");return}if(e.target.classList.contains("sf-customer__cancel-reset")){form.classList.remove("show-recover-password-form");return}}}),document.querySelector(".sf-customer__recover-form-posted")){var _document$querySelect,_document$querySelect2;(_document$querySelect=document.querySelector(".sf-customer__forms"))===null||_document$querySelect===void 0||(_document$querySelect2=_document$querySelect.classList)===null||_document$querySelect2===void 0||_document$querySelect2.add("show-recover-password-form")}}function getVideoURL(id,host){return host==="youtube"?`https://www.youtube.com/watch?v=${id}&gl=true`:host==="vimeo"?`https://vimeo.com/${id}`:""}function showCookieConsent(){const{show_cookie_consent}=window.adminThemeSettings,cookieAccepted=getCookie("cookieconsent_status");show_cookie_consent&&!cookieAccepted&&loadAssets(["cookieConsent.css","cookieConsent.js"])}function initTermsCheckbox(){addEventDelegate({selector:'.agree-terms [name="agree_terms"]',event:"change",handler:(e,target)=>{const button=target.closest(".agree-terms").nextElementSibling;button&&button.hasAttributes("data-terms-action")&&(target.checked?button.removeAttribute("disabled"):button.setAttribute("disabled",!0))}})}const scrollToTopTarget=document.querySelector("#scroll-to-top-target");function scrollToTop(callback){scrollIntoView(scrollToTopTarget,callback)}function initScrollTop(){const scrollTopButton=document.querySelector("#scroll-to-top-button");scrollTopButton&&(scrollTopButton.addEventListener("click",scrollToTop),window.addEventListener("scroll",function(){const method=window.scrollY>100?"add":"remove";scrollTopButton.classList[method]("opacity-100")}))}function setCookie(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+exdays*24*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"}function getCookie(cname){for(var name=cname+"=",decodedCookie=decodeURIComponent(document.cookie),ca=decodedCookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];c.charAt(0)===" ";)c=c.substring(1);if(c.indexOf(name)===0)return c.substring(name.length,c.length)}return""}function addRecentViewedProduct(handle){let max=20;const saveKey="sf-recent-viewed-products",products=getCookie(saveKey)?JSON.parse(getCookie(saveKey)):[];handle&&!products.includes(handle)&&products.push(handle),setCookie(saveKey,JSON.stringify(products.filter((x,i)=>i<=max-1)))}const generateDomFromString=value=>{const d=utilities_createElement("div",null);return d.innerHTML=value,d};function emailIsValid(email){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)}function updateParam(key,value){var{location}=window,baseUrl=[location.protocol,"//",location.host,location.pathname].join("");const queryString=window.location.search,urlParams=new URLSearchParams(queryString);return urlParams.has(key)?(value!==""&&value!=="undefined"&&urlParams.set(key,value),(value===""||value==="undefined")&&urlParams.delete(key)):value&&urlParams.append(key,value),window.history.replaceState({},"",baseUrl+"?"+urlParams.toString()),!1}function getParams(){let params={};const queryString=window.location.search,urlParams=new URLSearchParams(queryString);for(const entry of urlParams.entries())params[entry[0]]=entry[1];return params}function runHelpers(){try{loadScripts(),loadStyles(),showCookieConsent(),initTermsCheckbox(),initLocalization(),addCustomerFormHandlers(),initScrollTop()}catch(err){console.error("Failed to run helpers.",err)}}var Notification_createElement=__webpack_require__(6295).default;function components_Notification({type,message,onclick}){let icon;return type==="warning"?icon=Notification_createElement("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Notification_createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})):type==="success"&&(icon=Notification_createElement("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Notification_createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),Notification_createElement("div",{className:`notification ${type}`,onclick},icon,Notification_createElement("div",{className:"ml-3"},message))}var notification_createElement=__webpack_require__(6295).default,AmyrisTheme=__webpack_require__(4558).AmyrisTheme;class Notification{constructor(){(0,defineProperty.Z)(this,"noti",null),(0,defineProperty.Z)(this,"removeTimeoutId",null),(0,defineProperty.Z)(this,"hideTimeoutId",null),(0,defineProperty.Z)(this,"transitionDuration",300),(0,defineProperty.Z)(this,"show",({target,type,message,method="after",last=3e3,delay=0,debug=!1})=>{this.clearTimeout(),this.removeNoti(),setTimeout(()=>{this.noti=notification_createElement(components_Notification,{type,message,onclick:this.handleClick}),target?.[method](this.noti),requestAnimationFrame(()=>this.noti.classList.add("show")),debug||(this.hideTimeoutId=setTimeout(()=>{this.noti.classList.add("hide"),this.removeTimeoutId=setTimeout(this.removeNoti,this.transitionDuration*2)},last))},delay)}),(0,defineProperty.Z)(this,"handleClick",()=>{clearTimeout(this.removeTimeoutId),this.noti.classList.add("hide"),setTimeout(this.removeNoti,this.transitionDuration*2)}),(0,defineProperty.Z)(this,"clearTimeout",()=>{clearTimeout(this.removeTimeoutId),clearTimeout(this.hideTimeoutId)}),(0,defineProperty.Z)(this,"removeNoti",()=>{var _this$noti;this===null||this===void 0||(_this$noti=this.noti)===null||_this$noti===void 0||_this$noti.remove()})}}AmyrisTheme.Notification=new Notification;var product_fns_createElement=__webpack_require__(6295).default;const themeProducts=window._themeProducts||{},fetchProductByHandle=async handle=>{const product=await fetchJsonCache(`/products/${handle}.js`).catch(console.error);return product?(themeProducts[product.id]=product,product):!1},getProductData=async({productId,productHandle})=>{var _productData,_productData2;let productData=themeProducts[productId];return productData||(productData=await fetchProductByHandle(productHandle).catch(console.error)),productData.has_only_default_variant=((_productData=productData)===null||_productData===void 0?void 0:_productData.has_only_default_variant)||productHasOnlyDefaultVariant((_productData2=productData)===null||_productData2===void 0?void 0:_productData2.options),Object.assign({},productData)},getProductJSON=async handle=>{const html=await fetchCache(`/products/${handle}?section_id=product-json`);if(html&&!/^<!doctype html>/.test(html)){const node=product_fns_createElement("div",null);node.innerHTML=html;const productJSONNode=node.querySelector("script.product-json");if(productJSONNode){const data=JSON.parse(productJSONNode.innerText);if(data){const{dataset}=productJSONNode;Object.entries(dataset).forEach(([k,v])=>data[camelCaseToSnakeCase(k)]=["true","false"].indexOf(v)+1?v==="true":v);const selectedVariantNode=node.querySelector("script.selected-variant-json");selectedVariantNode&&(data.selected_variant=JSON.parse(selectedVariantNode.innerText));const selectedOrFirstAvailableVariantNode=node.querySelector("script.selected-or-first-available-variant-json");return selectedOrFirstAvailableVariantNode&&(data.selected_or_first_available_variant=JSON.parse(selectedOrFirstAvailableVariantNode.innerText)),data}}}return null},getProductsJSON=async handles=>{const productData={},promises=handles.map(async hdl=>{productData[hdl]=await getProductJSON(hdl)});return await Promise.all(promises),handles.map(hdl=>productData[hdl])},productHasOnlyDefaultVariant=prodOptions=>{if(Array.isArray(prodOptions)&&prodOptions.length===1){var _firstOption$values;const firstOption=prodOptions[0];if(firstOption?.name==="Title"&&(firstOption==null||(_firstOption$values=firstOption.values)===null||_firstOption$values===void 0?void 0:_firstOption$values.join())==="Default Title")return!0}return!1},getProductInstances=query=>{let fieldSearch="id";return typeof query=="string"&&(fieldSearch="handle"),window.spratlyTheme.Products.productInstances.filter(pro=>{var _pro$productData;return((_pro$productData=pro.productData)===null||_pro$productData===void 0?void 0:_pro$productData[fieldSearch])===query})};window._getProductInstances=getProductInstances;const getThemeProductSettings=()=>{if(window.themeProductSettings)return window.themeProductSettings;const{spratlyThemeSettings,adminThemeSettings:{product_colors,use_ajax_atc},money_format}=window;let colorSwatch=[],imageSwatch=[];try{colorSwatch=product_colors.split(",").filter(Boolean).map(item=>{const[key,value]=item.split(":");return{key:key.trim().toLowerCase(),value:value?.trim()}}),Object.keys(spratlyThemeSettings).forEach(key=>{key.includes("filter_color")&&!key.includes(".png")&&spratlyThemeSettings[`${key}.png`]&&imageSwatch.push({key:spratlyThemeSettings[key].toLowerCase(),value:spratlyThemeSettings[`${key}.png`]})})}catch(e){console.error("Failed to convert color/image swatch structure!",e)}const productSettings={colorSwatch,imageSwatch,use_ajax_atc,money_format};return window.themeProductSettings=productSettings,productSettings},isValidColor=color=>{const otpNode=new Option;return otpNode.style.color=color.replace(/\s/g,"").toLowerCase(),otpNode.style.color===color},getOptionValueFromOptionNode=optNode=>optNode.type==="checkbox"?optNode.value:optNode.tagName==="OPTION"?optNode.closest("select").value:optNode.innerText.trim();var IconPlus_createElement=__webpack_require__(6295).default,IconPlus=()=>IconPlus_createElement("div",{className:"icon-plus hidden md:block"},IconPlus_createElement("svg",{className:"w-[20px] h-[20px]",fill:"currentColor",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},IconPlus_createElement("path",{d:"M376 232H216V72c0-4.42-3.58-8-8-8h-32c-4.42 0-8 3.58-8 8v160H8c-4.42 0-8 3.58-8 8v32c0 4.42 3.58 8 8 8h160v160c0 4.42 3.58 8 8 8h32c4.42 0 8-3.58 8-8V280h160c4.42 0 8-3.58 8-8v-32c0-4.42-3.58-8-8-8z"}))),LazyImage_createElement=__webpack_require__(6295).default;function LazyImage(props){const{src,alt,style={},className="",onLoad=()=>{},onError=()=>{}}=props,image=LazyImage_createElement("img",{style,className:`transition-opacity opacity-0 ${className}`,src,alt});image.addEventListener("load",imgLoaded),image.addEventListener("error",imgError),image.complete&&image.naturalWidth&&imgLoaded();function imgLoaded(){onLoad&&onLoad(),image.classList.add("opacity-100"),image.removeEventListener("load",imgLoaded),image.removeEventListener("error",imgError)}function imgError(err){console.error("Failed to load LazyImage. ",err,props),onError&&onError(),image.style.opacity=0,image.removeEventListener("load",imgLoaded),image.removeEventListener("error",imgError)}return image}var ProductPrices_createElement=__webpack_require__(6295).default,Bundle_ProductPrices=({variant})=>{var _window;const{money_format}=((_window=window)===null||_window===void 0?void 0:_window.spratlyThemeSettings)||{},comparePriceNode=ProductPrices_createElement("span",{class:"prod__compare_price mr-2 line-through text-color-secondary"});comparePriceNode.innerHTML=formatMoney(variant.compare_at_price,money_format);const priceNode=ProductPrices_createElement("span",{class:"prod__price"});return priceNode.innerHTML=formatMoney(variant.price,money_format),ProductPrices_createElement("div",null,variant.compare_at_price?comparePriceNode:null,variant.price?priceNode:null)},ProductTitle_createElement=__webpack_require__(6295).default,Bundle_ProductTitle=({url,title,handle})=>handle===window.spratlyThemeSettings.productHandle?ProductTitle_createElement("span",{className:"prod__title"},title):ProductTitle_createElement("a",{href:url,className:"prod__title upsell cursor-pointer"},title),VariantSelect_createElement=__webpack_require__(6295).default,Bundle_VariantSelect=({product,layout})=>{var _window;const{money_format}=((_window=window)===null||_window===void 0?void 0:_window.spratlyThemeSettings)||{};return product.has_only_default_variant?null:VariantSelect_createElement("select",{name:"id",dataSet:{productHandle:product.handle},className:`sf-product-variant-option-dropdown combined-variant ${layout==="layout-2"?"text-color-secondary":""}`},product.variants.map(variant=>{const priceNode=VariantSelect_createElement("span",null);return priceNode.innerHTML=`- ${formatMoney(variant.price,money_format)}`,VariantSelect_createElement("option",{value:variant.id},variant.title," ",layout==="layout-1"?null:priceNode)}))},CheckboxSelect_createElement=__webpack_require__(6295).default,Bundle_CheckboxSelect=({productHandle,className=""})=>{const isMainProduct=productHandle===window.spratlyThemeSettings.productHandle;return CheckboxSelect_createElement("label",{className:`upsell__checkbox-label flex-shrink-0 mr-4 cursor-pointer relative ${isMainProduct?"main-prod":""} ${className}`},CheckboxSelect_createElement("input",{type:"checkbox",checked:"checked",className:"upsell__checkbox hidden",dataSet:{productHandle}}),CheckboxSelect_createElement("span",{className:"upsell__checkmark absolute top-0 left-0 w-full h-full"}))},Product_createElement=__webpack_require__(6295).default,i18n=__webpack_require__(7345).default,Product=({product,layout,position})=>{const selectedVariant=product.selected_or_first_available_variant,isMainProduct=product.handle===window.spratlyThemeSettings.productHandle;return Product_createElement("div",{className:"sf-prod__block",dataSet:{view:"card",mainProduct:isMainProduct}},Product_createElement("form",{className:"product-form form",noValidate:!0,dataSet:{productId:product.id,productHandle:product.handle}},Product_createElement("input",{hidden:!0,name:"id",required:!0,value:selectedVariant?.id}),layout==="layout-2"?null:Product_createElement("div",{className:"inline-flex md:hidden items-center"},Product_createElement(Bundle_CheckboxSelect,{productHandle:product.handle,className:"block md:hidden"})),Product_createElement("div",{className:"product-img select-none flex-shrink-0"},Product_createElement("a",{className:`block cursor-pointer w-full ${isMainProduct?"pointer-events-none":""}`,href:product.url},Product_createElement("div",{className:"spc__main-img transition-opacity duration-300 opacity-100 max-w-full",style:{"--aspect-ratio":product.aspect_ratio}},Product_createElement(LazyImage,{style:{"object-fit":"contain"},src:product.featured_image,alt:product.title})))),Product_createElement("div",{className:"upsell__prod-info flex flex-col"},position==="inside"&&layout==="layout-2"?null:Product_createElement("fragment",null,Product_createElement(Bundle_ProductTitle,{title:product.title,handle:product.handle,url:product.url}),Product_createElement(Bundle_ProductPrices,{variant:selectedVariant})),Product_createElement("div",{className:"flex mt-4",dataSet:{variantSelect:!0}},position==="inside"&&layout==="layout-1"?null:Product_createElement(Bundle_CheckboxSelect,{productHandle:product.handle}),layout==="layout-1"?Product_createElement(Bundle_VariantSelect,{product,layout}):Product_createElement("div",{className:"content-group flex"},Product_createElement(Bundle_ProductTitle,{title:`${isMainProduct?`${i18n.tr("bundle_this_item")}:`:""} ${product.title}`,handle:product.handle,url:product.url}),Product_createElement(Bundle_VariantSelect,{product,layout})))),position==="inside"&&layout==="layout-1"?Product_createElement("div",null,Product_createElement("button",{className:`select-button sf__btn sf__btn-secondary selected ${isMainProduct?"main-prod":""}`,dataSet:{productHandle:product.handle}},i18n.tr(isMainProduct?"bundle_this_item":"bundle_selected"))):null))},DiscountNode_createElement=__webpack_require__(6295).default,Bundle_DiscountNode=({discountSummary})=>discountSummary?DiscountNode_createElement("div",{class:"bundle_discount flex items-center"},DiscountNode_createElement("svg",{className:"mr-2",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"19",fill:"none",viewBox:"0 0 18 19"},DiscountNode_createElement("path",{fill:"#DA3F3F",d:"M17.4375 7.49219C17.8125 8.00781 18 8.59375 18 9.25s-.1875 1.2539-.5625 1.793c-.375.5156-.8555.8789-1.4414 1.0898.2578.5625.3281 1.1719.2109 1.8281-.0937.6329-.375 1.1836-.8437 1.6524-.4688.4687-1.0195.75-1.6524.8437-.6328.1172-1.2421.0469-1.8281-.2109-.1406.3984-.3516.7383-.6328 1.0195-.2812.3047-.6211.5391-1.0195.7032-.37503.1874-.78519.2812-1.2305.2812-.65625 0-1.25391-.1875-1.79297-.5625-.51562-.375-.87891-.8555-1.08984-1.4414-.58594.2578-1.19531.3281-1.82813.2109-.63281-.0937-1.18359-.375-1.65234-.8437-.46875-.4688-.76172-1.0195-.87891-1.6524-.09375-.6562-.01172-1.2656.2461-1.8281C1.41797 11.9219.9375 11.5586.5625 11.043.1875 10.5039 0 9.90625 0 9.25s.1875-1.24219.5625-1.75781c.375-.53906.85547-.91407 1.44141-1.125-.25782-.5625-.33985-1.16016-.2461-1.79297.11719-.65625.41016-1.21875.87891-1.6875.46875-.46875 1.01953-.75 1.65234-.84375.65625-.11719 1.26563-.04688 1.82813.21094.21093-.58594.57422-1.06641 1.08984-1.44141C7.74609.4375 8.34375.25 9 .25s1.2422.1875 1.7578.5625c.5391.375.9141.85547 1.125 1.44141.5625-.25782 1.1602-.32813 1.793-.21094.6562.09375 1.2187.375 1.6875.84375.4687.46875.75 1.03125.8437 1.6875.1172.63281.0469 1.23047-.2109 1.79297.5859.21093 1.0664.58594 1.4414 1.125zM7.52344 6.22656C7.3125 5.99219 7.05469 5.875 6.75 5.875s-.57422.11719-.80859.35156C5.73047 6.4375 5.625 6.69531 5.625 7s.10547.57422.31641.80859c.23437.21094.5039.31641.80859.31641s.5625-.10547.77344-.31641C7.75781 7.57422 7.875 7.30469 7.875 7s-.11719-.5625-.35156-.77344zm-.35156 6.04684l4.85152-4.85152c.2578-.25782.2578-.51563 0-.77344l-.4218-.42188c-.2578-.25781-.5157-.25781-.7735 0L5.97656 11.0781c-.25781.2578-.25781.5157 0 .7735l.42188.4218c.25781.2578.51562.2578.77344 0zm3.26952.0352c.2344.2109.5039.3164.8086.3164.3047 0 .5625-.1055.7734-.3164.2344-.2344.3516-.5039.3516-.8086 0-.3047-.1172-.5625-.3516-.7734-.2109-.2344-.4687-.3516-.7734-.3516-.3047 0-.5742.1172-.8086.3516-.2109.2109-.3164.4687-.3164.7734 0 .3047.1055.5742.3164.8086z"})),discountSummary):null,Layout_createElement=__webpack_require__(6295).default,Layout_i18n=__webpack_require__(7345).default;function Layout({bundle_heading,products,layout,container,position,discountSummary,discountClass}){return Layout_createElement("div",{className:`prod-section-upsell ${position==="outside"?container:""} ${layout} ${position} ${discountClass}`,dataSet:{bundleContainer:"true"}},Layout_createElement("h3",{className:"upsell_heading"},bundle_heading),Layout_createElement(Bundle_DiscountNode,{discountSummary}),Layout_createElement("div",{className:"upsell__container"},Layout_createElement("div",{className:"upsell__products-wrapper flex items-stretch"},products.filter(Boolean).map(product=>{const isMainProduct=product.handle===window.spratlyThemeSettings.productHandle;return Layout_createElement("fragment",null,Layout_createElement(Product,{product,layout,position}),!isMainProduct||position==="inside"&&layout==="layout-1"?null:Layout_createElement(IconPlus,null))})),layout==="layout-1"?null:Layout_createElement("div",{className:"upsell__products-info flex flex-col"}),Layout_createElement("div",{className:"total w-full"},Layout_createElement("div",{className:"total-block"},Layout_createElement("div",null,Layout_createElement("span",{className:"text-color-prod-desc"},Layout_i18n.tr("bundle_total"),":"),Layout_createElement("span",{dataSet:{total:!0},className:"mx-2 hidden text-lg line-through text-color-secondary leading-6"}),Layout_createElement("span",{dataSet:{subTotal:!0},className:"upsell__sub-total text-lg ml-2"})),Layout_createElement("div",{dataSet:{savedBlock:!0},className:"mt-1 hidden"},Layout_createElement("span",{className:"text-color-prod-desc"},Layout_i18n.tr("bundle_saved"),":"),Layout_createElement("span",{dataSet:{savedPrice:!0},className:"mx-2 text-lg text-color-secondary leading-6"})),Layout_createElement("button",{className:"sf__btn sf__btn-primary upsell__atc mt-5 flex justify-center w-full"},Layout_createElement("span",null,Layout_i18n.tr("bundle_button"))),Layout_createElement("div",{className:"upsell__error"})))))}var helpers_createElement=__webpack_require__(6295).default,helpers_i18n=__webpack_require__(7345).default;String.prototype.capitalize||(String.prototype.capitalize=function(){var _this$,_this$$toUpperCase;return this.replace(this[0],(_this$=this[0])===null||_this$===void 0||(_this$$toUpperCase=_this$.toUpperCase)===null||_this$$toUpperCase===void 0?void 0:_this$$toUpperCase.call(_this$))});function handleSubscribe(data){const myHeaders=new Headers;myHeaders.append("Content-Type","application/x-www-form-urlencoded");const requestOptions={method:"POST",headers:myHeaders,body:new URLSearchParams({data:JSON.stringify(data)})};return new Promise((resolve,reject)=>{fetch(`${window.Beauty.appURL}/api/public/subscribe?shop=${window.Shopify.shop}`,requestOptions).then(response=>response.json()).then(resolve).catch(reject)})}function copyToClipboard(value,button){const input=document.body.appendChild(document.createElement("input"));input.value=value,input.select(),document.execCommand("copy"),input.parentNode.removeChild(input),button&&(button.innerText="Copied")}function insertAfter(newNode,referenceNode){referenceNode&&referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling)}function productUrlByHandle(handle){var _window$spratlyThemeS;return`${(_window$spratlyThemeS=window.spratlyThemeSettings)===null||_window$spratlyThemeS===void 0?void 0:_window$spratlyThemeS.shop_domain}/products/${handle}`}function addToCart(data=[]){return new Promise((resolve,reject)=>{fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(response=>response.json()).then(data2=>{resolve(data2);const addedItem=data2?.items[0];addedItem.source="quantity-upsell",window.Shopify.onItemAdded(addedItem)}).catch(reject)})}function changeCart(lineItem){return fetchJSON("/cart/change.js",{...getRequestDefaultConfigs(),method:"POST",body:JSON.stringify(lineItem)})}async function getJsonProducts(handles){if(handles?.length<1)return[];const products=[],promises=handles.map(async hdl=>{try{const data=await fetchJsonCache(`/products/${hdl}.js`);data&&products.push(data)}catch(err){console.error(err)}});return await Promise.all(promises),products}const maxBy=(arr,key)=>arr.reduce((acc,curr)=>acc[key]>=curr[key]?acc:curr,{});function getDiscountSummary(discount){var _window$Shopify,_window$Shopify$curre,_window,_window$spratlyThemeS2;const discountText=helpers_createElement("span",null),discountValue=discount?.type==="PERCENTAGE"?`${discount?.value}%`:formatMoney(discount?.value*100*Number(((_window$Shopify=window.Shopify)===null||_window$Shopify===void 0||(_window$Shopify$curre=_window$Shopify.currency)===null||_window$Shopify$curre===void 0?void 0:_window$Shopify$curre.rate)||1),(_window=window)===null||_window===void 0||(_window$spratlyThemeS2=_window.spratlyThemeSettings)===null||_window$spratlyThemeS2===void 0?void 0:_window$spratlyThemeS2.money_format);return discountText.innerHTML=helpers_i18n.tr("discount_summary",{discount_value:discountValue}),discountText}function lightOrDark(color){var r,g,b,hsp;return color.match(/^rgb/)?(color=color.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),r=color[1],g=color[2],b=color[3]):(color=+("0x"+color.slice(1).replace(color.length<5&&/./g,"$&$&")),r=color>>16,g=color>>8&255,b=color&255),hsp=Math.sqrt(.299*(r*r)+.587*(g*g)+.114*(b*b)),hsp>127.5?"light":"dark"}const updateCartAttributes=offer=>new Promise((resolve,reject)=>{try{var _window$spratlyTheme,_window$spratlyTheme$;if(!offer||!(offer!=null&&offer.offer_id))return;const{attributes={}}=((_window$spratlyTheme=window.spratlyTheme)===null||_window$spratlyTheme===void 0||(_window$spratlyTheme$=_window$spratlyTheme.Cart)===null||_window$spratlyTheme$===void 0?void 0:_window$spratlyTheme$.cart)||{};let{_beautyCartDiscounts}=attributes,newAttributes=[];if(_beautyCartDiscounts){if(_beautyCartDiscounts=JSON.parse(_beautyCartDiscounts),_beautyCartDiscounts.find(d=>JSON.parse(d).product_id===offer.product_id))return;newAttributes=[..._beautyCartDiscounts]}newAttributes.push(JSON.stringify(offer)),fetchJSON("/cart/update.js",{...getRequestDefaultConfigs(),method:"POST",body:JSON.stringify({attributes:{_beautyCartDiscounts:newAttributes}})}).then(cart=>{console.info("Cart attributes updated!. New cart:",cart.attributes),window.Shopify.onCartUpdate(),resolve(!0)}).catch(reject)}catch(error){reject(error)}});function debounce(fn,wait=300){let t;return(...args)=>{clearTimeout(t),t=setTimeout(()=>fn.apply(this,args),wait)}}var bundle_createElement=__webpack_require__(6295).default,bundle_i18n=__webpack_require__(7345).default;class ProductBundle{constructor(container,settings){var _window$spratlyThemeS,_this$handles;if((0,defineProperty.Z)(this,"selectors",{bundleContainer:"[data-bundle-container]",productsWrapper:".upsell__products-wrapper",productForms:["form[data-product-id]"],variantSelects:["[data-variant-select]"],mainImg:"[data-main-product] .spc__main-img img",productsInfo:".upsell__products-info",iconPlus:".icon-plus",atc:".upsell__atc",total:".total",totalPrice:"[data-total]",subTotalPrice:"[data-sub-total]",savedBlock:"[data-saved-block]",savedPrice:"[data-saved-price]",errorWrapper:".upsell__error"}),(0,defineProperty.Z)(this,"spinner",bundle_createElement(Spinner,{className:"m-0.5"})),(0,defineProperty.Z)(this,"products",[]),(0,defineProperty.Z)(this,"productInstances",[]),(0,defineProperty.Z)(this,"containerClass",window.spratlyThemeSettings.productContainer||"container"),(0,defineProperty.Z)(this,"money_format",((_window$spratlyThemeS=window.spratlyThemeSettings)===null||_window$spratlyThemeS===void 0?void 0:_window$spratlyThemeS.money_format)||"${{amount}}"),(0,defineProperty.Z)(this,"init",async()=>{try{this.products=await getProductsJSON(this.handles);const{bundle_heading,position,layout,active_discount,discount}=this.settings,hasDiscount=active_discount&&discount.value,bundle=bundle_createElement(Layout,{layout,container:this.containerClass,position,bundle_heading,products:this.products,discountSummary:hasDiscount?getDiscountSummary(discount):null,discountClass:hasDiscount?"has-discount":"no-discount"});this.container.appendChild(bundle),this.domNodes=queryDomNodes(this.selectors,this.container);const promises=this.domNodes.productForms.map(async form=>{const prodInstance=new window.spratlyTheme.Product(form,{autoInit:!1});await prodInstance.init(),prodInstance.selected=!0,this.productInstances.push(prodInstance)});await Promise.all(promises),layout==="layout-1"?this.setTotalBlockShadow():layout==="layout-2"&&this.moveVariantSelectsOut(),this.setMainImgHeight(),bundle.style.opacity=1}catch(error){console.error("Failed to init Product Upsell section",error)}}),(0,defineProperty.Z)(this,"moveVariantSelectsOut",()=>{const{variantSelects,productsInfo}=this.domNodes;variantSelects.forEach(varSel=>productsInfo.appendChild(varSel))}),(0,defineProperty.Z)(this,"setMainImgHeight",()=>{const func=()=>{const{mainImg}=this.domNodes;mainImg&&this.container.style.setProperty("--main-img-height",`${mainImg.offsetHeight}px`)};func(),window.addEventListener("resize",debounce(func))}),(0,defineProperty.Z)(this,"setTotalBlockShadow",()=>{const func=()=>{var _total$classList,_total$classList$meth;const{productsWrapper,total}=this.domNodes,{clientWidth,scrollWidth}=productsWrapper,method=scrollWidth>clientWidth?"add":"remove";total==null||(_total$classList=total.classList)===null||_total$classList===void 0||(_total$classList$meth=_total$classList[method])===null||_total$classList$meth===void 0||_total$classList$meth.call(_total$classList,"has-shadow")};func(),window.addEventListener("resize",debounce(func))}),(0,defineProperty.Z)(this,"handleSelectProduct",()=>{events_addEventDelegate({event:"change",context:this.container,selector:".sf-product-variant-option-dropdown",handler:this.setTotalPrices}),events_addEventDelegate({event:"change",context:this.container,selector:".upsell__checkbox",handler:(e,checkbox)=>{const handle=checkbox.dataset.productHandle,prodInstance=this.productInstances.find(ins=>ins.productData.handle===handle);prodInstance.selected=checkbox.checked;const img=prodInstance.productHelper.domNodes.featuredImage;img&&(img.style.opacity=checkbox.checked?1:.5),this.setAddToCartBtnState(),this.setTotalPrices()}}),events_addEventDelegate({context:this.container,selector:".select-button",handler:(e,btn)=>{e.preventDefault(),btn.blur();const handle=btn.dataset.productHandle,prodInstance=this.productInstances.find(ins=>ins.productData.handle===handle),selected=btn.classList.contains("selected");btn.classList[selected?"remove":"add"]("selected"),btn.textContent=bundle_i18n.tr(selected?"bundle_select":"bundle_selected"),prodInstance.selected=!selected;const img=prodInstance.productHelper.domNodes.featuredImage;img&&(img.style.opacity=selected?.6:1),this.setAddToCartBtnState(),this.setTotalPrices()}})}),(0,defineProperty.Z)(this,"setAddToCartBtnState",()=>{const{atc}=this.domNodes,method=this.productInstances.filter(inst=>inst.selected).length>1?"remove":"add";atc.classList[method]("disabled")}),(0,defineProperty.Z)(this,"handleAddToCart",()=>{events_addEventDelegate({context:this.container,selector:this.selectors.atc,handler:()=>{const ids=[];this.productInstances.forEach(ins=>{ins.selected&&ids.push(Number(ins.domNodes.variantIdNode.value))});const data={items:ids.map(id=>({id,quantity:1,properties:{_beautyDiscount:{plugin:"Bundle",offer_id:this.settings._id}}}))},config=fetch_getRequestDefaultConfigs();config.method="POST",config.body=JSON.stringify(data),this.toggleLoading(!0),fetch("/cart/add.js",config).then(async res=>{if(res!=null&&res.ok){const{items}=await res.json(),firstItem=items.shift();window.Shopify.onItemAdded(firstItem),items.forEach(itm=>setTimeout(()=>window.Shopify.onItemAdded(itm,!1),3e3))}else{const err=await res.json();this.showError(err?.description||"Failed to add all items to cart!")}if(setTimeout(()=>this.toggleLoading(!1),300),!window.adminThemeSettings.use_ajax_atc){var _window$spratlyThemeS2,_window$spratlyThemeS3;const cartRoute=((_window$spratlyThemeS2=window.spratlyThemeSettings)===null||_window$spratlyThemeS2===void 0||(_window$spratlyThemeS3=_window$spratlyThemeS2.routes)===null||_window$spratlyThemeS3===void 0?void 0:_window$spratlyThemeS3.cart)||"/cart";window.location.href=cartRoute}}).catch(err=>{var _err$toString;this.showError(err==null||(_err$toString=err.toString)===null||_err$toString===void 0?void 0:_err$toString.call(err)),this.toggleLoading(!1)})}})}),(0,defineProperty.Z)(this,"setTotalPrices",()=>{const variants=this.productInstances.filter(ins=>ins.selected).map(ins=>{const variantId=ins.domNodes.variantIdNode.value;return ins.productData.variants.find(v=>v?.id===Number(variantId))}).filter(Boolean);let total,subTotal;const price=variants.reduce((s,v)=>s+v.price,0),{active_discount,discount}=this.settings;let discountedPrice;if(variants.length===1?discountedPrice=price:active_discount&&discount&&discount.value&&(discount.type==="PERCENTAGE"?discountedPrice=price*(100-discount.value)/100:discount.type==="FIXED_AMOUNT"&&(discountedPrice=price-discount.value*100*variants.length,discountedPrice<0&&(discountedPrice=0))),typeof discountedPrice=="number")total=price,subTotal=discountedPrice;else{const comparePrice=variants.reduce((s,v)=>s+(v.compare_at_price||v.price),0);comparePrice>price&&(total=comparePrice),subTotal=price}const saved=total-subTotal,{money_format}=this,{totalPrice,subTotalPrice,savedBlock,savedPrice}=this.domNodes;subTotalPrice.innerHTML=formatMoney(subTotal,money_format),total?(totalPrice.innerHTML=formatMoney(total,money_format),savedPrice.innerHTML=formatMoney(saved,money_format),savedBlock.classList.remove("hidden"),totalPrice.classList.remove("hidden")):(savedBlock.classList.add("hidden"),totalPrice.classList.add("hidden"))}),(0,defineProperty.Z)(this,"showError",err=>{var _this$domNodes;Notification.show({target:(_this$domNodes=this.domNodes)===null||_this$domNodes===void 0?void 0:_this$domNodes.errorWrapper,method:"appendChild",type:"warning",message:err})}),(0,defineProperty.Z)(this,"toggleLoading",loading=>{if(loading)this.domNodes.atc.appendChild(this.spinner),this.domNodes.atc.classList.add("sf-spinner-loading");else{var _this$spinner;this===null||this===void 0||(_this$spinner=this.spinner)===null||_this$spinner===void 0||_this$spinner.remove(),this.domNodes.atc.classList.remove("sf-spinner-loading")}}),!(!container||!settings))if(this.container=container,this.settings=settings,this.settings.mainProduct=window.spratlyThemeSettings.productHandle,this.handles=[this.settings.mainProduct,...this.settings.products],(_this$handles=this.handles)!==null&&_this$handles!==void 0&&_this$handles.length)this.init().then(()=>{this.setTotalPrices(),this.handleSelectProduct(),this.handleAddToCart()}).catch(err=>console.error("Failed to init product upsell",err));else{var _container$remove;container==null||(_container$remove=container.remove)===null||_container$remove===void 0||_container$remove.call(container)}}}window.spratlyTheme=window.spratlyTheme||{},window.spratlyTheme.ProductBundle=ProductBundle})()})();
//# sourceMappingURL=/s/files/1/0274/4044/7587/t/719/assets/bundle.js.map?v=81470466779210457071685566284
