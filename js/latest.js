var Verdict=function(e){"use strict";const t={testStandard:{variants:[{name:"A",size:10},{name:"B",size:90}]},testRolloutEnable:{rolloutPercentage:100,variants:[{name:"A",size:10},{name:"B",size:90}]},testRolloutDisable:{rolloutPercentage:0,variants:[{name:"A",size:10},{name:"B",size:90}]},Hatchful_Edit_Button:{variants:[{name:"a_control",size:50},{name:"b_edit_buttons",size:50}]},threef_storename_autogen_intl:{variants:[{name:"control",size:20},{name:"storename_autogenerate",size:80}]},threef_storename_autogen_hp:{variants:[{name:"control",size:75},{name:"storename_autogenerated",size:25}]},login_with_shop_dummy:{rolloutPercentage:100,variants:[{name:"control",size:50},{name:"treatment",size:50}]},login_with_shop_experiment:{rolloutPercentage:100,variants:[{name:"control",size:50},{name:"treatment",size:50}]},login_with_shop_1p_experiment:{rolloutPercentage:100,variants:[{name:"control",size:50},{name:"treatment",size:50}]},"handshake-featured-sorting-in-supplier-page":{rolloutPercentage:100,variants:[{name:"control",size:50},{name:"treatment",size:50}]},show_dynamic_checkout_button_pdp:{rolloutPercentage:100,variants:[{name:"control",size:50},{name:"test",size:50}]},show_dynamic_checkout_button_pdp_aa_test:{rolloutPercentage:100,variants:[{name:"control",size:50},{name:"test",size:50}]},en_3f_trial_usp_v1:{rolloutPercentage:100,variants:[{name:"3f_without_trial_usp",size:50},{name:"3f_with_trial_usp",size:50}]},address_validation_dec22:{rolloutPercentage:100,variants:[{name:"handle_0",size:50},{name:"handle_1",size:50}]},checkout_increase_shop_pay_awareness_experiment:{rolloutPercentage:100,variants:[{name:"control",size:15},{name:"remember_me_faster_checkouts_with_shop_pay",size:17},{name:"remember_me_address_payment_and_faster_checkouts",size:17},{name:"remember_me_address_payment_and_faster_checkouts_with_shop_pay",size:17},{name:"remember_me_faster_checkouts_and_thousand_shops",size:17},{name:"remember_me_faster_checkouts_and_thousand_shops_with_shop_pay",size:17}]},planet_app_badge_aa_test:{variants:[{name:"control",size:50},{name:"test",size:50}]},planet_app_badge_ab_test:{variants:[{name:"control",size:50},{name:"test",size:50}]},signup_code_red_holdout:{rolloutPercentage:100,variants:[{name:"control",size:5},{name:"exposure",size:95}]},signup_ideal_first_step:{rolloutPercentage:100,variants:[{name:"control",size:33},{name:"channel_question",size:33},{name:"store_name",size:34}]},sq_starter_plan_segmentation:{rolloutPercentage:100,variants:[{name:"control",size:34},{name:"everything_deselected",size:33},{name:"online_store_preselected",size:33}]},sq_starter_plan_segmentation_v2:{rolloutPercentage:100,variants:[{name:"control",size:50},{name:"getting_started_gives_starter_plan",size:50}]},nascar_rank_and_drawer:{rolloutPercentage:0,variants:[{name:"control",size:33},{name:"drawer",size:33},{name:"drawer_with_shop_pay_emphasis",size:34}]},signup_business_model_questions:{rolloutPercentage:100,variants:[{name:"control",size:50},{name:"display_business_model_questions",size:50}]},signup_questionnaire_audience_questions:{rolloutPercentage:100,variants:[{name:"control",size:20},{name:"exposure_two_audience_questions",size:40},{name:"exposure_four_audience_questions",size:40}]},autocomplete_japan:{rolloutPercentage:100,variants:[{name:"control",size:50},{name:"test",size:50}]},guest_checkout_bopis_sales_to_thousand_locations:{rolloutPercentage:0,variants:[{name:"control",size:50},{name:"test",size:50}]},shop_pay_bopis_sales_to_thousand_locations:{rolloutPercentage:0,variants:[{name:"control",size:50},{name:"test",size:50}]},bopis_pick_up_location_expandable_shop_pay:{rolloutPercentage:100,variants:[{name:"control",size:50},{name:"test",size:50}]},bopis_pick_up_location_expandable_guest_checkout:{rolloutPercentage:100,variants:[{name:"control",size:50},{name:"test",size:50}]}};var n,r,o={exports:{}},s={exports:{}};n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var o=e[r]<<16|e[r+1]<<8|e[r+2],s=0;s<4;s++)8*r+6*s<=8*e.length?t.push(n.charAt(o>>>6*(3-s)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,o=0;r<e.length;o=++r%4)0!=o&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|n.indexOf(e.charAt(r))>>>6-2*o);return t}},s.exports=r;var a={utf8:{stringToBytes:function(e){return a.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(a.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}},i=a,u=function(e){return null!=e&&(l(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&l(e.slice(0,0))}(e)||!!e._isBuffer)};function l(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}!function(){var e=s.exports,t=i.utf8,n=u,r=i.bin,a=function(o,s){o.constructor==String?o=s&&"binary"===s.encoding?r.stringToBytes(o):t.stringToBytes(o):n(o)?o=Array.prototype.slice.call(o,0):Array.isArray(o)||o.constructor===Uint8Array||(o=o.toString());for(var i=e.bytesToWords(o),u=8*o.length,l=1732584193,_=-271733879,c=-1732584194,m=271733878,p=0;p<i.length;p++)i[p]=16711935&(i[p]<<8|i[p]>>>24)|4278255360&(i[p]<<24|i[p]>>>8);i[u>>>5]|=128<<u%32,i[14+(u+64>>>9<<4)]=u;var g=a._ff,h=a._gg,d=a._hh,f=a._ii;for(p=0;p<i.length;p+=16){var z=l,v=_,b=c,y=m;l=g(l,_,c,m,i[p+0],7,-680876936),m=g(m,l,_,c,i[p+1],12,-389564586),c=g(c,m,l,_,i[p+2],17,606105819),_=g(_,c,m,l,i[p+3],22,-1044525330),l=g(l,_,c,m,i[p+4],7,-176418897),m=g(m,l,_,c,i[p+5],12,1200080426),c=g(c,m,l,_,i[p+6],17,-1473231341),_=g(_,c,m,l,i[p+7],22,-45705983),l=g(l,_,c,m,i[p+8],7,1770035416),m=g(m,l,_,c,i[p+9],12,-1958414417),c=g(c,m,l,_,i[p+10],17,-42063),_=g(_,c,m,l,i[p+11],22,-1990404162),l=g(l,_,c,m,i[p+12],7,1804603682),m=g(m,l,_,c,i[p+13],12,-40341101),c=g(c,m,l,_,i[p+14],17,-1502002290),l=h(l,_=g(_,c,m,l,i[p+15],22,1236535329),c,m,i[p+1],5,-165796510),m=h(m,l,_,c,i[p+6],9,-1069501632),c=h(c,m,l,_,i[p+11],14,643717713),_=h(_,c,m,l,i[p+0],20,-373897302),l=h(l,_,c,m,i[p+5],5,-701558691),m=h(m,l,_,c,i[p+10],9,38016083),c=h(c,m,l,_,i[p+15],14,-660478335),_=h(_,c,m,l,i[p+4],20,-405537848),l=h(l,_,c,m,i[p+9],5,568446438),m=h(m,l,_,c,i[p+14],9,-1019803690),c=h(c,m,l,_,i[p+3],14,-187363961),_=h(_,c,m,l,i[p+8],20,1163531501),l=h(l,_,c,m,i[p+13],5,-1444681467),m=h(m,l,_,c,i[p+2],9,-51403784),c=h(c,m,l,_,i[p+7],14,1735328473),l=d(l,_=h(_,c,m,l,i[p+12],20,-1926607734),c,m,i[p+5],4,-378558),m=d(m,l,_,c,i[p+8],11,-2022574463),c=d(c,m,l,_,i[p+11],16,1839030562),_=d(_,c,m,l,i[p+14],23,-35309556),l=d(l,_,c,m,i[p+1],4,-1530992060),m=d(m,l,_,c,i[p+4],11,1272893353),c=d(c,m,l,_,i[p+7],16,-155497632),_=d(_,c,m,l,i[p+10],23,-1094730640),l=d(l,_,c,m,i[p+13],4,681279174),m=d(m,l,_,c,i[p+0],11,-358537222),c=d(c,m,l,_,i[p+3],16,-722521979),_=d(_,c,m,l,i[p+6],23,76029189),l=d(l,_,c,m,i[p+9],4,-640364487),m=d(m,l,_,c,i[p+12],11,-421815835),c=d(c,m,l,_,i[p+15],16,530742520),l=f(l,_=d(_,c,m,l,i[p+2],23,-995338651),c,m,i[p+0],6,-198630844),m=f(m,l,_,c,i[p+7],10,1126891415),c=f(c,m,l,_,i[p+14],15,-1416354905),_=f(_,c,m,l,i[p+5],21,-57434055),l=f(l,_,c,m,i[p+12],6,1700485571),m=f(m,l,_,c,i[p+3],10,-1894986606),c=f(c,m,l,_,i[p+10],15,-1051523),_=f(_,c,m,l,i[p+1],21,-2054922799),l=f(l,_,c,m,i[p+8],6,1873313359),m=f(m,l,_,c,i[p+15],10,-30611744),c=f(c,m,l,_,i[p+6],15,-1560198380),_=f(_,c,m,l,i[p+13],21,1309151649),l=f(l,_,c,m,i[p+4],6,-145523070),m=f(m,l,_,c,i[p+11],10,-1120210379),c=f(c,m,l,_,i[p+2],15,718787259),_=f(_,c,m,l,i[p+9],21,-343485551),l=l+z>>>0,_=_+v>>>0,c=c+b>>>0,m=m+y>>>0}return e.endian([l,_,c,m])};a._ff=function(e,t,n,r,o,s,a){var i=e+(t&n|~t&r)+(o>>>0)+a;return(i<<s|i>>>32-s)+t},a._gg=function(e,t,n,r,o,s,a){var i=e+(t&r|n&~r)+(o>>>0)+a;return(i<<s|i>>>32-s)+t},a._hh=function(e,t,n,r,o,s,a){var i=e+(t^n^r)+(o>>>0)+a;return(i<<s|i>>>32-s)+t},a._ii=function(e,t,n,r,o,s,a){var i=e+(n^(t|~r))+(o>>>0)+a;return(i<<s|i>>>32-s)+t},a._blocksize=16,a._digestsize=16,o.exports=function(t,n){if(null==t)throw new Error("Illegal argument "+t);var o=e.wordsToBytes(a(t,n));return n&&n.asBytes?o:n&&n.asString?r.bytesToString(o):e.bytesToHex(o)}}();var _=o.exports;class c{constructor(e,t=10){this.value=16===t?`0x${e}`:e}modulo(e){return this.value=BigInt(this.value)%BigInt(e),this}toNumber(){return Number(this.value)}}const m=(e,t,n,r)=>{"subjectId"in t?e.produce({schemaId:"experiment_assignments/1.0",payload:{subjectId:t.subjectId,experiment:n,group:r,sourceApp:""}}):"shopId"in t&&"userToken"in t?e.produce({schemaId:"experiment_assignments_merchant_owned_pii/1.0",payload:{userToken:t.userToken,sessionToken:t.sessionToken,shopId:t.shopId,experiment:n,group:r,sourceApp:""}}):"userToken"in t&&e.produce({schemaId:"experiment_assignments_shopify_owned_pii/1.1",payload:{userToken:t.userToken,sessionToken:t.sessionToken,experiment:n,group:r,sourceApp:""}})},p=(e,t,n)=>{if(n?.useMD5){return((e,t,n="")=>{const r=_(`${e}${t}${n}`);return new c(r,16).modulo(100).toNumber()})(t,e)}const r=e+t;let o=0;for(let e=0;e<r.length;e++)o=(o<<5)-o+r.charCodeAt(e)|0;return Math.abs(o%100)},g=(e,n,r)=>{const o=t[n];if(!o)return null;if(void 0!==o.rolloutPercentage){if(0===o.rolloutPercentage)return null;const t=p(e,`_${n}`,r);if(o.rolloutPercentage<t)return null}return((e,t)=>{let n=0;for(const r of t)if(n+=r.size,n>e)return r.name;return null})(p(e,n,r),o.variants)};return e.Verdict=class{constructor(e){this.logger=e,this.logger=e}getVariant(e,t,n){const r=g(t.subjectId,e,n);return r?(this.logger&&m(this.logger,t,e,r),r):null}getVariantForMerchantOwnedPiiUserTokenSubject(e,t,n){const r=g(t.userToken,e,n);return r?(this.logger&&m(this.logger,t,e,r),r):null}getVariantForShopifyOwnedPiiUserTokenSubject(e,t,n){const r=g(t.userToken,e,n);return r?(this.logger&&m(this.logger,t,e,r),r):null}},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
