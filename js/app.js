(function(){var __webpack_modules__={4558:function(__unused_webpack_module2,__webpack_exports__2,__webpack_require__2){__webpack_require__2.r(__webpack_exports__2),__webpack_require__2.d(__webpack_exports__2,{AmyrisTheme:function(){return AmyrisTheme},AmyrisThemeSettings:function(){return AmyrisThemeSettings},AmyrisThemeStrings:function(){return AmyrisThemeStrings},_ThemeEvent:function(){return _ThemeEvent}});const AmyrisTheme=window.spratlyTheme||{},AmyrisThemeSettings=window.spratlyThemeSettings||{},AmyrisThemeStrings=window.spratlyThemeStrings||{},_ThemeEvent=window._ThemeEvent||{}},6295:function(__unused_webpack_module2,__webpack_exports__2,__webpack_require__2){__webpack_require__2.r(__webpack_exports__2);var mdn_polyfills_Node_prototype_append_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__2(2422),mdn_polyfills_Node_prototype_append_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__2.n(mdn_polyfills_Node_prototype_append_js__WEBPACK_IMPORTED_MODULE_0__);class JSX{constructor(){return this.component=this.component.bind(this),this.component}component(tagName,attrs,...children){if(typeof tagName=="function")return tagName({...attrs,children});children&&(children=children.filter(val=>val!==null)),attrs&&(attrs.class&&(attrs.className=attrs.class),delete attrs.children);function createWithAttrs(tagName2,attrs2){attrs2=attrs2||{};let elem2=document.createElement(tagName2);try{elem2=Object.assign(elem2,attrs2)}catch{const attrKeys=Object.keys(attrs2);for(let i=0;i<attrKeys.length;i++)attrs2[i]!=="dataSet"&&elem2.setAttribute(attrKeys[i],attrs2[attrKeys[i]])}return elem2}let elem=tagName!=="fragment"?createWithAttrs(tagName,attrs):document.createDocumentFragment();if(["svg","path","rect","text","circle","g"].indexOf(tagName)!==-1){elem=document.createElementNS("http://www.w3.org/2000/svg",tagName);for(const key in attrs){const attrName=key==="className"?"class":key;elem.setAttribute(attrName,attrs[key])}}for(const child of children)Array.isArray(child)?elem.append(...child):elem.append(child);if(attrs!=null&&attrs.dataSet)for(const key in attrs.dataSet)Object.prototype.hasOwnProperty.call(attrs.dataSet,key)&&(elem.dataset[key]=attrs.dataSet[key]);return attrs&&!window.__aleartedJSXData&&Object.keys(attrs).find(key=>key.match(/^data-/))&&(console.trace(`Your "${tagName}" component uses a data-* attribute! Use dataSet instead!!`),alert("Do not use data-* in your JSX component! Use dataSet instead!! - Check the console.trace for more info"),window.__aleartedJSXData=!0),attrs!=null&&attrs.ref&&(typeof attrs.ref=="function"?attrs.ref(elem):attrs.ref=elem),attrs!=null&&attrs.on&&Object.entries(attrs.on).forEach(([event,handler])=>{elem.addEventListener(event,handler)}),attrs!=null&&attrs.style&&Object.entries(attrs.style).forEach(([property,value])=>{elem.style.setProperty(property,value)}),elem}}__webpack_exports__2.default=new JSX},6662:function(__unused_webpack_module2,__webpack_exports__2,__webpack_require__2){__webpack_require__2.r(__webpack_exports__2),__webpack_require__2.d(__webpack_exports__2,{getRequestDefaultConfigs:function(){return getRequestDefaultConfigs2},fetchJSON:function(){return fetchJSON},fetchCache:function(){return fetchCache2},fetchSection:function(){return fetchSection},fetchJsonCache:function(){return fetchJsonCache}});var createElement=__webpack_require__2(6295).default;const requestDefaultConfigs={mode:"same-origin",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}};function getRequestDefaultConfigs2(){return JSON.parse(JSON.stringify(requestDefaultConfigs))}const fetchJSON=(url,config=getRequestDefaultConfigs2())=>fetch(url,config).then(function(response){if(!response.ok)throw response;return response.json()}),cache=new Map,fetchCache2=(url,config=getRequestDefaultConfigs2())=>new Promise((resolve,reject)=>{let cached=cache.get(url);if(cached)return resolve(cached);fetch(url,config).then(res=>{cached=res.text(),cache.set(url,cached),resolve(cached)}).catch(reject)}),sectionCache=new Map,fetchSection=(sectionId,fetchFromCache=!1,params={})=>new Promise((resolve,reject)=>{const url=new URL(window.location.href);if(url.searchParams.set("section_id",sectionId),Object.entries(params).forEach(([k,v])=>url.searchParams.set(k,v)),fetchFromCache){const cached=sectionCache.get(url);if(cached)return resolve(cached)}fetch(url,getRequestDefaultConfigs2()).then(res=>res.text()).then(html=>{const div=createElement("div",null);div.innerHTML=html,sectionCache.set(url,div),resolve(div)}).catch(reject)}),cache2=new Map,fetchJsonCache=(url,config=requestDefaultConfigs)=>new Promise((resolve,reject)=>{if(cache2.get(url))return resolve(cache2.get(url));fetch(url,config).then(res=>{if(res.ok){const json=res.json();return resolve(json),cache2.set(url,json),json}else reject(res)}).catch(reject)})},5118:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){const{getRequestDefaultConfigs}=__webpack_require__(6662),Shopify=window.Shopify||{};Shopify.onError=function(XMLHttpRequest,textStatus){var data=eval("("+XMLHttpRequest.responseText+")");data.message?alert(data.message+"("+data.status+"): "+data.description):alert("Error : "+Shopify.fullMessagesFromErrors(data).join("; ")+".")},Shopify.fullMessagesFromErrors=function(errors){var fullMessages=[];return Array.from(errors).forEach(function(messages,attribute){Array.from(messages).forEach(function(message,index){fullMessages.push(attribute+" "+message)})}),fullMessages},Shopify.onCartUpdate=async function(cart,open_drawer=!0){try{const{_ThemeEvent,spratlyTheme:{Cart}}=window;Cart&&(cart||(await Cart.refreshCart(),cart=Cart.cart),open_drawer&&(await Cart.renderNewCart(),Cart.openCartDrawer()),_ThemeEvent.emit("ON_CART_UPDATE",cart),console.info(`There are now ${cart.item_count} items in the cart. Should open drawer: ${open_drawer}`))}catch(err){console.error("Failed to trigger Shopify.onCartUpdate()",err)}},Shopify.onCartShippingRatesUpdate=function(rates,shipping_address){var readable_address="";shipping_address.zip&&(readable_address+=shipping_address.zip+", "),shipping_address.province&&(readable_address+=shipping_address.province+", "),readable_address+=shipping_address.country,alert("There are "+rates.length+" shipping rates available for "+readable_address+", starting at "+Shopify.formatMoney(rates[0].price)+".")},Shopify.checkIfIsAddingProduct=(cart,updatedLineItem)=>{if(!cart||!updatedLineItem)return!1;const productInCart=cart.items.find(cartLine=>cartLine.variant_id===updatedLineItem.id&&cartLine.line_level_discount_allocations.length===0);return!!(!productInCart||productInCart&&productInCart.quantity<updatedLineItem.quantity)},Shopify.processGWP=async(newCart,lineItem,isAddingProduct,hadDiscountProductInLastCart=!1)=>{const bogoBuyProducts=$("body").data("bogo-buy-products"),bogoFreeProductQuantity=$("body").data("bogo-free-product-quantity"),bogoFreeProductVariantId=$("body").data("bogo-free-product-variant-id");if(bogoBuyProducts&&(bogoFreeProductQuantity!=="nil"?parseInt(bogoFreeProductQuantity):10)>0&&newCart.items.length>0){let hasBogoBuyProductInCart=!1,hasFreeProductInCart=!1;newCart.items.forEach(item=>{Shopify.findValueInArray(item.variant_id,bogoBuyProducts)&&(hasBogoBuyProductInCart=!0),(item.properties&&item.properties.isGWP||!item.selling_plan_allocation&&item.variant_id===bogoFreeProductVariantId)&&(hasFreeProductInCart=item)});const shouldAddItem=hasBogoBuyProductInCart&&!hadDiscountProductInLastCart&&!hasFreeProductInCart;if(shouldAddItem){const addObject={items:[{id:bogoFreeProductVariantId,quantity:1}]};return await $.ajax({url:"/cart/add.js",dataType:"json",type:"post",data:addObject,success:function(cb){this.updateCartCount&&this.updateCartCount(cb),console.log("GWP added successfully.")}})}const shouldRemoveItem=!hasBogoBuyProductInCart&&hadDiscountProductInLastCart&&hasFreeProductInCart;if(shouldRemoveItem){const removeObject={id:hasFreeProductInCart.key,quantity:hasFreeProductInCart.quantity-1};return await $.ajax({url:"/cart/change.js",dataType:"json",type:"post",data:removeObject,success:function(cb){this.updateCartCount&&this.updateCartCount(cb),console.log("GWP removed successfully.")}})}if(hasBogoBuyProductInCart&&(shouldAddItem||shouldRemoveItem))return!0}const spendXgetYThreshold=$("body").data("gwp-spendxgety-threshold"),spendXgetYFreeProduct=$("body").data("gwp-spendxgety-free-product"),spendXgetYFreeProductQuantity=$("body").data("gwp-spendxgety-free-product-quantity"),spendXgetYFreeProductQuantityThreshold=$("body").data("gwp-spendxgety-free-product-quantity-threshold");if(spendXgetYFreeProduct){const parsedFreeProductQuantity=spendXgetYFreeProductQuantity!=="nil"?parseInt(spendXgetYFreeProductQuantity):10;if(parsedFreeProductQuantity<=parseInt(spendXgetYFreeProductQuantityThreshold))return;if(parsedFreeProductQuantity>0&&newCart.items.length>0){let hasFreeProductInCart=!1,hasFreeProductWithDiscountInCart=!1;newCart.items.forEach(item=>{!item.selling_plan_allocation&&item.variant_id===spendXgetYFreeProduct&&(hasFreeProductInCart=item,(item.properties&&item.properties.isGWP||item.line_level_discount_allocations.length>0)&&(hasFreeProductWithDiscountInCart=item))});const lineItemBeingAddedIsTheFreeProduct=hasFreeProductInCart&&lineItem.id===hasFreeProductInCart.variant_id,shouldAddItem=newCart.total_price>=spendXgetYThreshold&&(!hasFreeProductInCart||lineItemBeingAddedIsTheFreeProduct)&&!hasFreeProductWithDiscountInCart&&!hadDiscountProductInLastCart;if(shouldAddItem){const addObject={items:[{id:spendXgetYFreeProduct,quantity:1}]};return await $.ajax({url:"/cart/add.js",dataType:"json",type:"post",data:addObject,success:function(cb){this.updateCartCount&&this.updateCartCount(cb),console.log("GWP added successfully.")}})}const shouldRemoveItem=!isAddingProduct&&hadDiscountProductInLastCart&&hasFreeProductInCart&&!hasFreeProductWithDiscountInCart;if(shouldRemoveItem){const removeObject={id:hasFreeProductInCart.key,quantity:hasFreeProductInCart.quantity-1};return await $.ajax({url:"/cart/change.js",dataType:"json",type:"post",data:removeObject,success:function(cb){this.updateCartCount&&this.updateCartCount(cb),console.log("GWP removed successfully.")}})}if(newCart.total_price>=spendXgetYThreshold&&(shouldRemoveItem||shouldAddItem))return!0}}},Shopify.findValueInArray=function(pId,commaSeparated){let arr=commaSeparated.split(","),result=!1;for(let i=0;i<arr.length;i++)if(pId===parseInt($.trim(arr[i]))){result=!0;break}return result},Shopify.onItemAdded=async(line_item,open_drawer=!0,oldCart=!1)=>{console.info("New item added to cart: ",line_item,`Should open drawer: ${open_drawer}`);const new_cart2=await Shopify.getCart(),hadDiscountProductInLastCart=oldCart&&oldCart.items&&oldCart.items.length>0&&oldCart.items.find(product=>product.line_level_discount_allocations.length>0);await Shopify.processGWP(new_cart2,line_item,!0,hadDiscountProductInLastCart);try{let cart={total_price:new_cart2.total_price/100,$value:new_cart2.total_price/100,total_discount:new_cart2.total_discount,original_total_price:new_cart2.original_total_price/100,items:new_cart2.items,itemAdded:line_item!=="undefined"?line_item:""};klaviyoAddedToCart(cart)}catch(err){console.warn("Error while trying to send added to cart event",err)}try{var _ThemeEvent$emit;const{_ThemeEvent,spratlyTheme:{Cart,Notification}}=window;if(_ThemeEvent==null||(_ThemeEvent$emit=_ThemeEvent.emit)===null||_ThemeEvent$emit===void 0||_ThemeEvent$emit.call(_ThemeEvent,"ON_ITEM_ADDED",line_item),Cart){if(await Cart.refreshCart(),open_drawer){var _Cart$domNodes,_window,_window$spratlyThemeS;await Cart.renderNewCart(),Cart.openCartDrawer(),Notification.show({target:(_Cart$domNodes=Cart.domNodes)===null||_Cart$domNodes===void 0?void 0:_Cart$domNodes.cartDrawerItems,method:"prepend",type:"success",message:(_window=window)===null||_window===void 0||(_window$spratlyThemeS=_window.spratlyThemeStrings)===null||_window$spratlyThemeS===void 0?void 0:_window$spratlyThemeS.itemAdded,delay:400})}await Shopify.onCartUpdate(Cart.cart,!1)}}catch(err){console.warn("Failed to execute Shopify.onItemAdded()",err)}},Shopify.onProduct=function(product){alert("Received everything we ever wanted to know about "+product.title)},Shopify.formatMoney=function(cents,format){typeof cents=="string"&&(cents=cents.replace(".",""));var value="",placeholderRegex=/\{\{\s*(\w+)\s*\}\}/,formatString=format||this.money_format;function defaultOption(opt,def){return typeof opt>"u"?def:opt}function formatWithDelimiters(number,precision,thousands,decimal){if(precision=defaultOption(precision,2),thousands=defaultOption(thousands,","),decimal=defaultOption(decimal,"."),isNaN(number)||number==null)return 0;number=(number/100).toFixed(precision);var parts=number.split("."),dollars=parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+thousands),cents2=parts[1]?decimal+parts[1]:"";return dollars+cents2}switch(formatString.match(placeholderRegex)[1]){case"amount":value=formatWithDelimiters(cents,2);break;case"amount_no_decimals":value=formatWithDelimiters(cents,0);break;case"amount_with_comma_separator":value=formatWithDelimiters(cents,2,".",",");break;case"amount_no_decimals_with_comma_separator":value=formatWithDelimiters(cents,0,".",",");break}return formatString.replace(placeholderRegex,value)},Shopify.resizeImage=function(image,size){try{if(size==="original")return image;var matches=image.match(/(.*\/[\w\-_.]+)\.(\w{2,4})/);return matches[1]+"_"+size+"."+matches[2]}catch{return image}},Shopify.addItem=function(variant_id,quantity,callback){console.info("// TODO: Implement Shopify.addItem function!")},Shopify.addItemFromForm=function(form_id,callback){console.info("// TODO: Implement Shopify.addItemFromForm function!")},Shopify.getCart=async function(){return new_cart=$.getJSON("/cart.js"),new_cart},Shopify.pollForCartShippingRatesForDestination=function(shippingAddress,callback,errback){console.info("// TODO: Implement Shopify.pollForCartShippingRatesForDestination function!")},Shopify.getCartShippingRatesForDestination=function(shippingAddress,callback,errback){console.info("// TODO: Implement Shopify.getCartShippingRatesForDestination function!")},Shopify.getProduct=function(handle,callback){console.info("// TODO: Implement Shopify.getProduct function!")},Shopify.changeItem=function(variant_id,quantity,callback){console.info("// TODO: Implement Shopify.changeItem function!")},Shopify.removeItem=function(variant_id,callback){console.info("// TODO: Implement Shopify.removeItem function!")},Shopify.clear=async function(removeAttributes=!1){try{await Promise.all([await fetch("/cart/clear.js"),removeAttributes&&await fetch("/cart/update.js",{...getRequestDefaultConfigs(),method:"POST",body:JSON.stringify({attributes:{_beautyCartDiscounts:null}})})])}catch(error){console.error("Failed to clear cart. ",error)}},Shopify.updateCartFromForm=function(form_id,callback){console.info("// TODO: Implement Shopify.updateCartFromForm function!")},Shopify.updateCartAttributes=function(attributes,callback){console.info("// TODO: Implement Shopify.updateCartAttributes function!")},Shopify.updateCartNote=function(note,callback){console.info("// TODO: Implement Shopify.updateCartNote function!")}},9367:function(module){(function(t,e){module.exports=e()})(this,function(){return(()=>{var t={d:(e2,o2)=>{for(var a2 in o2)t.o(o2,a2)&&!t.o(e2,a2)&&Object.defineProperty(e2,a2,{enumerable:!0,get:o2[a2]})},o:(t2,e2)=>Object.prototype.hasOwnProperty.call(t2,e2),r:t2=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t2,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t2,"__esModule",{value:!0})}},e={};function o(t2,e2){if(!(t2 instanceof e2))throw new TypeError("Cannot call a class as a function")}function a(t2,e2){for(var o2=0;o2<e2.length;o2++){var a2=e2[o2];a2.enumerable=a2.enumerable||!1,a2.configurable=!0,"value"in a2&&(a2.writable=!0),Object.defineProperty(t2,a2.key,a2)}}function i(t2,e2,o2){return e2 in t2?Object.defineProperty(t2,e2,{value:o2,enumerable:!0,configurable:!0,writable:!0}):t2[e2]=o2,t2}t.r(e),t.d(e,{default:()=>s});var s=function(){function t2(e3){var a2=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,t2),i(this,"selectors",{loadingBar:"al-loading-bar",loadingOverlay:"al-loading-overlay"}),i(this,"defaultOptions",{overlay:null,overlayShowClass:"overlay-show",thickness:"3px",color:"gray",startDuration:1e3,finishDuration:300}),this.options=Object.assign({},this.defaultOptions,a2),this.target=e3,this.overlay=this.options.overlay||this.target,this.cleanUp=this.cleanUp.bind(this),this.setLoadingData()}var e2,s2;return e2=t2,s2=[{key:"setLoadingData",value:function(){var t3=this.overlay,e3=this.options,o2=e3.startDuration,a2=e3.finishDuration,i2=e3.thickness,s3=e3.color;t3.style.setProperty("--al-thickness"," ".concat(i2)),t3.style.setProperty("--al-color"," ".concat(s3)),t3.style.setProperty("--al-start-duration"," ".concat(o2,"ms")),t3.style.setProperty("--al-finish-duration"," ".concat(a2,"ms"))}},{key:"start",value:function(withOverlay=!0){this.target.classList.add(this.selectors.loadingBar,"start","loading"),withOverlay&&this.overlay.classList.add(this.selectors.loadingOverlay,this.options.overlayShowClass)}},{key:"finish",value:function(){var t3=this,e3=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},o2=this.target,a2=this.overlay,i2=this.cleanUp,s3=this.options.finishDuration,n=window.getComputedStyle(o2,":before").width;o2.style.setProperty("--al-end-width",n),o2.classList.add("loaded"),o2.classList.remove("loading"),window.requestAnimationFrame(function(){o2.classList.add("finished"),a2.classList.remove(t3.options.overlayShowClass)}),setTimeout(i2,2*s3),setTimeout(e3,s3)}},{key:"cleanUp",value:function(){this.target.classList.remove(this.selectors.loadingBar,"start","loaded","finished"),this.overlay.classList.remove(this.selectors.loadingOverlay)}}],s2&&a(e2.prototype,s2),Object.defineProperty(e2,"prototype",{writable:!1}),t2}();return e})()})},3578:function(module,__unused_webpack_exports2,__webpack_require__2){var QueryHandler=__webpack_require__2(3745),each=__webpack_require__2(2178).each;function MediaQuery(query,isUnconditional){this.query=query,this.isUnconditional=isUnconditional,this.handlers=[],this.mql=window.matchMedia(query);var self=this;this.listener=function(mql){self.mql=mql.currentTarget||mql,self.assess()},this.mql.addListener(this.listener)}MediaQuery.prototype={constuctor:MediaQuery,addHandler:function(handler){var qh=new QueryHandler(handler);this.handlers.push(qh),this.matches()&&qh.on()},removeHandler:function(handler){var handlers=this.handlers;each(handlers,function(h,i){if(h.equals(handler))return h.destroy(),!handlers.splice(i,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){each(this.handlers,function(handler){handler.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var action=this.matches()?"on":"off";each(this.handlers,function(handler){handler[action]()})}},module.exports=MediaQuery},6227:function(module,__unused_webpack_exports2,__webpack_require__2){var MediaQuery=__webpack_require__2(3578),Util=__webpack_require__2(2178),each=Util.each,isFunction=Util.isFunction,isArray=Util.isArray;function MediaQueryDispatch(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}MediaQueryDispatch.prototype={constructor:MediaQueryDispatch,register:function(q,options,shouldDegrade){var queries=this.queries,isUnconditional=shouldDegrade&&this.browserIsIncapable;return queries[q]||(queries[q]=new MediaQuery(q,isUnconditional)),isFunction(options)&&(options={match:options}),isArray(options)||(options=[options]),each(options,function(handler){isFunction(handler)&&(handler={match:handler}),queries[q].addHandler(handler)}),this},unregister:function(q,handler){var query=this.queries[q];return query&&(handler?query.removeHandler(handler):(query.clear(),delete this.queries[q])),this}},module.exports=MediaQueryDispatch},3745:function(module){function QueryHandler(options){this.options=options,!options.deferSetup&&this.setup()}QueryHandler.prototype={constructor:QueryHandler,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(target){return this.options===target||this.options.match===target}},module.exports=QueryHandler},2178:function(module){function each(collection,fn){var i=0,length=collection.length,cont;for(i;i<length&&(cont=fn(collection[i],i),cont!==!1);i++);}function isArray(target){return Object.prototype.toString.apply(target)==="[object Array]"}function isFunction(target){return typeof target=="function"}module.exports={isFunction,isArray,each}},1179:function(module,__unused_webpack_exports2,__webpack_require__2){var MediaQueryDispatch=__webpack_require__2(6227);module.exports=new MediaQueryDispatch},1339:function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null})},2297:function(){(function(){function t(){var e=Array.prototype.slice.call(arguments),r=document.createDocumentFragment();e.forEach(function(e2){var t2=e2 instanceof Node;r.appendChild(t2?e2:document.createTextNode(String(e2)))}),this.parentNode.insertBefore(r,this.nextSibling)}[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("after")||Object.defineProperty(e,"after",{configurable:!0,enumerable:!0,writable:!0,value:t})})})()},2422:function(){(function(){function t(){var e=Array.prototype.slice.call(arguments),n=document.createDocumentFragment();e.forEach(function(e2){var t2=e2 instanceof Node;n.appendChild(t2?e2:document.createTextNode(String(e2)))}),this.appendChild(n)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:t})})})()},598:function(){(function(){function t(){var e=Array.prototype.slice.call(arguments),n=document.createDocumentFragment();e.forEach(function(e2){var t2=e2 instanceof Node;n.appendChild(t2?e2:document.createTextNode(String(e2)))}),this.insertBefore(n,this.firstChild)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:t})})})()},1713:function(){(function(){var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function t(){var e,t2=this.parentNode,o=arguments.length;if(t2)for(o||t2.removeChild(this);o--;)((e=arguments[o])===void 0?"undefined":r(e))!=="object"?e=this.ownerDocument.createTextNode(e):e.parentNode&&e.parentNode.removeChild(e),o?t2.insertBefore(this.previousSibling,e):t2.replaceChild(e,this)}[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("replaceWith")||Object.defineProperty(e,"replaceWith",{configurable:!0,enumerable:!0,writable:!0,value:t})})})()},643:function(module){var COMPLETE="complete",CANCELED="canceled";function raf(task){if("requestAnimationFrame"in window)return window.requestAnimationFrame(task);setTimeout(task,16)}function setElementScroll(element,x,y){Math.max(0,x),Math.max(0,y),element.self===element?element.scrollTo(x,y):(element.scrollLeft=x,element.scrollTop=y)}function getTargetScrollLocation(scrollSettings,parent){var align=scrollSettings.align,target=scrollSettings.target,targetPosition=target.getBoundingClientRect(),parentPosition,x,y,differenceX,differenceY,targetWidth,targetHeight,leftAlign=align&&align.left!=null?align.left:.5,topAlign=align&&align.top!=null?align.top:.5,leftOffset=align&&align.leftOffset!=null?align.leftOffset:0,topOffset=align&&align.topOffset!=null?align.topOffset:0,leftScalar=leftAlign,topScalar=topAlign;if(scrollSettings.isWindow(parent))targetWidth=Math.min(targetPosition.width,parent.innerWidth),targetHeight=Math.min(targetPosition.height,parent.innerHeight),x=targetPosition.left+parent.pageXOffset-parent.innerWidth*leftScalar+targetWidth*leftScalar,y=targetPosition.top+parent.pageYOffset-parent.innerHeight*topScalar+targetHeight*topScalar,x-=leftOffset,y-=topOffset,x=scrollSettings.align.lockX?parent.pageXOffset:x,y=scrollSettings.align.lockY?parent.pageYOffset:y,differenceX=x-parent.pageXOffset,differenceY=y-parent.pageYOffset;else{targetWidth=targetPosition.width,targetHeight=targetPosition.height,parentPosition=parent.getBoundingClientRect();var offsetLeft=targetPosition.left-(parentPosition.left-parent.scrollLeft),offsetTop=targetPosition.top-(parentPosition.top-parent.scrollTop);x=offsetLeft+targetWidth*leftScalar-parent.clientWidth*leftScalar,y=offsetTop+targetHeight*topScalar-parent.clientHeight*topScalar,x-=leftOffset,y-=topOffset,x=Math.max(Math.min(x,parent.scrollWidth-parent.clientWidth),0),y=Math.max(Math.min(y,parent.scrollHeight-parent.clientHeight),0),x=scrollSettings.align.lockX?parent.scrollLeft:x,y=scrollSettings.align.lockY?parent.scrollTop:y,differenceX=x-parent.scrollLeft,differenceY=y-parent.scrollTop}return{x,y,differenceX,differenceY}}function animate(parent){var scrollSettings=parent._scrollSettings;if(scrollSettings){var maxSynchronousAlignments=scrollSettings.maxSynchronousAlignments,location2=getTargetScrollLocation(scrollSettings,parent),time=Date.now()-scrollSettings.startTime,timeValue=Math.min(1/scrollSettings.time*time,1);if(scrollSettings.endIterations>=maxSynchronousAlignments)return setElementScroll(parent,location2.x,location2.y),parent._scrollSettings=null,scrollSettings.end(COMPLETE);var easeValue=1-scrollSettings.ease(timeValue);if(setElementScroll(parent,location2.x-location2.differenceX*easeValue,location2.y-location2.differenceY*easeValue),time>=scrollSettings.time){scrollSettings.endIterations++,scrollSettings.scrollAncestor&&animate(scrollSettings.scrollAncestor),animate(parent);return}raf(animate.bind(null,parent))}}function defaultIsWindow(target){return target.self===target}function transitionScrollTo(target,parent,settings,scrollAncestor,callback){var idle=!parent._scrollSettings,lastSettings=parent._scrollSettings,now=Date.now(),cancelHandler,passiveOptions={passive:!0};lastSettings&&lastSettings.end(CANCELED);function end(endType){parent._scrollSettings=null,parent.parentElement&&parent.parentElement._scrollSettings&&parent.parentElement._scrollSettings.end(endType),settings.debug&&console.log("Scrolling ended with type",endType,"for",parent),callback(endType),cancelHandler&&(parent.removeEventListener("touchstart",cancelHandler,passiveOptions),parent.removeEventListener("wheel",cancelHandler,passiveOptions))}var maxSynchronousAlignments=settings.maxSynchronousAlignments;return maxSynchronousAlignments==null&&(maxSynchronousAlignments=3),parent._scrollSettings={startTime:now,endIterations:0,target,time:settings.time,ease:settings.ease,align:settings.align,isWindow:settings.isWindow||defaultIsWindow,maxSynchronousAlignments,end,scrollAncestor},(!("cancellable"in settings)||settings.cancellable)&&(cancelHandler=end.bind(null,CANCELED),parent.addEventListener("touchstart",cancelHandler,passiveOptions),parent.addEventListener("wheel",cancelHandler,passiveOptions)),idle&&animate(parent),cancelHandler}function defaultIsScrollable(element){return"pageXOffset"in element||(element.scrollHeight!==element.clientHeight||element.scrollWidth!==element.clientWidth)&&getComputedStyle(element).overflow!=="hidden"}function defaultValidTarget(){return!0}function findParentElement(el){if(el.assignedSlot)return findParentElement(el.assignedSlot);if(el.parentElement)return el.parentElement.tagName==="BODY"?el.parentElement.ownerDocument.defaultView||el.parentElement.ownerDocument.ownerWindow:el.parentElement;if(el.getRootNode){var parent=el.getRootNode();if(parent.nodeType===11)return parent.host}}module.exports=function(target,settings,callback){if(!target)return;typeof settings=="function"&&(callback=settings,settings=null),settings||(settings={}),settings.time=isNaN(settings.time)?1e3:settings.time,settings.ease=settings.ease||function(v){return 1-Math.pow(1-v,v/2)},settings.align=settings.align||{};var parent=findParentElement(target),parents=1;function done(endType){parents--,parents||callback&&callback(endType)}var validTarget=settings.validTarget||defaultValidTarget,isScrollable=settings.isScrollable;settings.debug&&(console.log("About to scroll to",target),parent||console.error("Target did not have a parent, is it mounted in the DOM?"));for(var scrollingElements=[];parent;)if(settings.debug&&console.log("Scrolling parent node",parent),validTarget(parent,parents)&&(isScrollable?isScrollable(parent,defaultIsScrollable):defaultIsScrollable(parent))&&(parents++,scrollingElements.push(parent)),parent=findParentElement(parent),!parent){done(COMPLETE);break}return scrollingElements.reduce((cancel,parent2,index)=>transitionScrollTo(target,parent2,settings,scrollingElements[index+1],done),null)}}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==void 0)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.exports}(function(){__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,{a:getter}),getter}})(),function(){__webpack_require__.d=function(exports,definition){for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})}}(),function(){__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}(),function(){__webpack_require__.r=function(exports){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})}}();var __webpack_exports__={};(function(){var SECTION_ID_ATTR="data-section-id";function Section(container,properties){this.container=validateContainerElement(container),this.id=container.getAttribute(SECTION_ID_ATTR),this.extensions=[],Object.assign(this,validatePropertiesObject(properties)),this.onLoad()}Section.prototype={onLoad:Function.prototype,onUnload:Function.prototype,onSelect:Function.prototype,onDeselect:Function.prototype,onBlockSelect:Function.prototype,onBlockDeselect:Function.prototype,extend:function(extension){this.extensions.push(extension);var extensionClone=Object.assign({},extension);delete extensionClone.init,Object.assign(this,extensionClone),typeof extension.init=="function"&&extension.init.apply(this)}};function validateContainerElement(container){if(!(container instanceof Element))throw new TypeError("Theme Sections: Attempted to load section. The section container provided is not a DOM element.");if(container.getAttribute(SECTION_ID_ATTR)===null)throw new Error("Theme Sections: The section container provided does not have an id assigned to the "+SECTION_ID_ATTR+" attribute.");return container}function validatePropertiesObject(value){if(typeof value<"u"&&typeof value!="object"||value===null)throw new TypeError("Theme Sections: The properties object provided is not a valid");return value}typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(target){if(target==null)throw new TypeError("Cannot convert undefined or null to object");for(var to=Object(target),index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null)for(var nextKey in nextSource)Object.prototype.hasOwnProperty.call(nextSource,nextKey)&&(to[nextKey]=nextSource[nextKey])}return to},writable:!0,configurable:!0});var SECTION_TYPE_ATTR="data-section-type",theme_sections_SECTION_ID_ATTR="data-section-id";window.Shopify=window.Shopify||{},window.Shopify.theme=window.Shopify.theme||{},window.Shopify.theme.sections=window.Shopify.theme.sections||{};var registered=window.Shopify.theme.sections.registered=window.Shopify.theme.sections.registered||{},instances=window.Shopify.theme.sections.instances=window.Shopify.theme.sections.instances||[];function register(type,properties){if(typeof type!="string")throw new TypeError("Theme Sections: The first argument for .register must be a string that specifies the type of the section being registered");if(typeof registered[type]<"u")throw new Error('Theme Sections: A section of type "'+type+'" has already been registered. You cannot register the same section type twice');function TypedSection(container){Section.call(this,container,properties)}return TypedSection.constructor=Section,TypedSection.prototype=Object.create(Section.prototype),TypedSection.prototype.type=type,registered[type]=TypedSection}function unregister(types){types=normalizeType(types),types.forEach(function(type){delete registered[type]})}function load(types,containers){types=normalizeType(types),typeof containers>"u"&&(containers=document.querySelectorAll("["+SECTION_TYPE_ATTR+"]")),containers=normalizeContainers(containers),types.forEach(function(type){var TypedSection=registered[type];typeof TypedSection>"u"||(containers=containers.filter(function(container){return isInstance(container)||container.getAttribute(SECTION_TYPE_ATTR)===null?!1:container.getAttribute(SECTION_TYPE_ATTR)!==type?!0:(instances.push(new TypedSection(container)),!1)}))})}function unload(selector){var instancesToUnload=getInstances(selector);instancesToUnload.forEach(function(instance){var index=instances.map(function(e){return e.id}).indexOf(instance.id);instances.splice(index,1),instance.onUnload()})}function extend(selector,extension){var instancesToExtend=getInstances(selector);instancesToExtend.forEach(function(instance){instance.extend(extension)})}function getInstances(selector){var filteredInstances=[];if(NodeList.prototype.isPrototypeOf(selector)||Array.isArray(selector))var firstElement=selector[0];if(selector instanceof Element||firstElement instanceof Element){var containers=normalizeContainers(selector);containers.forEach(function(container){filteredInstances=filteredInstances.concat(instances.filter(function(instance){return instance.container===container}))})}else if(typeof selector=="string"||typeof firstElement=="string"){var types=normalizeType(selector);types.forEach(function(type){filteredInstances=filteredInstances.concat(instances.filter(function(instance){return instance.type===type}))})}return filteredInstances}function getInstanceById(id){for(var instance,i=0;i<instances.length;i++)if(instances[i].id===id){instance=instances[i];break}return instance}function isInstance(selector){return getInstances(selector).length>0}function normalizeType(types){return types==="*"?types=Object.keys(registered):typeof types=="string"?types=[types]:types.constructor===Section?types=[types.prototype.type]:Array.isArray(types)&&types[0].constructor===Section&&(types=types.map(function(TypedSection){return TypedSection.prototype.type})),types=types.map(function(type){return type.toLowerCase()}),types}function normalizeContainers(containers){return NodeList.prototype.isPrototypeOf(containers)&&containers.length>0?containers=Array.prototype.slice.call(containers):NodeList.prototype.isPrototypeOf(containers)&&containers.length===0?containers=[]:containers===null?containers=[]:!Array.isArray(containers)&&containers instanceof Element&&(containers=[containers]),containers}window.Shopify.designMode&&(document.addEventListener("shopify:section:load",function(event){var id=event.detail.sectionId,container=event.target.querySelector("["+theme_sections_SECTION_ID_ATTR+'="'+id+'"]');container!==null&&load(container.getAttribute(SECTION_TYPE_ATTR),container)}),document.addEventListener("shopify:section:unload",function(event){var id=event.detail.sectionId,container=event.target.querySelector("["+theme_sections_SECTION_ID_ATTR+'="'+id+'"]'),instance=getInstances(container)[0];typeof instance=="object"&&unload(container)}),document.addEventListener("shopify:section:select",function(event){var instance=getInstanceById(event.detail.sectionId);typeof instance=="object"&&instance.onSelect(event)}),document.addEventListener("shopify:section:deselect",function(event){var instance=getInstanceById(event.detail.sectionId);typeof instance=="object"&&instance.onDeselect(event)}),document.addEventListener("shopify:block:select",function(event){var instance=getInstanceById(event.detail.sectionId);typeof instance=="object"&&instance.onBlockSelect(event)}),document.addEventListener("shopify:block:deselect",function(event){var instance=getInstanceById(event.detail.sectionId);typeof instance=="object"&&instance.onBlockDeselect(event)}));function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function validateQuery(query2){var error;if(query2==null)throw error=new TypeError("'query' is missing"),error.type="argument",error;if(typeof query2!="string")throw error=new TypeError("'query' is not a string"),error.type="argument",error}function GenericError(){var error=Error.call(this);return error.name="Server error",error.message="Something went wrong on the server",error.status=500,error}function NotFoundError(status){var error=Error.call(this);return error.name="Not found",error.message="Not found",error.status=status,error}function ServerError(){var error=Error.call(this);return error.name="Server error",error.message="Something went wrong on the server",error.status=500,error}function ContentTypeError(status){var error=Error.call(this);return error.name="Content-Type error",error.message="Content-Type was not provided or is of wrong type",error.status=status,error}function JsonParseError(status){var error=Error.call(this);return error.name="JSON parse error",error.message="JSON syntax error",error.status=status,error}function ThrottledError(status,name,message,retryAfter){var error=Error.call(this);return error.name=name,error.message=message,error.status=status,error.retryAfter=retryAfter,error}function InvalidParameterError(status,name,message){var error=Error.call(this);return error.name=name,error.message=message,error.status=status,error}function ExpectationFailedError(status,name,message){var error=Error.call(this);return error.name=name,error.message=message,error.status=status,error}function request(searchPath,configParams,query2,onSuccess,onError){var xhr=new XMLHttpRequest,route=searchPath+"/suggest.json";xhr.onreadystatechange=function(){if(xhr.readyState===XMLHttpRequest.DONE){var contentType=xhr.getResponseHeader("Content-Type");if(xhr.status>=500){onError(new ServerError);return}if(xhr.status===404){onError(new NotFoundError(xhr.status));return}if(typeof contentType!="string"||contentType.toLowerCase().match("application/json")===null){onError(new ContentTypeError(xhr.status));return}if(xhr.status===417){try{var invalidParameterJson=JSON.parse(xhr.responseText);onError(new InvalidParameterError(xhr.status,invalidParameterJson.message,invalidParameterJson.description))}catch{onError(new JsonParseError(xhr.status))}return}if(xhr.status===422){try{var expectationFailedJson=JSON.parse(xhr.responseText);onError(new ExpectationFailedError(xhr.status,expectationFailedJson.message,expectationFailedJson.description))}catch{onError(new JsonParseError(xhr.status))}return}if(xhr.status===429){try{var throttledJson=JSON.parse(xhr.responseText);onError(new ThrottledError(xhr.status,throttledJson.message,throttledJson.description,xhr.getResponseHeader("Retry-After")))}catch{onError(new JsonParseError(xhr.status))}return}if(xhr.status===200){try{var res=JSON.parse(xhr.responseText);res.query=query2,onSuccess(res)}catch{onError(new JsonParseError(xhr.status))}return}try{var genericErrorJson=JSON.parse(xhr.responseText);onError(new GenericError(xhr.status,genericErrorJson.message,genericErrorJson.description))}catch{onError(new JsonParseError(xhr.status))}return}},xhr.open("get",route+"?q="+encodeURIComponent(query2)+"&"+configParams),xhr.setRequestHeader("Content-Type","application/json"),xhr.send()}function debounce(func,wait){var timeout=null;return function(){var context=this,args=arguments;clearTimeout(timeout),timeout=setTimeout(function(){timeout=null,func.apply(context,args)},wait||0)}}function Dispatcher(){this.events={}}Dispatcher.prototype.on=function(eventName,callback){var event=this.events[eventName];event||(event=new DispatcherEvent(eventName),this.events[eventName]=event),event.registerCallback(callback)},Dispatcher.prototype.off=function(eventName,callback){var event=this.events[eventName];event&&event.callbacks.indexOf(callback)>-1&&(event.unregisterCallback(callback),event.callbacks.length===0&&delete this.events[eventName])},Dispatcher.prototype.dispatch=function(eventName,payload){var event=this.events[eventName];event&&event.fire(payload)};function DispatcherEvent(eventName){this.eventName=eventName,this.callbacks=[]}DispatcherEvent.prototype.registerCallback=function(callback){this.callbacks.push(callback)},DispatcherEvent.prototype.unregisterCallback=function(callback){var index=this.callbacks.indexOf(callback);index>-1&&this.callbacks.splice(index,1)},DispatcherEvent.prototype.fire=function(payload){var callbacks=this.callbacks.slice(0);callbacks.forEach(function(callback){callback(payload)})};function Cache(config){this._store={},this._keys=[],config&&config.bucketSize?this.bucketSize=config.bucketSize:this.bucketSize=20}Cache.prototype.set=function(key,value){if(this.count()>=this.bucketSize){var deleteKey=this._keys.splice(0,1);this.delete(deleteKey)}return this._keys.push(key),this._store[key]=value,this._store},Cache.prototype.get=function(key){return this._store[key]},Cache.prototype.has=function(key){return!!this._store[key]},Cache.prototype.count=function(){return Object.keys(this._store).length},Cache.prototype.delete=function(key){var exists=!!this._store[key];return delete this._store[key],exists&&!this._store[key]};function objectToQueryParams(obj,parentKey){var output="";return parentKey=parentKey||null,Object.keys(obj).forEach(function(key){var outputKey=key+"=";switch(parentKey&&(outputKey=parentKey+"["+key+"]"),trueTypeOf(obj[key])){case"object":output+=objectToQueryParams(obj[key],parentKey?outputKey:key);break;case"array":output+=outputKey+"="+obj[key].join(",")+"&";break;default:parentKey&&(outputKey+="="),output+=outputKey+encodeURIComponent(obj[key])+"&";break}}),output}function trueTypeOf(obj){return Object.prototype.toString.call(obj).slice(8,-1).toLowerCase()}var DEBOUNCE_RATE=10,requestDebounced=debounce(request,DEBOUNCE_RATE);function PredictiveSearch(config){if(!config)throw new TypeError("No config object was specified");var configParameters=config;this._retryAfter=null,this._currentQuery=null,this.dispatcher=new Dispatcher,this.cache=new Cache({bucketSize:40}),this.searchPath=configParameters.search_path||"/search",configParameters.search_path&&delete configParameters.search_path,this.configParams=objectToQueryParams(configParameters)}PredictiveSearch.SEARCH_PATH="/search",PredictiveSearch.TYPES={PRODUCT:"product",PAGE:"page",ARTICLE:"article",COLLECTION:"collection"},PredictiveSearch.FIELDS={AUTHOR:"author",BODY:"body",PRODUCT_TYPE:"product_type",TAG:"tag",TITLE:"title",VARIANTS_BARCODE:"variants.barcode",VARIANTS_SKU:"variants.sku",VARIANTS_TITLE:"variants.title",VENDOR:"vendor"},PredictiveSearch.UNAVAILABLE_PRODUCTS={SHOW:"show",HIDE:"hide",LAST:"last"},PredictiveSearch.prototype.query=function(query2){try{validateQuery(query2)}catch(error){this.dispatcher.dispatch("error",error);return}if(query2==="")return this;this._currentQuery=normalizeQuery(query2);var cacheResult=this.cache.get(this._currentQuery);return cacheResult?(this.dispatcher.dispatch("success",cacheResult),this):(requestDebounced(this.searchPath,this.configParams,query2,function(result){this.cache.set(normalizeQuery(result.query),result),normalizeQuery(result.query)===this._currentQuery&&(this._retryAfter=null,this.dispatcher.dispatch("success",result))}.bind(this),function(error){error.retryAfter&&(this._retryAfter=error.retryAfter),this.dispatcher.dispatch("error",error)}.bind(this)),this)},PredictiveSearch.prototype.on=function(eventName,callback){return this.dispatcher.on(eventName,callback),this},PredictiveSearch.prototype.off=function(eventName,callback){return this.dispatcher.off(eventName,callback),this};function normalizeQuery(query2){return typeof query2!="string"?null:query2.trim().replace(" ","-").toLowerCase()}var scrollIntoView=__webpack_require__(643),scrollIntoView_default=__webpack_require__.n(scrollIntoView);const addEventDelegate=({context=document.documentElement,event="click",selector,handler,capture=!1})=>{const listener=function(e){for(let target=e.target;target&&target!==this;target=target.parentNode)if(target.matches(selector)){handler.call(target,e,target);break}};return context.addEventListener(event,listener,capture),()=>{context.removeEventListener(event,listener,capture)}};class events_Event{constructor(){this.events={}}get evts(){return Object.keys(this.events)}subscribe(event,handler){return this.events[event]=this.events[event]||[],this.events[event].push(handler),()=>this.unSubscribe(event,handler)}unSubscribe(event,handler){const handlers=this.events[event];if(handlers&&Array.isArray(handlers)){for(let i=0;i<handlers.length;i++)if(handlers[i]===handler){handlers.splice(i,1);break}}}emit(event,...args){console.groupCollapsed(`Event emitted: ${event}`),console.trace(),console.groupEnd(),(this.events[event]||[]).forEach(handler=>{handler(...args)})}}function loadJS(src2,target=document.body,async=!0,defer=!1){return new Promise((resolve,reject)=>{const doc=target.ownerDocument,currScript=doc.querySelector(`script[src="${src2}"]`);if(currScript){if(currScript.dataset.loaded)return resolve(!0);currScript.addEventListener("load",()=>{currScript.dataset.loaded=!0,resolve(!0)});return}const script=doc.createElement("script");script.src=src2,script.async=async,script.defer=defer,script.addEventListener("load",()=>{script.dataset.loaded=!0,resolve(!0)}),script.onerror=reject,target.appendChild(script)})}function loadCSS(href,target=document.head){return new Promise((resolve,reject)=>{const doc=target.ownerDocument,currLink=doc.querySelector(`link[href="${href}"]`);if(currLink){if(currLink.dataset.loaded)return resolve(!0);currLink.addEventListener("load",()=>{currLink.dataset.loaded=!0,resolve(!0)});return}const link=doc.createElement("link");link.rel="stylesheet",link.href=href,link.addEventListener("load",()=>{link.dataset.loaded=!0,resolve(!0)}),link.onerror=reject,target.appendChild(link)})}const{themeScriptURLs,themeStyleURLs}=window;(!themeScriptURLs||!themeStyleURLs)&&console.warn("Missing Assest URLs source");const themeAssets={js:{urls:themeScriptURLs,load:loadJS},css:{urls:themeStyleURLs,load:loadCSS}};function log(asset){console.groupCollapsed("%c Asset loaded: ","#f7a046",asset),console.trace(),console.groupEnd()}function loadAssets(param){return new Promise((resolve,reject)=>{const files=typeof param=="string"?[param]:param;Promise.all(files.map(async file=>{try{const[,name,type]=file.match(/(.*)\.(js|css)$/)||[,file,"js"],{urls:{[name]:{url}},load:load2}=themeAssets[type];await load2(url),log(`${name}.${type}`)}catch(err){console.warn(`Failed to load asset: ${file}.`,err)}})).then(resolve).catch(reject)})}function initLocalization(){const switchers=document.querySelectorAll("[data-localization-select]");switchers&&switchers.forEach(function(select){select.addEventListener("change",function(e){const value=e.target.value,form=select.closest("[data-localization-form]"),input=form.querySelector("input[data-localization-input]");input&&input.setAttribute("value",value),input&&form.submit()})})}var createElement=__webpack_require__(6295).default;window.__getSectionInstanceByType=type=>window.Shopify.theme.sections.instances.find(inst=>inst.type===type);function productFormCheck(form){const requiredFields=form.querySelectorAll('[data-theme-fields] [name][required]:not([hidden]):not([type="hidden"])'),missingFields=[];return requiredFields.forEach(field=>{if(field.type==="radio"){const raidoButtons=form.querySelectorAll(`input[name="${field.name}"]`);Array.from(raidoButtons).some(btn=>btn.checked)||missingFields.push(field)}else field.value||missingFields.push(field)}),missingFields}function queryDomNodes(selectors2={},context=document){return Object.entries(selectors2).reduce((acc,[name,selector])=>{var _context$queryMethod;const findOne=typeof selector=="string",queryMethod=findOne?"querySelector":"querySelectorAll",sl=findOne?selector:selector[0];return acc[name]=context==null||(_context$queryMethod=context[queryMethod])===null||_context$queryMethod===void 0?void 0:_context$queryMethod.call(context,sl),!findOne&&acc[name]&&(acc[name]=[...acc[name]]),acc},{})}const utilities_camelCaseToSnakeCase=str=>str.replace(/[A-Z]/g,$1=>`_${$1.toLowerCase()}`);function animateReplace(oldNode,newNode){!oldNode||!newNode||(oldNode.classList.add("ar__old-node"),newNode.classList.add("ar__new-node"),oldNode.style.opacity=0,oldNode.replaceWith(newNode),setTimeout(()=>newNode.style.opacity=1))}function createSearchLink(query2){const searchParams=new URLSearchParams({type:"product","options[unavailable_products]":"last","options[prefix]":"last",q:query2});return`${PredictiveSearch.SEARCH_PATH}?${searchParams.toString()}`}function isInViewport(elem){const rect=elem.getBoundingClientRect();return rect.top>0&&rect.top<(window.innerHeight||document.documentElement.clientHeight)}function loadStyles(){const{themeStyleURLs:themeStyleURLs2={}}=window;Object.values(themeStyleURLs2).forEach(style=>{const{url,required,afterWindowLoaded}=style;if(url&&required){var _window;!afterWindowLoaded||(_window=window)!==null&&_window!==void 0&&_window.__sfWindowLoaded?loadCSS(url):window.addEventListener("load",()=>loadCSS(url))}})}function loadScripts(){const{themeScriptURLs:themeScriptURLs2={}}=window;Object.values(themeScriptURLs2).forEach(script=>{const{url,required,afterWindowLoaded}=script;if(url&&required){var _window2;!afterWindowLoaded||(_window2=window)!==null&&_window2!==void 0&&_window2.__sfWindowLoaded?loadJS(url):window.addEventListener("load",()=>loadJS(url))}})}function addCustomerFormHandlers(){if(addEventDelegate({selector:".sf-customer__forms",handler:(e,form)=>{if(e.target.classList.contains("sf-customer__reset-password-btn")){form.classList.add("show-recover-password-form");return}if(e.target.classList.contains("sf-customer__cancel-reset")){form.classList.remove("show-recover-password-form");return}}}),document.querySelector(".sf-customer__recover-form-posted")){var _document$querySelect,_document$querySelect2;(_document$querySelect=document.querySelector(".sf-customer__forms"))===null||_document$querySelect===void 0||(_document$querySelect2=_document$querySelect.classList)===null||_document$querySelect2===void 0||_document$querySelect2.add("show-recover-password-form")}}function getVideoURL(id,host){return host==="youtube"?`https://www.youtube.com/watch?v=${id}&gl=true`:host==="vimeo"?`https://vimeo.com/${id}`:""}function showCookieConsent(){const{show_cookie_consent}=window.adminThemeSettings,cookieAccepted=getCookie("cookieconsent_status");show_cookie_consent&&!cookieAccepted&&loadAssets(["cookieConsent.css","cookieConsent.js"])}function initTermsCheckbox(){addEventDelegate({selector:'.agree-terms [name="agree_terms"]',event:"change",handler:(e,target)=>{const button=target.closest(".agree-terms").nextElementSibling;button&&button.hasAttributes("data-terms-action")&&(target.checked?button.removeAttribute("disabled"):button.setAttribute("disabled",!0))}})}const scrollToTopTarget=document.querySelector("#scroll-to-top-target");function scrollToTop(callback){scrollIntoView_default()(scrollToTopTarget,callback)}function initScrollTop(){const scrollTopButton=document.querySelector("#scroll-to-top-button");scrollTopButton&&(scrollTopButton.addEventListener("click",scrollToTop),window.addEventListener("scroll",function(){const method=window.scrollY>100?"add":"remove";scrollTopButton.classList[method]("opacity-100")}))}function setCookie(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+exdays*24*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"}function getCookie(cname){for(var name=cname+"=",decodedCookie=decodeURIComponent(document.cookie),ca=decodedCookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];c.charAt(0)===" ";)c=c.substring(1);if(c.indexOf(name)===0)return c.substring(name.length,c.length)}return""}function addRecentViewedProduct(handle){let max=20;const saveKey="sf-recent-viewed-products",products=getCookie(saveKey)?JSON.parse(getCookie(saveKey)):[];handle&&!products.includes(handle)&&products.push(handle),setCookie(saveKey,JSON.stringify(products.filter((x,i)=>i<=max-1)))}const generateDomFromString=value=>{const d=createElement("div",null);return d.innerHTML=value,d};function emailIsValid(email){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)}function updateParam(key,value){var{location:location2}=window,baseUrl=[location2.protocol,"//",location2.host,location2.pathname].join("");const queryString=window.location.search,urlParams=new URLSearchParams(queryString);return urlParams.has(key)?(value!==""&&value!=="undefined"&&urlParams.set(key,value),(value===""||value==="undefined")&&urlParams.delete(key)):value&&urlParams.append(key,value),window.history.replaceState({},"",baseUrl+"?"+urlParams.toString()),!1}function getParams(){let params={};const queryString=window.location.search,urlParams=new URLSearchParams(queryString);for(const entry of urlParams.entries())params[entry[0]]=entry[1];return params}function runHelpers(){try{loadScripts(),loadStyles(),showCookieConsent(),initTermsCheckbox(),initLocalization(),addCustomerFormHandlers(),initScrollTop()}catch(err){console.error("Failed to run helpers.",err)}}class Megamenu{constructor(container){_defineProperty(this,"selectors",{hamburgerButtons:[".sf-menu-button"],menuWrapper:".sf-menu-wrapper",menu:".sf-menu-content",links:[".sf-link"],userSection:".sf-customer-section",desktopMenuItems:[".sf-menu-item"],desktopSubMenus:".sf-menu__desktop-sub-menu"}),_defineProperty(this,"menuSelectors",{subMenu:".sf-menu__desktop-sub-menu"}),_defineProperty(this,"signInTabSelectors",{button:".my-account-btn.signin",header:".tab-header input.signin",content:".tab-content.signin"}),_defineProperty(this,"registerTabSelectors",{button:".my-account-btn.register",header:".tab-header input.register",content:".tab-content.register"}),_defineProperty(this,"activeDesktopMenuItem",null),_defineProperty(this,"sliders",{}),_defineProperty(this,"closeDesktopSubmenu",menuItemIndex=>{var _header$classList;const menuItem=this.menuData[menuItemIndex],{header}=menuItem;header==null||(_header$classList=header.classList)===null||_header$classList===void 0||_header$classList.remove("show-menu")}),this.container=container,this.transitionDuration=300,this.domNodes=queryDomNodes(this.selectors),this.menuData=[...this.domNodes.desktopMenuItems].map(item=>{const header=item.closest("header"),menuNodes=queryDomNodes(this.menuSelectors,item);return{header,item,...menuNodes,active:!1}}),this.domNodes.userSection&&(this.accountTabs={signin:queryDomNodes(this.signInTabSelectors,this.container),register:queryDomNodes(this.registerTabSelectors,this.container)},this.domNodes.closeBtn=this.domNodes.userSection.querySelector(".close-btn")),this.init(),window.spratlyTheme=window.spratlyTheme||{},window.spratlyTheme.headerSliders=this.sliders}init(){[...this.domNodes.hamburgerButtons].forEach(btn=>{btn.addEventListener("click",()=>{document.documentElement.classList.add("prevent-scroll"),this.openMenu()})}),this.domNodes.menuWrapper.addEventListener("click",e=>{e.target===this.domNodes.menuWrapper&&this.closeMenu()}),this.initMobileMegaMenu(),this.domNodes.userSection&&this.initUserSection(),this.initDesktopMegaMenu()}initDesktopMegaMenu(){[...this.menuData].forEach(menuItem=>{const{item,subMenu}=menuItem;if(subMenu){const productsBanner=subMenu.querySelector(".sf-mega-menu-products");if(productsBanner){var _window;(_window=window)!==null&&_window!==void 0&&_window.__sfWindowLoaded?menuItem.productsBannerSlider=this.initProductsBanner(productsBanner):window.addEventListener("load",()=>{menuItem.productsBannerSlider=this.initProductsBanner(productsBanner)})}}})}initProductsBanner(banner){var _header$dataset;const header=banner.closest("header"),menuItem=banner.closest(".sf-menu-item"),screenClass=`.${header==null||(_header$dataset=header.dataset)===null||_header$dataset===void 0?void 0:_header$dataset.screen}`||"",id=banner.dataset.id,columns=document.querySelector(`.sf-slider-${id}`).dataset.column;let slider;loadAssets(["swiper.css","swiper.js"]).then(()=>{if(slider=new window.spratlyTheme.Swiper(`${screenClass} .sf-slider-${id}`,{slidesPerView:1,loop:!1,autoplay:!1,breakpoints:{1200:{slidesPerView:columns},992:{slidesPerView:columns>=2?2:columns}}}),this.sliders[menuItem.dataset.index]=slider,slider){const prevBtn=document.querySelector(`#sf-slider-controls-${id} .sf-slider__controls-prev`),nextBtn=document.querySelector(`#sf-slider-controls-${id} .sf-slider__controls-next`);prevBtn&&prevBtn.addEventListener("click",()=>slider.slidePrev()),nextBtn&&nextBtn.addEventListener("click",()=>slider.slideNext())}})}initMobileMegaMenu(){[...this.domNodes.links].forEach(link=>{const subLinks=link.querySelector(".sf-sub-links"),backBtn=link.querySelector(".back");if(subLinks){var _link$querySelector;(_link$querySelector=link.querySelector(".sf__toggle-submenu-mb"))===null||_link$querySelector===void 0||_link$querySelector.addEventListener("click",e=>{const parentNode=e.target.parentNode;e.target.classList.contains("back")||parentNode.classList.contains("back")||this.openSubMenu(subLinks)})}backBtn&&backBtn.addEventListener("click",()=>this.closeSubMenu(subLinks))})}initUserSection(){document.body.appendChild(this.domNodes.userSection);let activeTab=this.accountTabs.signin.content;Object.values(this.accountTabs).forEach(({button,header,content})=>{header.addEventListener("click",()=>{activeTab.classList.add("hidden"),content.classList.remove("hidden"),activeTab=content}),button.addEventListener("click",()=>{header.click(),this.domNodes.userSection.classList.add("-translate-x-full"),this.closeMenu()})}),this.domNodes.closeBtn.addEventListener("click",()=>{this.domNodes.userSection.classList.remove("-translate-x-full")})}openMenu(){const{menuWrapper}=this.domNodes;menuWrapper.style.setProperty("--window-inner-height",`${window.innerHeight}px`),menuWrapper.classList.remove("hidden"),setTimeout(()=>{menuWrapper.style.setProperty("--tw-bg-opacity","0.3"),menuWrapper.firstElementChild.classList.remove("-translate-x-full")})}closeMenu(){const{menuWrapper,menu}=this.domNodes;menuWrapper.style.setProperty("--tw-bg-opacity","0"),menuWrapper.firstElementChild.classList.add("-translate-x-full"),setTimeout(()=>{menuWrapper.classList.add("hidden"),document.documentElement.classList.remove("prevent-scroll"),menu.classList.remove("sf-sub-menu-open"),menu.classList.remove("-translate-x-full")},this.transitionDuration)}openSubMenu(subLinks){subLinks.classList.add("flex"),subLinks.classList.remove("hidden"),this.domNodes.menu.classList.add("-translate-x-full"),setTimeout(()=>{this.domNodes.menu.classList.add("sf-sub-menu-open")},this.transitionDuration)}closeSubMenu(subLinks){this.domNodes.menu.classList.remove("sf-sub-menu-open"),this.domNodes.menu.classList.remove("-translate-x-full"),setTimeout(()=>{subLinks.classList.add("hidden")},this.transitionDuration)}}class SiteNav{constructor(container){_defineProperty(this,"selectors",{menuItems:[".sf-nav .sf-menu-item"],dropdowns:[".sf-menu__submenu"],subMenu:".sf-menu__submenu",dropdownBg:".sf-nav__bg",overlay:".sf-header__overlay",swiper:".swiper-container"}),_defineProperty(this,"classes",{slideFromRight:"slide-from-right",slideReveal:"slide-reveal",active:"sf-mega-active"}),_defineProperty(this,"headerSticky",!1),_defineProperty(this,"attachEvents",()=>{this.domNodes.menuItems.forEach((menuItem,index)=>{menuItem.addEventListener("mouseenter",evt=>this.onMenuItemEnter(evt,index)),menuItem.addEventListener("mouseleave",evt=>this.onMenuItemLeave(evt,index))})}),_defineProperty(this,"initDropdownSize",()=>{var _this$container,_this$container2;(_this$container=this.container)===null||_this$container===void 0||_this$container.style.setProperty("--sf-dropdown-width",this.windowWidth()),(_this$container2=this.container)===null||_this$container2===void 0||_this$container2.style.setProperty("--sf-dropdown-height",this.windowHeight())}),_defineProperty(this,"onMenuItemEnter",(evt,index)=>{var _target$dataset,_this$container3,_this$container4,_this$container5,_this$container6,_this$container7;const{target}=evt;target.classList.contains("sf-menu-item--no-mega")||(clearTimeout(this.timeoutLeave),this.activeIndex=Number((_target$dataset=target.dataset)===null||_target$dataset===void 0?void 0:_target$dataset.index),this.headerSticky=((_this$container3=this.container)===null||_this$container3===void 0?void 0:_this$container3.dataset.sticky)==="true",this.reInitSlider(target),this.visited?(_this$container4=this.container)===null||_this$container4===void 0||_this$container4.classList.remove(this.classes.slideReveal):(_this$container5=this.container)===null||_this$container5===void 0||_this$container5.classList.add(this.classes.slideReveal),this.visited=!0,this.lastActiveIndex>=0&&this.activeIndex>=0&&(this.lastActiveIndex<this.activeIndex?(_this$container6=this.container)===null||_this$container6===void 0||_this$container6.classList.add(this.classes.slideFromRight):this.lastActiveIndex>this.activeIndex&&((_this$container7=this.container)===null||_this$container7===void 0||_this$container7.classList.remove(this.classes.slideFromRight))),this.getElementBoundingRect(target).then(rect=>{if(rect){var _this$container8,_this$container9;(_this$container8=this.container)===null||_this$container8===void 0||_this$container8.style.setProperty("--sf-dropdown-width",rect.width),(_this$container9=this.container)===null||_this$container9===void 0||_this$container9.style.setProperty("--sf-dropdown-height",rect.height)}this.timeoutEnter=setTimeout(()=>{var _this$container10;this.activeIndex===Number(target.dataset.index)&&((_this$container10=this.container)===null||_this$container10===void 0||_this$container10.classList.add(this.classes.active),target.closest(".sf-menu-item").classList.add("sf-menu-item--active"))},120)}))}),_defineProperty(this,"onMenuItemLeave",(evt,index)=>{this.activeIndex=-1,this.lastActiveIndex=index,evt.target.closest(".sf-menu-item").classList.remove("sf-menu-item--active"),this.timeoutLeave=setTimeout(()=>{(this.activeIndex===-1||this.activeIndex<0)&&(this.visited=!1),this.resetMegaMenu(evt.target)},80)}),_defineProperty(this,"reInitSlider",menuItem=>{var _window,_window$spratlyTheme;if(!menuItem.querySelector(this.selectors.swiper))return;const itemIndex=menuItem.dataset.index,slider=(_window=window)===null||_window===void 0||(_window$spratlyTheme=_window.spratlyTheme)===null||_window$spratlyTheme===void 0?void 0:_window$spratlyTheme.headerSliders[itemIndex];slider?.update()}),_defineProperty(this,"getElementBoundingRect",async element=>{const subMenu=element.querySelector(this.selectors.subMenu);if(subMenu){const rect=subMenu.getBoundingClientRect();return{width:rect.width,height:rect.height,left:rect.left,top:rect.top}}}),_defineProperty(this,"resetMegaMenu",()=>{var _this$container11;this.activeIndex=-1,clearTimeout(this.timeoutEnter),(_this$container11=this.container)===null||_this$container11===void 0||_this$container11.classList.remove(this.classes.active,this.classes.slideFromRight,this.classes.slideReveal,"sf-header--bg-black","sf-header--bg-white")}),_defineProperty(this,"windowWidth",()=>window.innerWidth),_defineProperty(this,"windowHeight",()=>window.innerHeight),_defineProperty(this,"destroy",()=>{this.domNodes.menuItems.forEach((menuItem,index)=>{menuItem.removeEventListener("mouseenter",evt=>this.onMenuItemEnter(evt,index)),menuItem.removeEventListener("mouseleave",evt=>this.onMenuItemLeave(evt,index))})}),container&&(this.container=container,this.domNodes=queryDomNodes(this.selectors,this.container),this.activeIndex=-1,this.lastActiveIndex=-1,this.visited=!1,this.timeoutEnter=null,this.timeoutLeave=null,this.attachEvents())}}function initCustomSelect(container){let x,i,j,l,ll,selElmnt,a,b,c,ar,at;if(x=container.getElementsByClassName("sf__custom-select"),l=x.length,x.length>0)for(i=0;i<l;i++){var _selElmnt$options$sel;for(selElmnt=x[i].getElementsByTagName("select")[0],ll=selElmnt.length,a=document.createElement("DIV"),a.setAttribute("class","select-selected"),at=document.createElement("SPAN"),at.innerHTML=(_selElmnt$options$sel=selElmnt.options[selElmnt.selectedIndex])===null||_selElmnt$options$sel===void 0?void 0:_selElmnt$options$sel.innerHTML,x[i].appendChild(a),a.appendChild(at),ar=document.createElement("SPAN"),ar.innerHTML='<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M441.9 167.3l-19.8-19.8c-4.7-4.7-12.3-4.7-17 0L224 328.2 42.9 147.5c-4.7-4.7-12.3-4.7-17 0L6.1 167.3c-4.7 4.7-4.7 12.3 0 17l209.4 209.4c4.7 4.7 12.3 4.7 17 0l209.4-209.4c4.7-4.7 4.7-12.3 0-17z"/></svg>',ar.setAttribute("class","select-arrow"),a.appendChild(ar),b=document.createElement("DIV"),b.setAttribute("class","select-items select-hide"),j=0;j<ll;j++)c=document.createElement("DIV"),c.innerHTML=selElmnt.options[j].innerHTML,selElmnt.options[j].getAttribute("selected")&&c.setAttribute("class","same-as-selected"),c.addEventListener("click",function(e){let y,i2,k,s,h,sl,yl;for(s=this.parentNode.parentNode.getElementsByTagName("select")[0],sl=s.length,h=this.parentNode.previousSibling,i2=0;i2<sl;i2++)if(s.options[i2].innerHTML==this.innerHTML){for(s.selectedIndex=i2,h.childNodes[0].innerHTML=this.innerHTML,y=this.parentNode.getElementsByClassName("same-as-selected"),yl=y.length,k=0;k<yl;k++)y[k].removeAttribute("class");this.setAttribute("class","same-as-selected");break}s.dispatchEvent(new Event("change")),s.dispatchEvent(new Event("click")),h.click()}),b.appendChild(c);x[i].appendChild(b),a.addEventListener("click",function(e){e.stopPropagation(),closeAllSelect(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")})}}function closeAllSelect(elmnt){var x,y,i,xl,yl,arrNo=[];for(x=document.getElementsByClassName("select-items"),y=document.getElementsByClassName("select-selected"),xl=x.length,yl=y.length,i=0;i<yl;i++)elmnt==y[i]?arrNo.push(i):y[i].classList.remove("select-arrow-active");for(i=0;i<xl;i++)arrNo.indexOf(i)&&x[i].classList.add("select-hide")}document.addEventListener("click",closeAllSelect),register("header",{onLoad:function(){var _this$container,_this$container$datas,_this$container2,_this$container2$data;this.isDesignMode=((_this$container=this.container)===null||_this$container===void 0||(_this$container$datas=_this$container.dataset)===null||_this$container$datas===void 0?void 0:_this$container$datas.designMode)==="true",this.selectors={headers:["header"],logos:[".sf-logo"],topbar:".sf-topbar",headerWrapper:".header__wrapper",topbarClose:".sf-topbar__close"},initCustomSelect(this.container),this.domNodes=queryDomNodes(this.selectors,this.container),this.innerWidth=window.innerWidth,this.offsetTop=this.domNodes.headerWrapper.offsetTop,this.headerHeight=this.domNodes.headerWrapper.offsetHeight,this.stickyEnabled=((_this$container2=this.container)===null||_this$container2===void 0||(_this$container2$data=_this$container2.dataset)===null||_this$container2$data===void 0?void 0:_this$container2$data.sticky)==="true"||!1,this.classes={scrollUp:"scroll-up",scrollDown:"scroll-down",stuck:"stuck"};try{var _this$domNodes,_this$domNodes$header,_this$domNodes$header2,_this$domNodes$header3,_window,_window$_shh,_window2,_window2$_smcp;if(this.transparentHeader=((_this$domNodes=this.domNodes)===null||_this$domNodes===void 0||(_this$domNodes$header=_this$domNodes.headers)===null||_this$domNodes$header===void 0||(_this$domNodes$header2=_this$domNodes$header[0])===null||_this$domNodes$header2===void 0||(_this$domNodes$header3=_this$domNodes$header2.dataset)===null||_this$domNodes$header3===void 0?void 0:_this$domNodes$header3.transparent)==="true",this.initAddon(),this.handleSticky(),this.siteNav=new SiteNav(this.container),(_window=window)===null||_window===void 0||(_window$_shh=_window._shh)===null||_window$_shh===void 0||_window$_shh.call(_window),(_window2=window)===null||_window2===void 0||(_window2$_smcp=_window2._smcp)===null||_window2$_smcp===void 0||_window2$_smcp.call(_window2),this.container.style.opacity=1,window.__sfHeader=this,window.addEventListener("resize",()=>{this.innerWidth=window.innerWidth}),this.transparentHeader&&this.innerWidth>1280){var _this$domNodes$header4,_this$domNodes$header5;(_this$domNodes$header4=this.domNodes.headerWrapper)===null||_this$domNodes$header4===void 0||(_this$domNodes$header5=_this$domNodes$header4.classList)===null||_this$domNodes$header5===void 0||_this$domNodes$header5.add("transparent-on-top")}else{var _this$domNodes$header6,_this$domNodes$header7;(_this$domNodes$header6=this.domNodes.headerWrapper)===null||_this$domNodes$header6===void 0||(_this$domNodes$header7=_this$domNodes$header6.classList)===null||_this$domNodes$header7===void 0||_this$domNodes$header7.remove("transparent-on-top")}}catch(error){console.error("Failed to init header section.",error)}},initAddon:function(){if(this.megamenu=new Megamenu(this.container),this.isDesignMode){var _window$spratlyTheme,_window$spratlyTheme$,_window$spratlyTheme$2,_window$spratlyTheme2,_window$spratlyTheme3,_window$spratlyTheme4,_window$spratlyTheme5,_window$spratlyTheme6,_window$spratlyTheme7,_window$spratlyTheme8,_window$spratlyTheme9,_window$spratlyTheme10,_window$spratlyTheme11,_window$spratlyTheme12,_window$spratlyTheme13;window.spratlyTheme=window.spratlyTheme||{},(_window$spratlyTheme=window.spratlyTheme)===null||_window$spratlyTheme===void 0||(_window$spratlyTheme$=_window$spratlyTheme.Wishlist)===null||_window$spratlyTheme$===void 0||(_window$spratlyTheme$2=_window$spratlyTheme$.updateWishlistCount)===null||_window$spratlyTheme$2===void 0||_window$spratlyTheme$2.call(_window$spratlyTheme$),(_window$spratlyTheme2=window.spratlyTheme)===null||_window$spratlyTheme2===void 0||(_window$spratlyTheme3=_window$spratlyTheme2.Currency)===null||_window$spratlyTheme3===void 0||(_window$spratlyTheme4=_window$spratlyTheme3.queryDomNodes)===null||_window$spratlyTheme4===void 0||_window$spratlyTheme4.call(_window$spratlyTheme3),(_window$spratlyTheme5=window.spratlyTheme)===null||_window$spratlyTheme5===void 0||(_window$spratlyTheme6=_window$spratlyTheme5.Currency)===null||_window$spratlyTheme6===void 0||(_window$spratlyTheme7=_window$spratlyTheme6.addEventToCurrenySwitchers)===null||_window$spratlyTheme7===void 0||_window$spratlyTheme7.call(_window$spratlyTheme6),(_window$spratlyTheme8=window.spratlyTheme)===null||_window$spratlyTheme8===void 0||(_window$spratlyTheme9=_window$spratlyTheme8.Search)===null||_window$spratlyTheme9===void 0||(_window$spratlyTheme10=_window$spratlyTheme9.queryDomNodes)===null||_window$spratlyTheme10===void 0||_window$spratlyTheme10.call(_window$spratlyTheme9),(_window$spratlyTheme11=window.spratlyTheme)===null||_window$spratlyTheme11===void 0||(_window$spratlyTheme12=_window$spratlyTheme11.Search)===null||_window$spratlyTheme12===void 0||(_window$spratlyTheme13=_window$spratlyTheme12.init)===null||_window$spratlyTheme13===void 0||_window$spratlyTheme13.call(_window$spratlyTheme12)}},handleSticky:function(){var _window3;let extraSpace=((_window3=window)===null||_window3===void 0?void 0:_window3.spratlyThemeSettings.template)==="product"?20:50;if(!this.stickyEnabled)return;let lastScroll=0;this.offsetTop===0&&this.container.classList.add(this.classes.stuck),window.addEventListener("scroll",()=>{const currentScroll=window.pageYOffset;if(currentScroll<=this.offsetTop){if(this.container.classList.remove(this.classes.scrollUp,this.classes.stuck),this.transparentHeader&&this.innerWidth>1279){var _this$domNodes$header8,_this$domNodes$header9,_this$domNodes$header10;(_this$domNodes$header8=this.domNodes.headerWrapper)===null||_this$domNodes$header8===void 0||(_this$domNodes$header9=_this$domNodes$header8.classList)===null||_this$domNodes$header9===void 0||(_this$domNodes$header10=_this$domNodes$header9.add)===null||_this$domNodes$header10===void 0||_this$domNodes$header10.call(_this$domNodes$header9,"transparent-on-top")}return}if(this.container.classList.add(this.classes.stuck),currentScroll>this.headerHeight+extraSpace&&currentScroll>lastScroll&&!this.container.classList.contains(this.classes.scrollDown))this.container.classList.remove(this.classes.scrollUp),this.container.classList.add(this.classes.scrollDown);else if(currentScroll<lastScroll&&this.container.classList.contains(this.classes.scrollDown)&&(this.container.classList.remove(this.classes.scrollDown),this.container.classList.add(this.classes.scrollUp),this.transparentHeader&&this.innerWidth>1279)){var _this$domNodes$header11,_this$domNodes$header12,_this$domNodes$header13;(_this$domNodes$header11=this.domNodes.headerWrapper)===null||_this$domNodes$header11===void 0||(_this$domNodes$header12=_this$domNodes$header11.classList)===null||_this$domNodes$header12===void 0||(_this$domNodes$header13=_this$domNodes$header12.remove)===null||_this$domNodes$header13===void 0||_this$domNodes$header13.call(_this$domNodes$header12,"transparent-on-top")}lastScroll=currentScroll})},onUnload:function(){this.siteNav.destroy()}});function debounce_debounce(fn,wait=300){let t;return(...args)=>{clearTimeout(t),t=setTimeout(()=>fn.apply(this,args),wait)}}class Accordion{constructor(container,options=this.defaultOptions){_defineProperty(this,"defaultOptions",{presetContentHeight:!1,duration:300,callback:()=>{}}),_defineProperty(this,"selectors",{items:[".sf__accordion-item"],buttons:[".sf__accordion-button"],contents:[".sf__accordion-content"]}),_defineProperty(this,"openClass","open"),_defineProperty(this,"initClass","acc-initialized"),_defineProperty(this,"removeEvents",null),_defineProperty(this,"destroy",()=>{this.removeEvents(),window.removeEventListener("resize",this.debouncedSetContentHeight)}),_defineProperty(this,"setContentOpacity",()=>{this.domNodes.contents.forEach(cont=>cont.style.opacity=1)}),_defineProperty(this,"setItemOverflowState",()=>{var _this$domNodes,_this$domNodes$items;(_this$domNodes=this.domNodes)===null||_this$domNodes===void 0||(_this$domNodes$items=_this$domNodes.items)===null||_this$domNodes$items===void 0||_this$domNodes$items.forEach((item,index)=>{var _this$domNodes2,_this$domNodes2$conte,_item$classList,_item$classList$conta,_contents$classList,_contents$classList$m;let contents=(_this$domNodes2=this.domNodes)===null||_this$domNodes2===void 0||(_this$domNodes2$conte=_this$domNodes2.contents)===null||_this$domNodes2$conte===void 0?void 0:_this$domNodes2$conte[index];const method=item!=null&&(_item$classList=item.classList)!==null&&_item$classList!==void 0&&(_item$classList$conta=_item$classList.contains)!==null&&_item$classList$conta!==void 0&&_item$classList$conta.call(_item$classList,this.openClass)?"remove":"add";contents==null||(_contents$classList=contents.classList)===null||_contents$classList===void 0||(_contents$classList$m=_contents$classList[method])===null||_contents$classList$m===void 0||_contents$classList$m.call(_contents$classList,"overflow-hidden")})}),_defineProperty(this,"setContentHeight",()=>{this.domNodes=queryDomNodes(this.selectors,this.container);const{items,contents}=this.domNodes;items.forEach((item,index)=>{var _contents$index2,_contents$index2$clas;if(item!=null&&item.classList.contains(this.openClass)){var _item$style,_contents$index,_item$style2;item==null||(_item$style=item.style)===null||_item$style===void 0||_item$style.setProperty("--content-max-height","auto");const maxHeight=contents==null||(_contents$index=contents[index])===null||_contents$index===void 0?void 0:_contents$index.scrollHeight;item==null||(_item$style2=item.style)===null||_item$style2===void 0||_item$style2.setProperty("--content-max-height",`${maxHeight}px`)}else{var _item$style3;item==null||(_item$style3=item.style)===null||_item$style3===void 0||_item$style3.setProperty("--content-max-height",0)}contents==null||(_contents$index2=contents[index])===null||_contents$index2===void 0||(_contents$index2$clas=_contents$index2.classList)===null||_contents$index2$clas===void 0||_contents$index2$clas.add("max-height-set")}),this.setItemOverflowState(),this.setContentOpacity()}),_defineProperty(this,"toggle",index=>{var _this$domNodes3,_this$domNodes3$items,_this$domNodes4,_this$domNodes4$conte,_accItem$classList,_accItem$classList2,_this$domNodes5,_this$domNodes5$conte,_this$domNodes5$conte2;const accItem=(_this$domNodes3=this.domNodes)===null||_this$domNodes3===void 0||(_this$domNodes3$items=_this$domNodes3.items)===null||_this$domNodes3$items===void 0?void 0:_this$domNodes3$items[index],accContent=(_this$domNodes4=this.domNodes)===null||_this$domNodes4===void 0||(_this$domNodes4$conte=_this$domNodes4.contents)===null||_this$domNodes4$conte===void 0?void 0:_this$domNodes4$conte[index],isOpen=accItem==null||(_accItem$classList=accItem.classList)===null||_accItem$classList===void 0?void 0:_accItem$classList.contains(this.openClass);accItem==null||(_accItem$classList2=accItem.classList)===null||_accItem$classList2===void 0||_accItem$classList2.toggle(this.openClass);const maxHeight=isOpen?0:(_this$domNodes5=this.domNodes)===null||_this$domNodes5===void 0||(_this$domNodes5$conte=_this$domNodes5.contents)===null||_this$domNodes5$conte===void 0||(_this$domNodes5$conte2=_this$domNodes5$conte[index])===null||_this$domNodes5$conte2===void 0?void 0:_this$domNodes5$conte2.scrollHeight;if(accItem?.style.setProperty("--content-max-height",`${maxHeight}px`),isOpen){var _accContent$classList;accContent==null||(_accContent$classList=accContent.classList)===null||_accContent$classList===void 0||_accContent$classList.add("overflow-hidden")}else setTimeout(()=>{var _accContent$classList2;accContent==null||(_accContent$classList2=accContent.classList)===null||_accContent$classList2===void 0||_accContent$classList2.remove("overflow-hidden")},350)}),!(!container||container.classList.contains(this.initClass))&&(this.container=container,this.domNodes=queryDomNodes(this.selectors,this.container),this.options=Object.assign({},this.defaultOptions,options),this.debouncedSetContentHeight=debounce_debounce(this.setContentHeight.bind(this),300),this.init())}init(){var _this$container,_this$container$style;(_this$container=this.container)===null||_this$container===void 0||(_this$container$style=_this$container.style)===null||_this$container$style===void 0||_this$container$style.setProperty("--duration",` ${this.options.duration}ms`),this.removeEvents=addEventDelegate({context:this.container,selector:this.selectors.buttons[0],handler:(e,btn)=>{btn.classList.add("pointer-events-none");const index=this.domNodes.buttons.indexOf(btn);this.toggle(index),setTimeout(()=>{btn.classList.remove("pointer-events-none")},350)}}),this.options.presetContentHeight?window.requestAnimationFrame(this.setContentHeight):(this.setItemOverflowState(),this.setContentOpacity()),window.addEventListener("resize",this.debouncedSetContentHeight),typeof this.options.callback=="function"&&this.options.callback(),this.container.classList.add(this.initClass)}}var src=__webpack_require__(1179),src_default=__webpack_require__.n(src);register("footer",{onLoad:function(){src_default().register("screen and (max-width: 767px)",{match:()=>{var _this$container;const mobileAccordion=this===null||this===void 0||(_this$container=this.container)===null||_this$container===void 0?void 0:_this$container.querySelector(".sf-footer__accordion");mobileAccordion&&(this.acc=new Accordion(mobileAccordion,{presetContentHeight:!0}))}}),initCustomSelect(this.container)}}),register("slider",{onLoad:function(){this.autoplay=this.container.dataset.autoplay==="true",this.autoplaySpeed=parseInt(this.container.dataset.autoplaySpeed),this.showArrows=this.container.dataset.enableArrows==="true",this.showDots=this.container.dataset.enableDots==="true",this.adaptHeight=this.container.dataset.slideHeight==="adapt",this.lastVideo=null,this.lastActive=null,this.timeout=null;const _this=this;isInViewport(this.container)?this._initSlider(_this):window.__sfWindowLoaded?this._initSlider(_this):window.addEventListener("load",()=>this._initSlider(_this)),window.addEventListener("resize",()=>this._initSlider(_this))},_initSlider:function(_this){const selectors2={slideContent:".sf__slide-content"},paginationIcon='<svg width="65px" height="65px" viewBox="0 0 72 72" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><circle class="time" stroke-width="5" fill="none" stroke-linecap="round" cx="33" cy="33" r="28"></circle></svg>';loadAssets(["swiper.css","swiper.js"]).then(()=>{_this.slider=new window.spratlyTheme.Swiper(`#sf-slider-${_this.id}`,{init:!1,autoplay:_this.autoplay?{delay:_this.autoplaySpeed*1e3,disableOnInteraction:!0}:!1,slidesPerView:1,slidesPerGroup:1,autoHeight:!0,loop:!1,effect:"fade",fadeEffect:{crossFade:!0},speed:1e3,navigation:_this.showArrows?{nextEl:_this.container.querySelector(".sf-slider__controls-next"),prevEl:_this.container.querySelector(".sf-slider__controls-prev")}:!1,pagination:_this.showDots?{el:_this.container.querySelector(".swiper-pagination"),clickable:!0,bulletClass:"sf__dot",bulletActiveClass:"sf__dot-active",renderBullet:function(index,className){return'<span class="'+className+'">'+paginationIcon+"</span>"}}:!1,breakpoints:{992:{allowTouchMove:!1}}}),_this.lastSlide=null,_this.currentSlide=null,_this.slider&&_this.slider.on("slideChangeTransitionStart",()=>{_this.lastSlide&&_this.lastSlide.classList.remove("slide-in"),_this.lastSlide&&_this.lastSlide.classList.add("slide-out")}),_this.slider&&_this.slider.on("slideChangeTransitionEnd",({activeIndex,slides})=>{const currentSlide=slides[activeIndex];_this.currentSlide=currentSlide.querySelector(selectors2.slideContent),_this.currentSlide&&_this.currentSlide.classList.add("slide-in"),_this.lastSlide&&_this.lastSlide.classList.remove("slide-out","slide-in"),_this.lastSlide=_this.currentSlide}),_this.slider&&_this.slider.on("init",_this._handleChange.bind(this)),_this.slider&&_this.slider.on("slideChange",_this._handleChange.bind(this)),_this.slider.init()}).catch(console.error)},_handleChange:function(swiper){const{activeIndex,slides}=swiper,slideType=slides[activeIndex].dataset.slideType;if(this.lastActive&&this.slider.slideToLoop(this.lastActive),slideType==="video_slide"){const video=slides[activeIndex].querySelector("video");if(video){let playPromise=video.play();this.lastVideo&&this.lastVideo.pause(),playPromise!==void 0&&playPromise.then(()=>{this.lastVideo=video})}}else this.lastVideo&&this.lastVideo.pause(),this.lastVideo=null},setSlideshowHeight:function(){const minAspectRatio=this.container.dataset.minAspectRatio,slideHeight=document.documentElement.offsetWidth/minAspectRatio+"px";console.log(slideHeight,"slideHeight")},onBlockSelect:function(ev){var _this$slider,_this$slider$slideToL;const block=ev.target,index=Number(block.dataset.slide);this.lastActive=index,(_this$slider=this.slider)===null||_this$slider===void 0||(_this$slider$slideToL=_this$slider.slideToLoop)===null||_this$slider$slideToL===void 0||_this$slider$slideToL.call(_this$slider,index)}});class Tabs{constructor(container,cb=()=>{}){_defineProperty(this,"selectors",{tabHeaders:[".sf-tab-header"],tabContents:[".sf-tab-content"]}),_defineProperty(this,"activeClass","active"),_defineProperty(this,"currentActiveIndex",-1),_defineProperty(this,"currentTab",null),_defineProperty(this,"init",()=>{addEventDelegate({context:this.container,selector:this.selectors.tabHeaders[0],handler:(e,tabHeader)=>{var _tabHeader$dataset;e.preventDefault();const index=Number(tabHeader==null||(_tabHeader$dataset=tabHeader.dataset)===null||_tabHeader$dataset===void 0?void 0:_tabHeader$dataset.index);this.setActiveTab(index),this.cb(tabHeader)}})}),_defineProperty(this,"setActiveTab",tabIndex=>{const{tabHeaders,tabContents}=this.domNodes;if(tabContents.length&&tabIndex!==-1&&this.currentActiveIndex!==tabIndex){var _currHeader$classList,_currHeader$classList2,_this$currentTab,_this$currentTab$clas,_this$currentTab$clas2,_this$currentTab2,_this$currentTab2$sty,_this$currentTab2$sty2,_newHeader$classList,_newHeader$classList$,_newTab$classList,_newTab$classList$add;const currHeader=tabHeaders?.[this.currentActiveIndex],newHeader=tabHeaders?.[tabIndex],newTab=tabContents?.[tabIndex];currHeader==null||(_currHeader$classList=currHeader.classList)===null||_currHeader$classList===void 0||(_currHeader$classList2=_currHeader$classList.remove)===null||_currHeader$classList2===void 0||_currHeader$classList2.call(_currHeader$classList,this.activeClass),(_this$currentTab=this.currentTab)===null||_this$currentTab===void 0||(_this$currentTab$clas=_this$currentTab.classList)===null||_this$currentTab$clas===void 0||(_this$currentTab$clas2=_this$currentTab$clas.remove)===null||_this$currentTab$clas2===void 0||_this$currentTab$clas2.call(_this$currentTab$clas,this.activeClass,"opacity-100"),(_this$currentTab2=this.currentTab)===null||_this$currentTab2===void 0||(_this$currentTab2$sty=_this$currentTab2.style)===null||_this$currentTab2$sty===void 0||(_this$currentTab2$sty2=_this$currentTab2$sty.removeProperty)===null||_this$currentTab2$sty2===void 0||_this$currentTab2$sty2.call(_this$currentTab2$sty,"opacity"),newHeader==null||(_newHeader$classList=newHeader.classList)===null||_newHeader$classList===void 0||(_newHeader$classList$=_newHeader$classList.add)===null||_newHeader$classList$===void 0||_newHeader$classList$.call(_newHeader$classList,this.activeClass),newTab==null||(_newTab$classList=newTab.classList)===null||_newTab$classList===void 0||(_newTab$classList$add=_newTab$classList.add)===null||_newTab$classList$add===void 0||_newTab$classList$add.call(_newTab$classList,this.activeClass),setTimeout(()=>newTab.style.opacity=1),this.currentActiveIndex=tabIndex,this.currentTab=newTab}}),this.container=container,this.cb=cb,this.domNodes=queryDomNodes(this.selectors,container),this.init(),this.setActiveTab(0)}}register("testimonials",{onLoad:function(){var _container$dataset,_container$dataset2,_container$dataset3;const{container}=this,design=container==null||(_container$dataset=container.dataset)===null||_container$dataset===void 0?void 0:_container$dataset.design,containerType=container==null||(_container$dataset2=container.dataset)===null||_container$dataset2===void 0?void 0:_container$dataset2.container,autorotate=(container==null||(_container$dataset3=container.dataset)===null||_container$dataset3===void 0?void 0:_container$dataset3.autoplay)==="true";if(!design)return console.warn("Failed to init Testimonials: design not found!!");const slider=container.querySelector(".swiper-container");if(!slider){container.classList.add("opacity-100");return}const defaultSettings={pagination:{el:this.container.querySelector(".swiper-pagination"),clickable:!0},navigation:{nextEl:this.container.querySelector(".sf-slider__controls-next"),prevEl:this.container.querySelector(".sf-slider__controls-prev")},autoplay:autorotate?{delay:5e3,pauseOnMouseEnter:!1}:!1,loop:!0,slidesPerView:1};let settings={},gutter=400;switch(design){case"testimonials-1":settings={centeredSlides:!0,slidesPerView:1,slidesPerGroup:1,spaceBetween:20,speed:300,slideToClickedSlide:!0,loop:!0,breakpoints:{768:{slidesPerView:3,slidesPerGroup:3,spaceBetween:20,speed:1e3},1280:{slidesPerView:5,slidesPerGroup:3,spaceBetween:30},2560:{slidesPerView:7,slidesPerGroup:3}}};break;case"testimonials-2":settings={slidesPerView:1,spaceBetween:30,breakpoints:{768:{slidesPerView:3,slidesPerGroup:2}}};break;case"testimonials-3":settings={slidesPerView:1,spaceBetween:30,breakpoints:{768:{slidesPerView:containerType==="w-full"?3:2}}};break;case"testimonials-4":containerType==="container-fluid"&&(gutter=200),containerType==="container"&&(gutter=150),settings={slidesPerView:1,centeredSlides:!0,slideToClickedSlide:!0,breakpoints:{768:{spaceBetween:parseInt(gutter/4),slidesPerView:3},992:{spaceBetween:gutter/2,slidesPerView:3},1920:{spaceBetween:gutter,slidesPerView:3}}};break;case"testimonials-6":settings={slidesPerView:1,loop:!0,breakpoints:{768:{slidesPerView:2},1366:{slidesPerView:containerType==="container"?2:3},1600:{slidesPerView:containerType==="container"?2:4}}};break;case"testimonials-5":settings={fade:{crossFade:!0}};break}const images=container.querySelector(".sf-tabs");images&&(this.imagesTab=new Tabs(images));const initSlider2=()=>{loadAssets(["swiper.css","swiper.js"]).then(()=>{this.slider=new window.spratlyTheme.Swiper(slider,{...defaultSettings,...settings}),design==="testimonials-4"&&this.slider.on("activeIndexChange",swiper=>{console.log(swiper,"slide change");const{realIndex}=swiper;this.container.querySelector(".sf-slider-index").innerHTML=parseInt(realIndex)+1}),design==="testimonials-5"&&this.slider.on("slideChange",swiper=>{const{realIndex}=swiper;this.imagesTab.setActiveTab(realIndex)})})};isInViewport(this.container)||window.__sfWindowLoaded?initSlider2():window.addEventListener("load",initSlider2)},onBlockSelect:function(ev){var _this$slider,_this$slider$slideToL;const block=ev.target,index=Number(block.dataset.index);this===null||this===void 0||(_this$slider=this.slider)===null||_this$slider===void 0||(_this$slider$slideToL=_this$slider.slideToLoop)===null||_this$slider$slideToL===void 0||_this$slider$slideToL.call(_this$slider,index)}});const registerRecommendedProductsSlider=()=>{registered.cart_product_recommendations&&unregister(["cart_product_recommendations"]),register("cart_product_recommendations",{onLoad:function(){var _container$dataset,_container$dataset2,_container$dataset3;const{container}=this,autorotate=(container==null||(_container$dataset3=container.dataset)===null||_container$dataset3===void 0?void 0:_container$dataset3.autoplay)==="true",slider=container.querySelector(".swiper-container");if(!slider){container.classList.add("opacity-100");return}const defaultSettings={pagination:{el:this.container.querySelector(".swiper-pagination"),clickable:!0},navigation:{nextEl:this.container.querySelector(".sf-slider__controls-next"),prevEl:this.container.querySelector(".sf-slider__controls-prev")},autoplay:autorotate?{delay:5e3,pauseOnMouseEnter:!1}:!1,loop:!0,slidesPerView:2.3};let settings={},gutter=400;settings={slidesPerView:2.3,loop:!0,breakpoints:{768:{slidesPerView:2.3},1366:{slidesPerView:2.3},1600:{slidesPerView:2.3}}};const images=container.querySelector(".sf-tabs");images&&(this.imagesTab=new Tabs(images));const initSlider2=()=>{loadAssets(["swiper.css","swiper.js"]).then(()=>{this.slider=new window.spratlyTheme.Swiper(slider,{...defaultSettings,...settings})})};isInViewport(this.container)||window.__sfWindowLoaded?initSlider2():window.addEventListener("load",initSlider2)}})};var LazyImage_createElement=__webpack_require__(6295).default;function LazyImage(props){const{src:src2,alt,style={},className="",onLoad=()=>{},onError=()=>{}}=props,image=LazyImage_createElement("img",{style,className:`transition-opacity opacity-0 ${className}`,src:src2,alt});image.addEventListener("load",imgLoaded),image.addEventListener("error",imgError),image.complete&&image.naturalWidth&&imgLoaded();function imgLoaded(){onLoad&&onLoad(),image.classList.add("opacity-100"),image.removeEventListener("load",imgLoaded),image.removeEventListener("error",imgError)}function imgError(err){console.error("Failed to load LazyImage. ",err,props),onError&&onError(),image.style.opacity=0,image.removeEventListener("load",imgLoaded),image.removeEventListener("error",imgError)}return image}var InstagramImage_createElement=__webpack_require__(6295).default;function InstagramImage({image}){return InstagramImage_createElement("div",{className:"sf-column"},InstagramImage_createElement("a",{href:image.permalink,target:"_blank",className:"sf__insta-item block relative"},InstagramImage_createElement("div",{className:"sf__insta-content absolute z-10 inset-0 flex items-center justify-center"},InstagramImage_createElement("div",{class:"sf__insta-icon"},InstagramImage_createElement("svg",{className:"w-10 h-10",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},InstagramImage_createElement("path",{fill:"currentColor",d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"})))),InstagramImage_createElement("div",{className:"sf__insta-image",style:{"--aspect-ratio":"1/1"}},InstagramImage_createElement(LazyImage,{src:image.media_url,alt:`instagram-image-${image.username}-${image.id}`})),InstagramImage_createElement("div",{className:"sf__item-bg"})))}var utilities_fetch=__webpack_require__(6662),instagram_createElement=__webpack_require__(6295).default;class Instagram{constructor(container,accessToken,imagesCount=4){_defineProperty(this,"mediaAPI","https://graph.instagram.com/me/media?fields=caption,id,media_type,media_url,permalink,thumbnail_url,timestamp,username"),this.container=container,this.imagesContainer=container.querySelector(".instagram-images"),this.accessToken=accessToken,this.imagesCount=imagesCount,window.__sfWindowLoaded?this.init().catch(console.error):window.addEventListener("load",()=>this.init().catch(console.error))}async init(){const media=await(0,utilities_fetch.fetchJsonCache)(`${this.mediaAPI}&access_token=${this.accessToken}`,{cache:"force-cache"});if(media){if(media.error){var _media$error;return console.error("Instagram error: ",(_media$error=media.error)===null||_media$error===void 0?void 0:_media$error.message)}media.data.filter(d=>d.media_type==="IMAGE"||d.media_type==="CAROUSEL_ALBUM").slice(0,this.imagesCount).forEach(image=>{const imgNode=instagram_createElement(InstagramImage,{image});this.imagesContainer.appendChild(imgNode)})}}}register("instagram",{onLoad:function(){const{container}=this,{accessToken,imagesCount}=container?.dataset;accessToken?new Instagram(container,accessToken,imagesCount):console.warn("Failed to init Instagram section! Missing Access Token")}});class CountdownTimer{constructor(container,startTime,endTime,options={}){_defineProperty(this,"times",["day","hour","min","sec"]),_defineProperty(this,"selectors",{day:".countdown-timer-day",hour:".countdown-timer-hour",min:".countdown-timer-minute",sec:".countdown-timer-sec"}),_defineProperty(this,"DAY_IN_MS",24*60*60*1e3),_defineProperty(this,"HOUR_IN_MS",60*60*1e3),_defineProperty(this,"MIN_IN_MS",60*1e3),_defineProperty(this,"start",()=>{this.timer=setInterval(()=>{this.startTime>this.endTime?this.stop():this.update()},this.intervalTime),this.container.classList.add("opacity-100"),this.container.classList.remove("opacity-0")}),_defineProperty(this,"update",()=>{const timeData=this.format(this.endTime-this.startTime);this.times.forEach(time=>{var _this$domNodes;this!==null&&this!==void 0&&(_this$domNodes=this.domNodes)!==null&&_this$domNodes!==void 0&&_this$domNodes[time]&&(this.domNodes[time].textContent=this.addZeroPrefix(timeData[time]))}),this.startTime+=this.intervalTime}),_defineProperty(this,"stop",()=>{clearInterval(this.timer),this.options.loop?(this.startTime=this.savedStartTime,this.start()):(this.timer=null,this.options.callback())}),_defineProperty(this,"clear",()=>{clearInterval(this.timer),this.timer=null,this.startTime=this.savedStartTime,this.times.forEach(time=>{var _this$domNodes2;this!==null&&this!==void 0&&(_this$domNodes2=this.domNodes)!==null&&_this$domNodes2!==void 0&&_this$domNodes2[time]&&(this.domNodes[time].textContent="00")})}),_defineProperty(this,"addZeroPrefix",num=>{var _this$options;return this!==null&&this!==void 0&&(_this$options=this.options)!==null&&_this$options!==void 0&&_this$options.addZeroPrefix&&num<10?`0${num}`:num.toString()}),_defineProperty(this,"format",ms=>({day:Math.floor(ms/this.DAY_IN_MS),hour:Math.floor(ms/this.HOUR_IN_MS)%24,min:Math.floor(ms/this.MIN_IN_MS)%60,sec:Math.floor(ms/1e3)%60})),this.container=container,this.startTime=startTime,this.savedStartTime=startTime,this.endTime=endTime,this.options=Object.assign({},{addZeroPrefix:!0,loop:!1,callback:()=>{}},options),this.intervalTime=1e3,this.timer=null,this.domNodes=queryDomNodes(this.selectors,container),this.start()}}var countdown_timer=CountdownTimer;register("countdown-timer",{onLoad:function(){const cdContainer=this.container.querySelector(".countdown-timer-container"),time=cdContainer.dataset.time,endTime=Date.parse(time.split(" ").join("T"));cdContainer&&endTime&&new countdown_timer(cdContainer,Date.now(),endTime)}}),register("banner-with-slider",{onLoad:function(){const{container}=this;this.lastActive=null;const initSlider2=()=>{const paginationIcon='<svg width="65px" height="65px" viewBox="0 0 72 72" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><circle class="time" stroke-width="5" fill="none" stroke-linecap="round" cx="33" cy="33" r="28"></circle></svg>';loadAssets(["swiper.css","swiper.js"]).then(()=>{const _this=this;this.slider=new window.spratlyTheme.Swiper(`.sf-slider-${this.id}`,{autoplay:container.dataset.autoplay==="true",slidesPerView:1,loop:!0,fadeEffect:{crossFade:!0},pagination:{el:this.container.querySelector(".swiper-pagination"),clickable:!0,bulletClass:"sf__dot",bulletActiveClass:"sf__dot-active",renderBullet:function(index,className){return'<span class="'+className+'">'+paginationIcon+"</span>"}},on:{init:function(){this.slideToLoop(_this.lastActive)}}})})};isInViewport(container)||window.__sfWindowLoaded?initSlider2():window.addEventListener("load",initSlider2)},onBlockSelect:function(ev){var _this$slider,_this$slider$slideToL;const block=ev.target,index=Number(block.dataset.slide);this.lastActive=index,(_this$slider=this.slider)===null||_this$slider===void 0||(_this$slider$slideToL=_this$slider.slideToLoop)===null||_this$slider$slideToL===void 0||_this$slider$slideToL.call(_this$slider,index)}});var fastDeepEqual=function equal(a,b){if(a===b)return!0;if(a&&b&&typeof a=="object"&&typeof b=="object"){if(a.constructor!==b.constructor)return!1;var length,i,keys;if(Array.isArray(a)){if(length=a.length,length!=b.length)return!1;for(i=length;i--!==0;)if(!equal(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if(keys=Object.keys(a),length=keys.length,length!==Object.keys(b).length)return!1;for(i=length;i--!==0;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=length;i--!==0;){var key=keys[i];if(!equal(a[key],b[key]))return!1}return!0}return a!==a&&b!==b};const DEFAULT_ID="__googleMapsScriptId";class Loader{constructor({apiKey,channel,client,id=DEFAULT_ID,libraries=[],language,region,version,mapIds,nonce,retries=3,url="https://maps.googleapis.com/maps/api/js"}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.version=version,this.apiKey=apiKey,this.channel=channel,this.client=client,this.id=id||DEFAULT_ID,this.libraries=libraries,this.language=language,this.region=region,this.mapIds=mapIds,this.nonce=nonce,this.retries=retries,this.url=url,Loader.instance){if(!fastDeepEqual(this.options,Loader.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Loader.instance.options)}`);return Loader.instance}Loader.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let url=this.url;return url+=`?callback=${this.CALLBACK}`,this.apiKey&&(url+=`&key=${this.apiKey}`),this.channel&&(url+=`&channel=${this.channel}`),this.client&&(url+=`&client=${this.client}`),this.libraries.length>0&&(url+=`&libraries=${this.libraries.join(",")}`),this.language&&(url+=`&language=${this.language}`),this.region&&(url+=`&region=${this.region}`),this.version&&(url+=`&v=${this.version}`),this.mapIds&&(url+=`&map_ids=${this.mapIds.join(",")}`),url}load(){return this.loadPromise()}loadPromise(){return new Promise((resolve,reject)=>{this.loadCallback(err=>{err?reject(err.error):resolve(window.google)})})}loadCallback(fn){this.callbacks.push(fn),this.execute()}setScript(){if(document.getElementById(this.id)){this.callback();return}const url=this.createUrl(),script=document.createElement("script");script.id=this.id,script.type="text/javascript",script.src=url,script.onerror=this.loadErrorCallback.bind(this),script.defer=!0,script.async=!0,this.nonce&&(script.nonce=this.nonce),document.head.appendChild(script)}deleteScript(){const script=document.getElementById(this.id);script&&script.remove()}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const delay=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${delay} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},delay)}else this.onerrorEvent=e,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(cb=>{cb(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}register("google-maps",{onLoad:function(){let mapElm=this.container.querySelector("#sf__map");const{mapX,mapY,mapZoom,mapTitle,key}=mapElm.dataset;console.log(mapElm),console.log(mapX,mapY,mapZoom,key),new Loader({apiKey:key,version:"weekly"}).load().then(()=>{let mapOptions={zoom:parseInt(mapZoom),center:new google.maps.LatLng(mapX,mapY),scrollwheel:!1,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}]},map=new google.maps.Map(mapElm,mapOptions);new google.maps.Marker({position:new google.maps.LatLng(mapX,mapY),map,title:mapTitle})})}}),register("video-section",{onLoad:function(){const initVideo=()=>{loadAssets(["plyr.css","plyr.js"]).then(()=>{const videoWrapper=this.container.querySelector(".video-wrapper"),{videoRatio,autoplay,loop}=this.container.dataset;new window.spratlyLibs.Plyr(videoWrapper,{ratio:videoRatio,autoplay:autoplay==="true",loop:{active:loop==="true"}})}).catch(err=>console.error("Failed to init video-section",err))};window.__sfWindowLoaded?initVideo():window.addEventListener("load",initVideo)}});const moneyFormat="${{amount}}";function formatMoney(cents,format){typeof cents=="string"&&(cents=cents.replace(".",""));let value="";const placeholderRegex=/\{\{\s*(\w+)\s*\}\}/,formatString=format||moneyFormat;function formatWithDelimiters(number,precision=2,thousands=",",decimal="."){if(isNaN(number)||number==null)return 0;number=(number/100).toFixed(precision);const parts=number.split("."),dollarsAmount=parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,`$1${thousands}`),centsAmount=parts[1]?decimal+parts[1]:"";return dollarsAmount+centsAmount}switch(formatString.match(placeholderRegex)[1]){case"amount":value=formatWithDelimiters(cents,2);break;case"amount_no_decimals":value=formatWithDelimiters(cents,0);break;case"amount_with_comma_separator":value=formatWithDelimiters(cents,2,".",",");break;case"amount_no_decimals_with_comma_separator":value=formatWithDelimiters(cents,0,".",",");break}return formatString.replace(placeholderRegex,value)}var Notification_createElement=__webpack_require__(6295).default;function components_Notification({type,message,onclick}){let icon;return type==="warning"?icon=Notification_createElement("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Notification_createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})):type==="success"&&(icon=Notification_createElement("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Notification_createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),Notification_createElement("div",{className:`notification ${type}`,onclick},icon,Notification_createElement("div",{className:"ml-3"},message))}var notification_createElement=__webpack_require__(6295).default,AmyrisTheme=__webpack_require__(4558).AmyrisTheme;class Notification{constructor(){_defineProperty(this,"noti",null),_defineProperty(this,"removeTimeoutId",null),_defineProperty(this,"hideTimeoutId",null),_defineProperty(this,"transitionDuration",300),_defineProperty(this,"show",({target,type,message,method="after",last=3e3,delay=0,debug=!1})=>{this.clearTimeout(),this.removeNoti(),setTimeout(()=>{this.noti=notification_createElement(components_Notification,{type,message,onclick:this.handleClick}),target?.[method](this.noti),requestAnimationFrame(()=>this.noti.classList.add("show")),debug||(this.hideTimeoutId=setTimeout(()=>{this.noti.classList.add("hide"),this.removeTimeoutId=setTimeout(this.removeNoti,this.transitionDuration*2)},last))},delay)}),_defineProperty(this,"handleClick",()=>{clearTimeout(this.removeTimeoutId),this.noti.classList.add("hide"),setTimeout(this.removeNoti,this.transitionDuration*2)}),_defineProperty(this,"clearTimeout",()=>{clearTimeout(this.removeTimeoutId),clearTimeout(this.hideTimeoutId)}),_defineProperty(this,"removeNoti",()=>{var _this$noti;this===null||this===void 0||(_this$noti=this.noti)===null||_this$noti===void 0||_this$noti.remove()})}}AmyrisTheme.Notification=new Notification;var Spinner_createElement=__webpack_require__(6295).default;function Spinner({className=""}){return Spinner_createElement("svg",{className:`animate-spin hidden w-[20px] h-[20px] ${className}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none"},Spinner_createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),Spinner_createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))}var custom_content_createElement=__webpack_require__(6295).default;register("custom-content",{onLoad:function(){if(this.selectors={cdtContainer:[".countdown-timer-container"],bundleError:".product-bundles__error",productBundles:[".product-bundles"],productVariantSelects:".sf-product-variant-option-dropdown",totalPrice:"[data-total-price]",submitBundle:"[data-add-bundle]",errorWrapper:".product-bundles__error"},this.domNodes=queryDomNodes(this.selectors,this.container),this.spinner=custom_content_createElement(Spinner,{className:"m-0.5"}),this.initCountDown(),this.initProductBundles(),this.container.querySelectorAll(".sf__accordio-blocks").forEach(item=>{new Accordion(item,{presetContentHeight:!0})}),this.container.dataset.parallax==="true"&&window.innerWidth>767){const bg=this.container.querySelector(".sf-custom__bg");if(!bg)return;isInViewport(bg)?this._initParallax(bg):window.__sfWindowLoaded?this._initParallax(bg):window.addEventListener("load",()=>this._initParallax(bg))}window.__sfWindowLoaded?this._initVideo(this.id):window.addEventListener("load",()=>this._initVideo(this.id))},initCountDown:function(){const countdowns=this.domNodes.cdtContainer;if(countdowns.length)for(let countdown of countdowns){const time=countdown.dataset.time,endTime=Date.parse(time.split(" ").join("T"));endTime&&new countdown_timer(countdown,Date.now(),endTime)}},initProductBundles:function(){this.products=[],this.variants=[],this.domNodes.productBundles.length&&this.domNodes.productBundles.map(bundle=>{const products=bundle.querySelectorAll(".product-bundles__item");for(let product of products){let variants=product.nextElementSibling.innerHTML;variants=JSON.parse(variants),this.variants.push(variants),this.products.push(product),addEventDelegate({context:product,event:"change",selector:this.selectors.productVariantSelects,handler:e=>this._handleChangePrice(e,product,variants)})}addEventDelegate({context:bundle,selector:this.selectors.submitBundle,handler:e=>this._handleAddItems(e,bundle)})})},_handleChangePrice:function(evt,product,variants){var _window,_window$spratlyThemeS,_window4,_window4$spratlyTheme;const regularPrice=product.querySelector("[data-regular-price]"),comparePrice=product.querySelector("[data-compare-price]"),savedPrice=product.querySelector("[data-saved-price]"),selectedVariant=evt.target.value,variant=variants.find(v=>v.id===parseInt(selectedVariant));if(regularPrice.innerHTML=formatMoney(variant.price,(_window=window)===null||_window===void 0||(_window$spratlyThemeS=_window.spratlyThemeSettings)===null||_window$spratlyThemeS===void 0?void 0:_window$spratlyThemeS.money_format),regularPrice.dataset.price=variant.price,comparePrice&&savedPrice)if(variant.compare_at_price&&variant.compare_at_price>variant.price){var _window2,_window2$spratlyTheme,_window3,_window3$spratlyTheme;comparePrice.classList.remove("hidden"),savedPrice.classList.remove("hidden"),comparePrice.innerHTML=formatMoney(variant.compare_at_price,(_window2=window)===null||_window2===void 0||(_window2$spratlyTheme=_window2.spratlyThemeSettings)===null||_window2$spratlyTheme===void 0?void 0:_window2$spratlyTheme.money_format),savedPrice.innerHTML=formatMoney(variant.compare_at_price-variant.price,(_window3=window)===null||_window3===void 0||(_window3$spratlyTheme=_window3.spratlyThemeSettings)===null||_window3$spratlyTheme===void 0?void 0:_window3$spratlyTheme.money_format)}else comparePrice.classList.add("hidden"),savedPrice.classList.add("hidden");const totalPrice=this.products.map(product2=>{var _variants,_variants$find;let variants2=product2.nextElementSibling.innerHTML;variants2=JSON.parse(variants2);const select=product2.querySelector('[name="id"]');return(_variants=variants2)===null||_variants===void 0||(_variants$find=_variants.find)===null||_variants$find===void 0?void 0:_variants$find.call(_variants,v=>v?.id===Number(select?.value))}).filter(Boolean).reduce((s,v)=>s+v.price,0),container=product.closest(".product-bundles");container.querySelector(this.selectors.totalPrice).innerHTML=formatMoney(totalPrice,(_window4=window)===null||_window4===void 0||(_window4$spratlyTheme=_window4.spratlyThemeSettings)===null||_window4$spratlyTheme===void 0?void 0:_window4$spratlyTheme.money_format)},_handleAddItems:function(e,bundle){e.preventDefault();const inputIds=bundle.querySelectorAll('[name="id"]'),errorWrapper=bundle.querySelector(this.selectors.errorWrapper),button=bundle.querySelector(this.selectors.submitBundle),data2={items:[...inputIds].map(input=>input.value).map(id=>({id,quantity:1}))},config=(0,utilities_fetch.getRequestDefaultConfigs)();config.method="POST",config.body=JSON.stringify(data2),this._toggleLoading(!0,button),fetch("/cart/add.js",config).then(async res=>{if(res!=null&&res.ok){const{items}=await res.json(),firstItem=items.shift();window.Shopify.onItemAdded(firstItem),items.forEach(itm=>window.Shopify.onItemAdded(itm,!1))}else{const err=await res.json();this._showError(err?.description||"Failed to add all items to cart!",errorWrapper)}setTimeout(()=>{this._toggleLoading(!1,button)},300)}).catch(err=>{var _err$toString;this._showError(err==null||(_err$toString=err.toString)===null||_err$toString===void 0?void 0:_err$toString.call(err),errorWrapper),this._toggleLoading(!1,button)})},_showError:function(err,errorWrapper){Notification.show({target:errorWrapper,method:"appendChild",type:"warning",message:err})},_toggleLoading:function(loading,button){if(loading)button.appendChild(this.spinner),button.classList.add("sf-spinner-loading");else{var _this$spinner;this===null||this===void 0||(_this$spinner=this.spinner)===null||_this$spinner===void 0||_this$spinner.remove(),button.classList.remove("sf-spinner-loading")}},_initVideo:function(id){const videoBlocks=this.container.querySelectorAll("[data-video-block]");videoBlocks.length&&loadAssets(["plyr.css","plyr.js"]).then(()=>{videoBlocks.forEach(vidBlock=>{const{ratio,autoplay,loop}=vidBlock.dataset;new window.spratlyLibs.Plyr(vidBlock,{ratio,autoplay:autoplay==="true",loop:{active:loop==="true"}})})}).catch(err=>console.error("Failed to init video-section",err))},_initParallax:function(bg){loadJS(window.themeScriptURLs.parallax.url).then(()=>{new window.spratlyLibs.simpleParallax(bg,{scale:1.1,maxTransition:80})})}}),register("custom-list",{onLoad:function(){this.container.querySelectorAll(".sf__accordio-blocks").forEach(item=>{new Accordion(item,{presetContentHeight:!0})})}}),register("image-with-rich-text",{onLoad:function(){this.container.querySelectorAll(".sf__accordio-blocks").forEach(item=>{new Accordion(item,{presetContentHeight:!0})})}});function initSlider({container,pagination,items=4,slidesPerView=2,slidesPerGroup=2,slidesPerGroupMobile=2,loop=!1,showPagination=!1,showNavigation=!1,autoplay=!1,speed=300,isProductSlider=!1,simulateTouch=!1}){if(!container)return;const sliderContainer=container.querySelector(".swiper-container");if(!sliderContainer)return;const controlsContainer=container.querySelector(".sf-slider__controls"),prevButton=controlsContainer&&controlsContainer.querySelector(".sf-slider__controls-prev"),nextButton=controlsContainer&&controlsContainer.querySelector(".sf-slider__controls-next"),lgItems=items>4?items-1:items,mdItems=items>4?items-2:items,slideItemsLength=sliderContainer.querySelector(".swiper-wrapper").childElementCount;let slider;showPagination&&sliderContainer.classList.add("swiper-container-show-pagination"),showNavigation&&sliderContainer.classList.add("swiper-container-show-nav");const _initSlider=()=>{loadAssets(["swiper.css","swiper.js"]).then(()=>{slider=new window.spratlyTheme.Swiper(sliderContainer,{init:!1,autoplay:autoplay?{delay:4e3,disableOnInteraction:!0}:!1,slidesPerView,slidesPerGroup:slidesPerGroup||slidesPerView,loop,touchRatio:1.5,speed,simulateTouch,pagination:showPagination?pagination||{el:container.querySelector(".swiper-pagination"),clickable:!0}:!1,breakpoints:{280:{slidesPerView,slidesPerGroup:slidesPerGroupMobile||slidesPerView},768:{slidesPerView:3,slidesPerGroup:isProductSlider?3:2},992:{slidesPerView:mdItems,slidesPerGroup:isProductSlider?mdItems:slidesPerGroup||mdItems},1200:{slidesPerView:lgItems,slidesPerGroup:isProductSlider?lgItems:slidesPerGroup||lgItems},1366:{slidesPerView:items,slidesPerGroup:isProductSlider?items:slidesPerGroup||items}},on:{breakpoint:(swiper,breakpointParams)=>{controlsContainer&&handleControls(swiper,breakpointParams)},slideChange:swiper=>{const{isBeginning,isEnd}=swiper;!loop&&prevButton&&(prevButton.disabled=isBeginning),!loop&&nextButton&&(nextButton.disabled=isEnd)}}}),slider.on("init",()=>{const forms=container.querySelectorAll(".swiper-slide form.shopify-product-form");forms.length&&[...forms].forEach((form,ind)=>{form.setAttribute("id",`${form.getAttribute("id")}__${ind}`)}),setTimeout(()=>{const firstItem=container.querySelector(".sf-image");if(firstItem&&controlsContainer){const itemHeight=firstItem.clientHeight;controlsContainer.style.setProperty("--offset-top",parseInt(itemHeight)/2+"px")}},200),slider&&showNavigation&&(prevButton&&prevButton.addEventListener("click",()=>slider.slidePrev()),nextButton&&nextButton.addEventListener("click",()=>slider.slideNext())),!loop&&prevButton&&(prevButton.disabled=!0)}),slider.init()}).catch(console.error)};isInViewport(container)||window.__sfWindowLoaded?_initSlider():window.addEventListener("load",_initSlider);const handleControls=(swiper,breakpointParams)=>{const{slidesPerView:slidesPerView2}=breakpointParams;slideItemsLength>slidesPerView2?(controlsContainer.classList.remove("hidden"),slider.allowTouchMove=!0):(controlsContainer.classList.add("hidden"),slider.allowTouchMove=!1)}}function fetchCountDown(collectionID){const appURL=window.spratlyThemeSettings.beautyAppURL?`https://${window.spratlyThemeSettings.beautyAppURL}`:"";return new Promise((resolve,reject)=>{var _window$Shopify;let requestUrl=`${appURL}/api/public/countdown?shop=${(_window$Shopify=window.Shopify)===null||_window$Shopify===void 0?void 0:_window$Shopify.shop}&collectionIds=${collectionID}`;fetch(requestUrl).then(response=>response.json()).then(resolve).catch(reject)})}var SaleProgress_createElement=__webpack_require__(6295).default;function SaleProgress({settings,productId,soldNumber}){const{total_quantity,sold_to,sold_from}=settings;let soldNumb;if(soldNumber)soldNumb=parseInt(soldNumber);else{const range=sold_to-sold_from,timeRatio=4/24,randomRatioById=(Number(productId.split("").pop())+1)/10;let combinedRatio=timeRatio+randomRatioById;combinedRatio>1&&(combinedRatio-=1);const delta=Math.ceil(combinedRatio*range);soldNumb=sold_from+delta}const availableNumb=total_quantity-soldNumb,progress=soldNumb*100/total_quantity,sold=window.spratlyThemeStrings.sold&&!window.spratlyThemeStrings.sold.includes("translation missing")?window.spratlyThemeStrings.sold:"Sold",available=window.spratlyThemeStrings.available&&!window.spratlyThemeStrings.available.includes("translation missing")?window.spratlyThemeStrings.available:"Available";return SaleProgress_createElement("div",{className:"pcard-sale",dataSet:{flashSale:""}},SaleProgress_createElement("div",{className:"pcard-sale__progress"},SaleProgress_createElement("span",{dataSet:{saleProgress:""},style:{width:progress+"%"}})),SaleProgress_createElement("div",{className:"pcard-sale__text flex justify-between mt-2"},SaleProgress_createElement("div",null,SaleProgress_createElement("span",null,sold,": "),SaleProgress_createElement("strong",{dataSet:{saleNumber:""}},soldNumb||0)),SaleProgress_createElement("div",null,SaleProgress_createElement("span",null,available,": "),SaleProgress_createElement("strong",{dataSet:{availableNumber:""}},availableNumb||10))))}var featured_collection_createElement=__webpack_require__(6295).default;register("featured-collection",{onLoad:function(){this.selectors={loadMoreBtn:"[data-load-more]",productsContainer:"[data-products-container]",products:[".sf__pcard"],soldNumber:["[data-sold-number]"],availableNumber:["[data-available-number]"],countDown:"[data-flashsale-countdown]"},this.domNodes=queryDomNodes(this.selectors,this.container),window.spratlyTheme.Products.initProductForms().catch(console.error);const{container}=this,buttonType=container.dataset.buttonType,infiniteLoad=container.dataset.infiniteLoad,enableSlider=container.dataset.enableSlider==="true",showPagination=container.dataset.showPagination==="true",showNavigation=container.dataset.showNavigation==="true",enableFlashsale=container.dataset.enableFlashsale==="true",enableCountdown=container.dataset.enableCountdown==="true",items=container.dataset.items;enableSlider&&initSlider({container,items:parseInt(items),showPagination,showNavigation,slidesPerGroupMobile:1,loop:!1,isProductSlider:!0,simulateTouch:!0}),enableFlashsale&&this.initFlashSale(),this.canLoad=!0,this.currentPage=1,this.spinner=featured_collection_createElement(Spinner,null),this.enableCountdown=enableCountdown,infiniteLoad==="true"&&this.initInfiniteLoad(),buttonType==="load"&&this.domNodes.loadMoreBtn&&this.initLoadMore()},initLoadMore:function(){const{container}=this;this.triggerLoad=!1,this.totalPages=parseInt(container.dataset.totalPages),addEventDelegate({context:this.container,selector:this.selectors.loadMoreBtn,handler:e=>{e.preventDefault(),this.handleLoadMore()}})},initInfiniteLoad:function(){const maxPages=this.container.dataset.maxPages;window.addEventListener("scroll",e=>{this.canLoad=this.currentPage<parseInt(maxPages),this.canLoad&&this.container.offsetTop+this.container.clientHeight-window.innerHeight<window.scrollY&&!this.triggerLoad&&(this.triggerLoad=!0,this.handleLoadMore())})},handleLoadMore:function(){this.currentPage++,this.canLoad=this.currentPage<this.totalPages,this.toggleLoading(!0);const dataUrl=`${this.container.dataset.url}?page=${this.currentPage}&section_id=${this.id}`;(0,utilities_fetch.fetchCache)(dataUrl).then(html=>{this.toggleLoading(!1);const products=generateDomFromString(html).querySelector(this.selectors.productsContainer);products&&(Array.from(products.childNodes).forEach(product=>this.domNodes.productsContainer.appendChild(product)),window.spratlyTheme.Products.initProductForms()),this.triggerLoad=!1,this.canLoad||this.domNodes.loadMoreBtn&&this.domNodes.loadMoreBtn.classList.add("hidden")})},toggleLoading:function(status){if(this.domNodes.loadMoreBtn)if(status)this.domNodes.loadMoreBtn.appendChild(this.spinner),this.domNodes.loadMoreBtn.classList.add("sf-spinner-loading");else{var _this$spinner;this===null||this===void 0||(_this$spinner=this.spinner)===null||_this$spinner===void 0||_this$spinner.remove(),this.domNodes.loadMoreBtn.classList.remove("sf-spinner-loading")}},initFlashSale:async function(){const collectionID=this.container.dataset.collectionId,res=await fetchCountDown(collectionID);if(res.ok&&res.payload&&res.payload.length){const{expires_date}=res.payload[0];this.expires_date=expires_date,this.domNodes.products.forEach(card=>{const productForm=card.firstElementChild,content=card.querySelector(".sf__pcard-content"),component=featured_collection_createElement(SaleProgress,{settings:res.payload[0],productId:productForm.dataset.productId});content.appendChild(component)}),this.initCountDown()}},initCountDown:function(){const endTime=new Date(this.expires_date).getTime();this.countDownTimer=new countdown_timer(this.domNodes.countDown,Date.now(),endTime,{loop:!0})}}),register("icon-box",{onLoad:function(){const enableSlider=this.container.dataset.enableSlider==="true",items=this.container.dataset.items;enableSlider&&initSlider({container:this.container,items:parseInt(items),slidesPerGroupMobile:1,slidesPerView:1,slidesPerGroup:1,showPagination:!0,showNavigation:!0})}}),register("collection-list",{onLoad:function(){const enableSlider=this.container.dataset.enableSlider==="true",items=this.container.dataset.items,autoplay=this.container.dataset.autoplay==="true",autoplaySpeed=this.container.dataset.autoplaySpeed,paginationIcon='<svg width="65px" height="65px" viewBox="0 0 72 72" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><circle class="time" stroke-width="5" fill="none" stroke-linecap="round" cx="33" cy="33" r="28"></circle></svg>';console.log(autoplay,"autoplay"),enableSlider&&initSlider({container:this.container,items:parseInt(items)+1,loop:!0,slidesPerGroup:2,showNavigation:!0,showPagination:!0,slidesPerGroupMobile:1,speed:500,autoplay:autoplay?{delay:parseInt(autoplaySpeed)*1e3}:!1,pagination:{el:this.container.querySelector(".swiper-pagination"),clickable:!0,bulletClass:"sf__dot",bulletActiveClass:"sf__dot-active",renderBullet:function(index,className){return'<span class="'+className+'">'+paginationIcon+"</span>"}}})}}),register("press",{onLoad:function(){this.prevSlideIndex=0;const initSlider2=()=>{loadAssets(["swiper.css","swiper.js"]).then(()=>{const contentWrapper=this.container.querySelector(".press-content"),navWrapper=this.container.querySelector(".press-list .swiper-container"),autoplay=this.container.dataset.autoplay==="true";this.items=parseInt(this.container.dataset.items),this.canLoop=window.innerWidth<1300?this.items>3:this.items>5,this.contentSlider=new window.spratlyTheme.Swiper(contentWrapper,{slidesPerView:1,allowTouchMove:!1,fadeEffect:{crossFade:!0}}),this.navSlider=new window.spratlyTheme.Swiper(navWrapper,{autoplay:autoplay?{delay:5e3}:!1,items:1,speed:500,loop:this.canLoop,centeredSlides:this.canLoop,pagination:{el:this.container.querySelector(".swiper-pagination"),clickable:!0},slideToClickedSlide:!0,breakpoints:{768:{slidesPerView:3,navigation:!1},1300:{slidesPerView:5,navigation:!1}},on:{init:function(swiper){const firstSlide=swiper.slides[swiper.activeIndex];console.log(firstSlide,"firstSlide"),firstSlide&&firstSlide.classList.add("press-logo--active")}}}),!this.canLoop&&this.navSlider.on("click",this._handleClick.bind(this)),this.navSlider.on("slideChange",this._handleChange.bind(this))}).catch(console.error)};isInViewport(this.container)||window.__sfWindowLoaded?initSlider2():window.addEventListener("load",initSlider2)},_handleChange:function(swiper){console.log(swiper,"swiper");const{realIndex,activeIndex,slides}=swiper||{},prevSlide=this.container.querySelector('.press-logo--active[data-index="'+this.prevSlideIndex+'"]'),currentSlide=slides[activeIndex];currentSlide&&currentSlide.classList.add("press-logo--active"),prevSlide&&prevSlide.classList.remove("press-logo--active"),this.contentSlider.slideTo(realIndex),this.prevSlideIndex=realIndex},_handleClick:function(swiper){console.log(swiper,"swiper");const{clickedIndex,clickedSlide}=swiper||{},prevSlide=this.container.querySelector('.press-logo--active[data-index="'+this.prevSlideIndex+'"]');clickedSlide&&clickedSlide.classList.add("press-logo--active"),prevSlide&&prevSlide.classList.remove("press-logo--active"),this.contentSlider.slideTo(clickedIndex),this.prevSlideIndex=clickedIndex},onBlockSelect:function(evt){var _this$contentSlider,_this$contentSlider$s,_this$navSlider,_this$navSlider$slide;const block=evt.target,index=Number(block.dataset.index);this===null||this===void 0||(_this$contentSlider=this.contentSlider)===null||_this$contentSlider===void 0||(_this$contentSlider$s=_this$contentSlider.slideTo)===null||_this$contentSlider$s===void 0||_this$contentSlider$s.call(_this$contentSlider,index),this===null||this===void 0||(_this$navSlider=this.navSlider)===null||_this$navSlider===void 0||(_this$navSlider$slide=_this$navSlider.slideTo)===null||_this$navSlider$slide===void 0||_this$navSlider$slide.call(_this$navSlider,index)}}),register("hero",{onLoad:function(){if(this.container.dataset.parallax==="true"&&window.innerWidth>767){const bg=this.container.querySelector(".sf-hero__bg");if(!bg)return;isInViewport(bg)?this._initParallax(bg):window.__sfWindowLoaded?this._initParallax(bg):window.addEventListener("load",()=>this._initParallax(bg))}},_initParallax:function(bg){loadAssets("parallax.js").then(()=>{new window.spratlyLibs.simpleParallax(bg,{scale:1.1,maxTransition:80})}).catch(console.error)}}),register("reviews-page",{onLoad:function(){let wrapper=this.container.querySelector(".sf__masonry-wrapper");loadAssets("tilt.js").then(()=>{setTimeout(()=>{this.msry=new window.spratlyLibs.Masonry(wrapper,{itemSelector:".sf__masonry-item",percentPosition:!0}),this.container.style.removeProperty("opacity")},300)}).catch(console.error)}}),register("page-faqs",{onLoad:function(){this.container.querySelectorAll(".sf__accordio-blocks").forEach(item=>{new Accordion(item,{presetContentHeight:!0})})}}),register("featured-slider",{onLoad:function(){this.selectors={sliderContainer:".featured-slider__products",slideImages:["featured-slider__img"],slideImagesContainer:".featured-slider__images",sliderControls:".sf-slider__controls",prevBtn:".sf-slider__controls-prev",nextBtn:".sf-slider__controls-next"},this.domNodes=queryDomNodes(this.selectors,this.container);const initSlider2=()=>{loadAssets(["swiper.css","swiper.js"]).then(()=>{const showNavigation=this.container.dataset.showNavigation==="true",showPagination=this.container.dataset.showPagination==="true",autoplay=this.container.dataset.autoplay==="true",timeout=this.container.dataset.timeout;this.slider=new window.spratlyTheme.Swiper(this.domNodes.sliderContainer,{speed:400,loop:!1,autoplay:autoplay?{delay:parseInt(timeout),disableOnInteraction:!1}:!1,pagination:showPagination?{el:this.container.querySelector(".swiper-pagination"),type:"bullets",clickable:!0}:!1,on:{init:()=>{if(showNavigation){var _this$domNodes$prevBt,_this$domNodes$nextBt;(_this$domNodes$prevBt=this.domNodes.prevBtn)===null||_this$domNodes$prevBt===void 0||_this$domNodes$prevBt.addEventListener("click",()=>this.slider.slidePrev()),(_this$domNodes$nextBt=this.domNodes.nextBtn)===null||_this$domNodes$nextBt===void 0||_this$domNodes$nextBt.addEventListener("click",()=>this.slider.slideNext()),this.domNodes.prevBtn.disabled=!0}if(window.spratlyTheme.Products.initProductForms({context:this.container}),this.container.dataset.container==="w-full"){const firstItem=this.domNodes.sliderContainer.querySelector(".sf-image");if(firstItem&&this.domNodes.sliderControls){var _this$domNodes$slider;const itemHeight=firstItem.clientHeight,contentHeight=(_this$domNodes$slider=this.domNodes.sliderContainer.querySelector(".featured-slider__product-content"))===null||_this$domNodes$slider===void 0?void 0:_this$domNodes$slider.clientHeight;this.domNodes.sliderControls.style.setProperty("--offset-top",parseInt(itemHeight)/2+parseInt(contentHeight)+24+"px")}}}}}),this.imageSlider=new window.spratlyTheme.Swiper(this.domNodes.slideImagesContainer,{speed:500,loop:!1,effect:"fade",fadeEffect:{crossFade:!0}}),this.slider.on("activeIndexChange",swiper=>{const{activeIndex,isBeginning,isEnd}=swiper;this.imageSlider.slideTo(activeIndex),window.spratlyTheme.Products.initProductForms({context:this.container}),showNavigation&&(this.domNodes.prevBtn.disabled=isBeginning,this.domNodes.nextBtn.disabled=isEnd)}),this.imageSlider.on("activeIndexChange",swiper=>{const{activeIndex}=swiper;this.slider.slideTo(activeIndex)})}).catch(console.error)};isInViewport(this.container)||window.__sfWindowLoaded?initSlider2():window.addEventListener("load",initSlider2)}}),register("brand-list",{onLoad:function(){this.initMobile()},initMobile:function(){if(!(this.container.dataset.enableSlider==="true"))return;const wrapper=this.container.querySelector("[data-wrapper]"),mediaQuery=window.matchMedia("(max-width: 1024px)"),handleChange=e=>{e.matches?(this.initSlider(),wrapper.classList.add("swiper-wrapper")):(this.slider&&this.slider.destroy(!0,!0),wrapper.classList.remove("swiper-wrapper"))};mediaQuery.addListener(handleChange),handleChange(mediaQuery)},initSlider:function(){const autoplay=this.container.dataset.enableAutoplay==="true",autoplaySpeed=this.container.dataset.autoplaySpeed,items=parseInt(this.container.dataset.items),initSlider2=()=>{loadAssets(["swiper.css","swiper.js"]).then(()=>{this.slider=new window.spratlyTheme.Swiper(this.container.querySelector(".swiper-container"),{slidesPerView:items,slidesPerGroup:items,autoplay:autoplay?{delay:parseInt(autoplaySpeed)*1e3}:!1,loop:!0,navigation:{nextEl:this.container.querySelector(".swiper-button-next"),prevEl:this.container.querySelector(".swiper-button-prev")},pagination:{el:this.container.querySelector(".swiper-pagination"),clickable:!0}})})};isInViewport(this.container)||window.__sfWindowLoaded?initSlider2():window.addEventListener("load",initSlider2)}}),register("sf-collapsible",{onLoad:function(){const accContainer=this.container.querySelector(".prod__accordion");this.acc=new Accordion(accContainer),this.container.classList.add("opacity-100")},onBlockSelect:function(ev){var _ev$target,_ev$target$dataset;const index=Number(ev==null||(_ev$target=ev.target)===null||_ev$target===void 0||(_ev$target$dataset=_ev$target.dataset)===null||_ev$target$dataset===void 0?void 0:_ev$target$dataset.index)||0;if(this.acc){var _accItem$classList,_accItem$classList$co;const accItem=this.acc.domNodes.items[index];if(!(accItem==null||(_accItem$classList=accItem.classList)===null||_accItem$classList===void 0||(_accItem$classList$co=_accItem$classList.contains)===null||_accItem$classList$co===void 0?void 0:_accItem$classList$co.call(_accItem$classList,"open"))){var _this$acc;this===null||this===void 0||(_this$acc=this.acc)===null||_this$acc===void 0||_this$acc.toggle(index)}}},onBlockDeselect:function(ev){var _ev$target2,_ev$target2$dataset;const index=Number(ev==null||(_ev$target2=ev.target)===null||_ev$target2===void 0||(_ev$target2$dataset=_ev$target2.dataset)===null||_ev$target2$dataset===void 0?void 0:_ev$target2$dataset.index)||0;if(this.acc){var _accItem$classList2,_accItem$classList2$c;const accItem=this.acc.domNodes.items[index];if(accItem==null||(_accItem$classList2=accItem.classList)===null||_accItem$classList2===void 0||(_accItem$classList2$c=_accItem$classList2.contains)===null||_accItem$classList2$c===void 0?void 0:_accItem$classList2$c.call(_accItem$classList2,"open")){var _this$acc2;this===null||this===void 0||(_this$acc2=this.acc)===null||_this$acc2===void 0||_this$acc2.toggle(index)}}}}),register("featured-product",{onLoad:function(){var _window$spratlyTheme,_window$spratlyTheme$,_window$spratlyTheme$2,_window$spratlyTheme$3;(_window$spratlyTheme=window.spratlyTheme)===null||_window$spratlyTheme===void 0||(_window$spratlyTheme$=_window$spratlyTheme.Products)===null||_window$spratlyTheme$===void 0||(_window$spratlyTheme$2=_window$spratlyTheme$.initProductForms)===null||_window$spratlyTheme$2===void 0||(_window$spratlyTheme$3=_window$spratlyTheme$2.call(_window$spratlyTheme$,{context:this.container}))===null||_window$spratlyTheme$3===void 0||_window$spratlyTheme$3.catch(console.error),this.container.querySelectorAll(".prod__accordion").forEach(acc=>new Accordion(acc))}}),register("collection-template",{onLoad:()=>loadAssets("collection.js")}),register("collection-header",{onLoad:function(){if(this.container.dataset.enableParallax==="true"&&window.innerWidth>767){const bg=this.container.querySelector(".collection-header__bg");loadAssets("parallax.js").then(()=>{new window.spratlyLibs.simpleParallax(bg,{scale:1.1,customWrapper:".collection-header"})})}}}),register("brand-header",{onLoad:function(){this.initGallery()},initGallery:function(){const slider=this.container.querySelector(".brand-header__gallery");slider.querySelectorAll(".brand-header__gallery-img").length>1&&loadAssets(["swiper.css","swiper.js"]).then(()=>{this.slider=new window.spratlyTheme.Swiper(slider,{autoplay:{delay:5e3},slidesPerView:1,loop:!0,fadeEffect:{crossFade:!0},pagination:{el:this.container.querySelector(".swiper-pagination"),clickable:!0}})})}});function getProductJson(handle){return fetch("/products/"+handle+".js").then(function(response){return response.json()})}function getVariantFromId(product,value){if(_validateProductStructure(product),typeof value!="number")throw new TypeError(value+" is not a Number.");var result=product.variants.filter(function(variant){return variant.id===value});return result[0]||null}function getVariantFromSerializedArray(product,collection){_validateProductStructure(product);var optionArray=_createOptionArrayFromOptionCollection(product,collection);return getVariantFromOptionArray(product,optionArray)}function getVariantFromOptionArray(product,options){_validateProductStructure(product),_validateOptionsArray(options);var result=product.variants.filter(function(variant){return options.every(function(option,index){return variant.options[index]===option})});return result[0]||null}function _createOptionArrayFromOptionCollection(product,collection){_validateProductStructure(product),_validateSerializedArray(collection);var optionArray=[];return collection.forEach(function(option){for(var i=0;i<product.options.length;i++)if(product.options[i].name.toLowerCase()===option.name.toLowerCase()){optionArray[i]=option.value;break}}),optionArray}function _validateProductStructure(product){if(typeof product!="object")throw new TypeError(product+" is not an object.");if(Object.keys(product).length===0&&product.constructor===Object)throw new Error(product+" is empty.")}function _validateSerializedArray(collection){if(!Array.isArray(collection))throw new TypeError(collection+" is not an array.");if(collection.length===0)return[];if(collection[0].hasOwnProperty("name")){if(typeof collection[0].name!="string")throw new TypeError("Invalid value type passed for name of option "+collection[0].name+". Value should be string.")}else throw new Error(collection[0]+"does not contain name key.")}function _validateOptionsArray(options){if(Array.isArray(options)&&typeof options[0]=="object")throw new Error(options+"is not a valid array of options.")}function Listeners(){this.entries=[]}Listeners.prototype.add=function(element,event,fn){this.entries.push({element,event,fn}),element.addEventListener(event,fn)},Listeners.prototype.removeAll=function(){this.entries=this.entries.filter(function(listener){return listener.element.removeEventListener(listener.event,listener.fn),!1})};var selectors={idInput:'[name="id"]',optionInput:'[name^="options"]',quantityInput:'[name="quantity"]',propertyInput:'[name^="properties"]'};function getUrlWithVariant(url,id){return/variant=/.test(url)?url.replace(/(variant=)[^&]+/,"$1"+id):/\?/.test(url)?url.concat("&variant=").concat(id):url.concat("?variant=").concat(id)}function ProductForm(element,product,options){this.element=element,this.product=_validateProductObject(product),options=options||{},this._listeners=new Listeners,this._listeners.add(this.element,"submit",this._onSubmit.bind(this,options)),this.optionInputs=this._initInputs(selectors.optionInput,options.onOptionChange),this.quantityInputs=this._initInputs(selectors.quantityInput,options.onQuantityChange),this.propertyInputs=this._initInputs(selectors.propertyInput,options.onPropertyChange)}ProductForm.prototype.destroy=function(){this._listeners.removeAll()},ProductForm.prototype.options=function(){return _serializeOptionValues(this.optionInputs,function(item){var regex=/(?:^(options\[))(.*?)(?:\])/;return item.name=regex.exec(item.name)[2],item})},ProductForm.prototype.variant=function(){return getVariantFromSerializedArray(this.product,this.options())},ProductForm.prototype.properties=function(){var properties=_serializePropertyValues(this.propertyInputs,function(propertyName){var regex=/(?:^(properties\[))(.*?)(?:\])/,name=regex.exec(propertyName)[2];return name});return Object.entries(properties).length===0?null:properties},ProductForm.prototype.quantity=function(){return this.quantityInputs[0]?Number.parseInt(this.quantityInputs[0].value,10):1},ProductForm.prototype._setIdInputValue=function(value){var idInputElement=this.element.querySelector(selectors.idInput);idInputElement||(idInputElement=document.createElement("input"),idInputElement.type="hidden",idInputElement.name="id",this.element.appendChild(idInputElement)),idInputElement.value=value.toString()},ProductForm.prototype._onSubmit=function(options,event){event.dataset=this._getProductFormEventData(),event.dataset.variant&&this._setIdInputValue(event.dataset.variant.id),options.onFormSubmit&&options.onFormSubmit(event)},ProductForm.prototype._onFormEvent=function(cb){return typeof cb>"u"?Function.prototype:function(event){event.dataset=this._getProductFormEventData(),cb(event)}.bind(this)},ProductForm.prototype._initInputs=function(selector,cb){var elements=Array.prototype.slice.call(this.element.querySelectorAll(selector));return elements.map(function(element){return this._listeners.add(element,"change",this._onFormEvent(cb)),element}.bind(this))},ProductForm.prototype._getProductFormEventData=function(){return{options:this.options(),variant:this.variant(),properties:this.properties(),quantity:this.quantity()}};function _serializeOptionValues(inputs,transform){return inputs.reduce(function(options,input){return(input.checked||input.type!=="radio"&&input.type!=="checkbox")&&options.push(transform({name:input.name,value:input.value})),options},[])}function _serializePropertyValues(inputs,transform){return inputs.reduce(function(properties,input){return(input.checked||input.type!=="radio"&&input.type!=="checkbox")&&(properties[transform(input.name)]=input.value),properties},{})}function _validateProductObject(product){if(typeof product!="object")throw new TypeError(product+" is not an object.");if(typeof product.variants[0].options>"u")throw new TypeError("Product object is invalid. Make sure you use the product object that is output from {{ product | json }} or from the http://[your-product-url].js route");return product}var product_fns_createElement=__webpack_require__(6295).default;const themeProducts=window._themeProducts||{},fetchProductByHandle=async handle=>{const product=await(0,utilities_fetch.fetchJsonCache)(`/products/${handle}.js`).catch(console.error);return product?(themeProducts[product.id]=product,product):!1},getProductData=async({productId,productHandle})=>{var _productData,_productData2;let productData=themeProducts[productId];return productData||(productData=await fetchProductByHandle(productHandle).catch(console.error)),productData.has_only_default_variant=((_productData=productData)===null||_productData===void 0?void 0:_productData.has_only_default_variant)||productHasOnlyDefaultVariant((_productData2=productData)===null||_productData2===void 0?void 0:_productData2.options),Object.assign({},productData)},getProductJSON=async handle=>{const html=await fetchCache(`/products/${handle}?section_id=product-json`);if(html&&!/^<!doctype html>/.test(html)){const node=product_fns_createElement("div",null);node.innerHTML=html;const productJSONNode=node.querySelector("script.product-json");if(productJSONNode){const data2=JSON.parse(productJSONNode.innerText);if(data2){const{dataset}=productJSONNode;Object.entries(dataset).forEach(([k,v])=>data2[camelCaseToSnakeCase(k)]=["true","false"].indexOf(v)+1?v==="true":v);const selectedVariantNode=node.querySelector("script.selected-variant-json");selectedVariantNode&&(data2.selected_variant=JSON.parse(selectedVariantNode.innerText));const selectedOrFirstAvailableVariantNode=node.querySelector("script.selected-or-first-available-variant-json");return selectedOrFirstAvailableVariantNode&&(data2.selected_or_first_available_variant=JSON.parse(selectedOrFirstAvailableVariantNode.innerText)),data2}}}return null},getProductsJSON=async handles=>{const productData={},promises=handles.map(async hdl=>{productData[hdl]=await getProductJSON(hdl)});return await Promise.all(promises),handles.map(hdl=>productData[hdl])},productHasOnlyDefaultVariant=prodOptions=>{if(Array.isArray(prodOptions)&&prodOptions.length===1){var _firstOption$values;const firstOption=prodOptions[0];if(firstOption?.name==="Title"&&(firstOption==null||(_firstOption$values=firstOption.values)===null||_firstOption$values===void 0?void 0:_firstOption$values.join())==="Default Title")return!0}return!1},getProductInstances=query2=>{let fieldSearch="id";return typeof query2=="string"&&(fieldSearch="handle"),window.spratlyTheme.Products.productInstances.filter(pro=>{var _pro$productData;return((_pro$productData=pro.productData)===null||_pro$productData===void 0?void 0:_pro$productData[fieldSearch])===query2})};window._getProductInstances=getProductInstances;const getThemeProductSettings=()=>{if(window.themeProductSettings)return window.themeProductSettings;const{spratlyThemeSettings,adminThemeSettings:{product_colors,use_ajax_atc},money_format}=window;let colorSwatch=[],imageSwatch=[];try{colorSwatch=product_colors.split(",").filter(Boolean).map(item=>{const[key,value]=item.split(":");return{key:key.trim().toLowerCase(),value:value?.trim()}}),Object.keys(spratlyThemeSettings).forEach(key=>{key.includes("filter_color")&&!key.includes(".png")&&spratlyThemeSettings[`${key}.png`]&&imageSwatch.push({key:spratlyThemeSettings[key].toLowerCase(),value:spratlyThemeSettings[`${key}.png`]})})}catch(e){console.error("Failed to convert color/image swatch structure!",e)}const productSettings={colorSwatch,imageSwatch,use_ajax_atc,money_format};return window.themeProductSettings=productSettings,productSettings},isValidColor=color=>{const otpNode=new Option;return otpNode.style.color=color.replace(/\s/g,"").toLowerCase(),otpNode.style.color===color},getOptionValueFromOptionNode=optNode=>optNode.type==="checkbox"?optNode.value:optNode.tagName==="OPTION"?optNode.closest("select").value:optNode.innerText.trim(),commonConfigs={loop:!0},configs={mobile:{autoHeight:!0,loop:!0},"quick-view":{autoHeight:!0},"layout-4":{},"layout-5":{slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,watchSlidesVisibility:!0,breakpoints:{768:{slidesPerView:2,slidesPerGroup:2,spaceBetween:10}}},"layout-6":{},"layout-7":{slidesPerView:3,speed:500,centeredSlides:!0}};function getProductSliderConfig(layout){const conf=configs[layout]||configs["layout-4"];return Object.assign({},commonConfigs,conf)}customElements.define("product-model",class extends HTMLElement{constructor(){super()}loadContent(){super.loadContent(),Shopify.loadFeatures([{name:"model-viewer-ui",version:"1.0",onLoad:this.setupModelViewerUI.bind(this)}])}setupModelViewerUI(errors){errors||(this.modelViewerUI=new Shopify.ModelViewerUI(this.querySelector("model-viewer")))}});const ProductModel={loadShopifyXR(){Shopify.loadFeatures([{name:"shopify-xr",version:"1.0",onLoad:this.setupShopifyXR.bind(this)}])},setupShopifyXR(errors){if(!errors){if(!window.ShopifyXR){document.addEventListener("shopify_xr_initialized",()=>{this.setupShopifyXR()});return}document.querySelectorAll('[id^="ProductJSON-"]').forEach(modelJSON=>{window.ShopifyXR.addModels(JSON.parse(modelJSON.textContent)),modelJSON.remove()}),window.ShopifyXR.setupXRElements()}}};class ProductHelper{constructor({container,productData}){var _container$dataset;_defineProperty(this,"mediaMode",""),_defineProperty(this,"view",""),_defineProperty(this,"selectors",{form:"form[data-product-id]",productSection:'[data-section-type="product-page"]',infoWrapper:".sf-prod__info-wrapper",info:".sf-prod__info",featuredImage:".spc__main-img",mediaWrapper:".sf-prod-media__wrapper",previewWrapper:".sf-preview__wrapper",mediaDesktop:".sf-product-media__desktop",mediaMobile:".sf-product-media__mobile",slider:".swiper-container",sliderPagination:".swiper-pagination",sliderPrevEl:".swiper-button-prev",sliderNextEl:".swiper-button-next",navSlider:".nav-swiper-container",navSliderMobile:".nav-swiper-container-mobile",medias:[".sf-prod-media-item"],mediaZoomIns:[".sf-prod-media__zoom-in"],videos:[".media-video"]}),_defineProperty(this,"currPlayer",void 0),_defineProperty(this,"mobileSlider",null),_defineProperty(this,"enableVideoAutoplay",!1),_defineProperty(this,"init",async()=>{var _this$container,_this$container$close,_this$container$close2,_this$container$close3;switch(this.view){case"product-template":this.layout=((_this$container=this.container)===null||_this$container===void 0||(_this$container$close=_this$container.closest)===null||_this$container$close===void 0||(_this$container$close2=_this$container$close.call(_this$container,'section[data-section-type="product-page"]'))===null||_this$container$close2===void 0||(_this$container$close3=_this$container$close2.dataset)===null||_this$container$close3===void 0?void 0:_this$container$close3.layout)||"layout-1",window.__sfWindowLoaded?(this.initLightbox(),this.initPlyrs()):window.addEventListener("load",()=>{this.initPlyrs(),this.initLightbox()}),this.addEventToMainMedias(),await this.initSlider(),this.mediaMode!=="slider"&&(this.mediaMode="gallery"),this.productData.has_3d_model&&ProductModel.loadShopifyXR();break;case"featured-product":this.initSlider();break;case"card":this.mediaMode="featured-image";break;case"sticky-atc":this.mediaMode="featured-image";break;case"quick-view":this.mediaMode="featured-image",this.initSlider();break;default:console.warn("Unknown product view: ",this,this.view);break}}),_defineProperty(this,"initPlyrs",()=>{var _this$domNodes,_this$domNodes$videos;(_this$domNodes=this.domNodes)!==null&&_this$domNodes!==void 0&&(_this$domNodes$videos=_this$domNodes.videos)!==null&&_this$domNodes$videos!==void 0&&_this$domNodes$videos.length&&loadAssets(["plyr.css","plyr.js"]).then(()=>{var _ref,_this$domNodes2;(_ref=[...(_this$domNodes2=this.domNodes)===null||_this$domNodes2===void 0?void 0:_this$domNodes2.videos])===null||_ref===void 0||_ref.forEach(vid=>{var _vid$classList;const elm=vid!=null&&(_vid$classList=vid.classList)!==null&&_vid$classList!==void 0&&_vid$classList.contains("local-video")?vid?.querySelector("video"):vid,player=new window.spratlyLibs.Plyr(elm);if(player.on("playing",()=>{if((this===null||this===void 0?void 0:this.currPlayer)!==player){var _this$currPlayer,_this$currPlayer$paus;this===null||this===void 0||(_this$currPlayer=this.currPlayer)===null||_this$currPlayer===void 0||(_this$currPlayer$paus=_this$currPlayer.pause)===null||_this$currPlayer$paus===void 0||_this$currPlayer$paus.call(_this$currPlayer),this.currPlayer=player}}),vid.plyr=player,this.enableVideoAutoplay&&!elm.closest(".product-mb__media")){const nodeToObserve=elm.closest(".sf-prod-media-item"),observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.intersectionRatio===1){var _this$currPlayer2,_this$currPlayer2$pau;this===null||this===void 0||(_this$currPlayer2=this.currPlayer)===null||_this$currPlayer2===void 0||(_this$currPlayer2$pau=_this$currPlayer2.pause)===null||_this$currPlayer2$pau===void 0||_this$currPlayer2$pau.call(_this$currPlayer2),player.play(),this.currPlayer=player}else player.pause()})},{threshold:1});observer.observe(nodeToObserve),player.on("pause",()=>observer.unobserve(nodeToObserve))}})}).catch(err=>console.error("Failed to init Plyr",err))}),_defineProperty(this,"initLightbox",()=>{loadAssets(["glightbox.css","glightbox.js"]).then(()=>{var _this$productData,_this$productData$med;const elements=this===null||this===void 0||(_this$productData=this.productData)===null||_this$productData===void 0||(_this$productData$med=_this$productData.media)===null||_this$productData$med===void 0?void 0:_this$productData$med.map(media=>{if(media.media_type==="image")return{href:media.src,type:"image"};if(media.media_type==="external_video")return{href:getVideoURL(media.external_id,media.host),type:"video",source:media.host};if(media.media_type==="video"){var _media$sources,_media$sources$;return{href:media==null||(_media$sources=media.sources)===null||_media$sources===void 0||(_media$sources$=_media$sources[0])===null||_media$sources$===void 0?void 0:_media$sources$.url,type:"video"}}if(media.media_type==="model"){var _document$querySelect;const mediaElem=(_document$querySelect=document.querySelector(`.media-model[data-media-id="${media.id}"]`))===null||_document$querySelect===void 0?void 0:_document$querySelect.cloneNode(!0);return mediaElem.classList.remove("hidden"),mediaElem.classList.add("model-in-lightbox"),{content:mediaElem,width:"80vw",height:"70vh"}}});this.lightbox=new window.spratlyLibs.GLightbox({elements,openEffect:"fade",closeEffect:"fade",draggable:!1,autofocusVideos:!0})}).catch(err=>console.error("Failed to init Glightbox",err))}),_defineProperty(this,"initSlider",async()=>{var _this$domNodes3;this!==null&&this!==void 0&&(_this$domNodes3=this.domNodes)!==null&&_this$domNodes3!==void 0&&_this$domNodes3.slider&&(this.mediaMode="slider",loadAssets(["swiper.css","swiper.js"]).then(()=>{const{view,domNodes:{slider,sliderPagination,navSlider,sliderNextEl:nextEl,sliderPrevEl:prevEl}}=this,layout=view==="product-template"?this.layout:view;let initialSlide=0;if(this.productData.initialVariant&&this.productData.selected_variant){var _this$productData$ini;initialSlide=((_this$productData$ini=this.productData.initialVariant.featured_media)===null||_this$productData$ini===void 0?void 0:_this$productData$ini.position)-1||0}this.navSlider=navSlider?new window.spratlyTheme.Swiper(navSlider,{initialSlide,slidesPerView:5,freeMode:!0,spaceBetween:10,watchSlidesVisibility:!0,watchSlidesProgress:!0,direction:layout==="layout-6"?"vertical":"horizontal",on:{init:()=>navSlider.style.opacity=1}}):null;const thumbs=this.navSlider?{thumbs:{swiper:this.navSlider}}:{},config=Object.assign({},getProductSliderConfig(layout),{initialSlide,autoHeight:!0,navigation:{nextEl,prevEl},pagination:{el:sliderPagination,clickable:!0,type:"bullets"},...thumbs,on:{init:()=>{slider.style.opacity=1,this.domNodes=queryDomNodes(this.selectors,this.container)}}});this.view==="product-template"?(src_default().register("screen and (max-width: 767px)",{match:this.initMobileSlider}),src_default().register("screen and (min-width: 768px)",{match:()=>this.slider=new window.spratlyTheme.Swiper(slider,config)})):this.slider=new window.spratlyTheme.Swiper(slider,config),this.handleSlideChange()}).catch(err=>console.error("Failed to init Slider",err)))}),_defineProperty(this,"initMobileSlider",()=>{const{domNodes:{navSliderMobile}}=this;let initialSlide=0;if(this.productData.initialVariant&&this.productData.selected_variant){var _this$productData$ini2;initialSlide=((_this$productData$ini2=this.productData.initialVariant.featured_media)===null||_this$productData$ini2===void 0?void 0:_this$productData$ini2.position)-1||0}this.navSliderMobile=navSliderMobile?new window.spratlyTheme.Swiper(navSliderMobile,{initialSlide,slidesPerView:3,spaceBetween:10,loop:!0,centeredSlides:!0,slideToClickedSlide:!0,on:{init:()=>navSliderMobile.style.opacity=1}}):null;const slider=this.domNodes.mediaMobile.querySelector(this.selectors.slider);this.mobileSlider=new window.spratlyTheme.Swiper(slider,{initialSlide,autoHeight:!0,loop:!0,pagination:{el:this.domNodes.mediaMobile.querySelector(this.selectors.sliderPagination),clickable:!0,type:"bullets"},thumbs:{swiper:this.navSliderMobile},on:{init:()=>slider.style.opacity=1}})}),_defineProperty(this,"handleSlideChange",()=>{if(!this.slider)return;let draggable=!0,mediaType="",visibleSlides=[];const{previewWrapper}=this.domNodes;this.slider.on("slideChange",swiper=>{try{var _this$currPlayer3,_this$currPlayer3$pau;const{slides,activeIndex}=swiper;if(previewWrapper){const aspectRatio=slides[activeIndex].dataset.aspectRatio||1,scale=(this.view==="product-template"?this.layout:this.view)==="layout-5"?2:1;previewWrapper.style.setProperty("--aspect-ratio",aspectRatio*scale)}this===null||this===void 0||(_this$currPlayer3=this.currPlayer)===null||_this$currPlayer3===void 0||(_this$currPlayer3$pau=_this$currPlayer3.pause)===null||_this$currPlayer3$pau===void 0||_this$currPlayer3$pau.call(_this$currPlayer3);const currSlide=slides[activeIndex];if(currSlide&&currSlide.dataset.mediaType==="video"){const player=currSlide.firstElementChild.plyr;player&&(player.play(),this.currPlayer=player)}visibleSlides=[activeIndex],(this.layout==="layout-5"||this.layout==="layout-7")&&visibleSlides.push(activeIndex+1);for(let index of visibleSlides){var _currSlide$dataset;const currSlide2=slides[index];if(mediaType=currSlide2==null||(_currSlide$dataset=currSlide2.dataset)===null||_currSlide$dataset===void 0?void 0:_currSlide$dataset.mediaType,mediaType==="model")break}mediaType==="model"?(this.slider.allowTouchMove=!1,draggable=!1):(draggable||(this.slider.allowTouchMove=!0),draggable=!0)}catch(error){console.error("Failed to execute slideChange event.",error)}})}),_defineProperty(this,"changeMediaByVariant",variant=>{if(variant){if(this.mediaMode==="slider"){if(variant.featured_media){var _variant$featured_med,_this$slider,_this$slider$slideToL,_this$mobileSlider,_this$mobileSlider$sl;const slideIndex=(variant==null||(_variant$featured_med=variant.featured_media)===null||_variant$featured_med===void 0?void 0:_variant$featured_med.position)||0;this===null||this===void 0||(_this$slider=this.slider)===null||_this$slider===void 0||(_this$slider$slideToL=_this$slider.slideToLoop)===null||_this$slider$slideToL===void 0||_this$slider$slideToL.call(_this$slider,slideIndex-1),this===null||this===void 0||(_this$mobileSlider=this.mobileSlider)===null||_this$mobileSlider===void 0||(_this$mobileSlider$sl=_this$mobileSlider.slideToLoop)===null||_this$mobileSlider$sl===void 0||_this$mobileSlider$sl.call(_this$mobileSlider,slideIndex-1)}}else if(this.mediaMode==="featured-image"){var _variant$featured_ima;const src2=variant==null||(_variant$featured_ima=variant.featured_image)===null||_variant$featured_ima===void 0?void 0:_variant$featured_ima.src,{featuredImage}=this.domNodes,img=featuredImage?.querySelector("img");if(img&&src2){var _this$productData2,_this$productData2$in,_featuredImage$classL,_featuredImage$classL2;img.src=src2,img.removeAttribute("srcset");const method=((_this$productData2=this.productData)===null||_this$productData2===void 0||(_this$productData2$in=_this$productData2.initialVariant)===null||_this$productData2$in===void 0?void 0:_this$productData2$in.id)===variant?.id?"add":"remove";featuredImage==null||(_featuredImage$classL=featuredImage.classList)===null||_featuredImage$classL===void 0||(_featuredImage$classL2=_featuredImage$classL[method])===null||_featuredImage$classL2===void 0||_featuredImage$classL2.call(_featuredImage$classL,"group-hover:opacity-0")}}}}),_defineProperty(this,"addEventToMainMedias",()=>{addEventDelegate({selector:this.selectors.medias[0],handler:(e,media)=>{var _e$target;const isImage=media.classList.contains("media-type-image"),isZoomButton=e==null||(_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.closest(this.selectors.mediaZoomIns[0]);if(isImage||isZoomButton){var _media$dataset,_this$currPlayer4,_this$lightbox;const index=Number(media==null||(_media$dataset=media.dataset)===null||_media$dataset===void 0?void 0:_media$dataset.index)||0;(_this$currPlayer4=this.currPlayer)===null||_this$currPlayer4===void 0||_this$currPlayer4.pause(),this===null||this===void 0||(_this$lightbox=this.lightbox)===null||_this$lightbox===void 0||_this$lightbox.openAt(index)}}})}),this.productData=productData,this.container=container,this.view=(container==null||(_container$dataset=container.dataset)===null||_container$dataset===void 0?void 0:_container$dataset.view)||"product-template",this.domNodes=queryDomNodes(this.selectors,this.container),this.enableVideoAutoplay=this.domNodes.form.dataset.enableVideoAutoplay==="true",this.init().catch(console.error)}}var AmyrisThemeSettings=__webpack_require__(4558).AmyrisThemeSettings,product_AmyrisTheme=__webpack_require__(4558).AmyrisTheme;class Product{constructor(productForm,_options={}){var _productForm$classLis,_window8,_window8$spratlyTheme,_window8$spratlyTheme2,_window8$spratlyTheme3;if(_defineProperty(this,"selectors",{price:".prod__price",comparePrice:".prod__compare_price",error:".prod__form-error",addToCart:".add-to-cart",variantIdNode:'[name="id"]',optionNodes:[".product-option-item"],optionLabels:["[data-option-label]"],quantityInput:'.quantity-input__element[name="quantity"]',quantityBtns:[".quantity-input__button"],variantDropdown:".sf-product-variant-option-dropdown",dynamicCheckout:".prod__dynamic_checkout",productSKU:"[data-product-sku]",productAvailability:"[data-availability]",savingLabel:".prod__tag-saving",savingAmount:"[data-saved-price]",unitPrice:".price-unit-price",stockCountdown:".prod__stock-countdown"}),_defineProperty(this,"setData",()=>{this.view=this.productBlock.dataset.view||"product-template",this.hasCustomRequiredFields=!!this.productForm.querySelector(".product__custom-field [name][required]"),this.hide_unavailable_product_options=AmyrisThemeSettings.hide_unavailable_product_options,this.themeProductSettings=getThemeProductSettings(),this.activeOptionNodeByPosition={},this.listeners=[]}),_defineProperty(this,"init",async()=>{var _this$productData;this.productData=await getProductData(this.productForm.dataset),(_this$productData=this.productData)!==null&&_this$productData!==void 0&&_this$productData.variants&&(this.domNodes.dynamicCheckout&&(this.productData.enable_dynamic_checkout=!0),this.initProductEvents(),this.productHelper=new ProductHelper({container:this.productBlock,productData:this.productData}),this.initProductVariant())}),_defineProperty(this,"initProductVariant",()=>{const{domNodes:{variantIdNode},productData,productData:{variants}={}}=this;if(productData&&variantIdNode){let currentVariantId=Number(variantIdNode.value);currentVariantId||(currentVariantId=productData.selected_or_first_available_variant?.id);const currentVariant=variants.find(v=>v.id===currentVariantId)||variants[0];this.productData.initialVariant=currentVariant,!this.productData.selected_variant&&variantIdNode.dataset.selectedVariant&&(this.productData.selected_variant=variants.find(v=>v.id===Number(variantIdNode.dataset.selectedVariant))),currentVariant!=null&&currentVariant.options&&(this.view==="card"?this.updateOptionByVariant(currentVariant):this.updateBySelectedVariant(currentVariant)),this.initOptions()}}),_defineProperty(this,"initOptions",()=>{const{themeProductSettings={},domNodes:{optionNodes},productData:{variants,aspect_ratio}={}}=this;optionNodes.forEach(optNode=>{const{optionType,value:optionValue}=optNode?.dataset,optionValueLowerCase=optionValue?.toLowerCase();if(["image","default"].includes(optionType)){const{optionPosition}=optNode.dataset,variantToShowSwatchImage=variants.find(v=>v[`option${optionPosition}`]===optionValue);if(variantToShowSwatchImage){var _variantToShowSwatchI;const src2=variantToShowSwatchImage==null||(_variantToShowSwatchI=variantToShowSwatchImage.featured_image)===null||_variantToShowSwatchI===void 0?void 0:_variantToShowSwatchI.src;src2&&(optNode.classList.add("show-swatch-image"),optNode.style.backgroundImage=`url(${src2})`,optNode.style["--option-aspect-ratio"]=aspect_ratio)}const{imageSwatch=[]}=themeProductSettings,customImage=imageSwatch.find(i=>i.key===optionValueLowerCase);customImage!=null&&customImage.value&&(optNode.style.backgroundImage=`url(${customImage.value})`,optNode.style.backgroundSize="cover",optNode.style.backgroundPosition="center",optNode.style.fontSize="0",optNode.style.lineHeight="0")}if(optionType==="color"){const{colorSwatch=[],imageSwatch=[]}=themeProductSettings,customColor=colorSwatch.find(i=>i.key===optionValueLowerCase),customImage=imageSwatch.find(i=>i.key===optionValueLowerCase);customImage!=null&&customImage.value?(optNode.style.backgroundImage=`url(${customImage.value})`,optNode.style.backgroundSize="cover",optNode.style.backgroundPosition="center"):customColor!=null&&customColor.value?optNode.style.backgroundColor=customColor.value:isValidColor(optionValueLowerCase)?optNode.style.backgroundColor=optionValueLowerCase:optNode.textContent=optionValueLowerCase}})}),_defineProperty(this,"initProductEvents",async()=>{this.listeners=[addEventDelegate({event:"change",context:this.productForm,selector:this.selectors.variantDropdown,handler:this.handleSelectVariant}),addEventDelegate({context:this.productForm,selector:this.selectors.optionNodes[0],handler:this.handleSelectVariant}),addEventDelegate({context:this.productForm,selector:this.selectors.addToCart,handler:this.handleAddToCart}),addEventDelegate({context:this.productForm,selector:this.selectors.quantityBtns[0],handler:this.handleQtyBtnClick}),addEventDelegate({event:"change",context:this.productForm,selector:this.selectors.quantityInput,handler:this.handleQtyInputChange})];const{dynamicCheckout}=this.domNodes;dynamicCheckout&&this.hasCustomRequiredFields&&dynamicCheckout.addEventListener("click",e=>{const missing=productFormCheck(this.productForm);if(missing.length>0){var _window;e.stopPropagation(),Notification.show({target:this.domNodes.error,method:"appendChild",type:"warning",message:(_window=window)===null||_window===void 0?void 0:_window.spratlyThemeStrings.requiredField,delay:100}),console.warn("Missing field(s): ",missing)}},!0)}),_defineProperty(this,"unsubscribeEvents",()=>{this.listeners.forEach(unsubscribeFunc=>unsubscribeFunc())}),_defineProperty(this,"handleQtyInputChange",e=>{var _window2,_window2$_ThemeEvent;(_window2=window)===null||_window2===void 0||(_window2$_ThemeEvent=_window2._ThemeEvent)===null||_window2$_ThemeEvent===void 0||_window2$_ThemeEvent.emit(`${this.productData.id}__QUANTITY_CHANGE`,Number(e.target.value),this)}),_defineProperty(this,"handleQtyBtnClick",(e,btn)=>{var _window3,_window3$_ThemeEvent;const{quantitySelector}=btn.dataset,{quantityInput}=this.domNodes,currentQty=Number(quantityInput.value);let newQty=currentQty;quantitySelector==="decrease"?newQty=currentQty>1?currentQty-1:1:newQty=currentQty+1,quantityInput.value=newQty,(_window3=window)===null||_window3===void 0||(_window3$_ThemeEvent=_window3._ThemeEvent)===null||_window3$_ThemeEvent===void 0||_window3$_ThemeEvent.emit(`${this.productData.id}__QUANTITY_CHANGE`,newQty,this)}),_defineProperty(this,"getVariantFromActiveOptions",()=>{const{productData,productData:{initialVariant},activeOptionNodeByPosition,productBlock}=this;let options;if(productBlock.dataset.view==="card"){const initialVariantOptions={1:initialVariant.option1,2:initialVariant.option2,3:initialVariant.option3};Object.values(activeOptionNodeByPosition).forEach(optNode=>{const{optionPosition,value}=optNode.dataset;initialVariantOptions[optionPosition]=value}),options=Object.values(initialVariantOptions)}else options=Object.values(activeOptionNodeByPosition).map(optNode=>optNode.dataset.value);options=options.filter(Boolean);let variant=getVariantFromOptionArray(productData,options);return!variant&&this.hide_unavailable_product_options&&(options.pop(),variant=getVariantFromOptionArray(productData,options),variant||(options.pop(),variant=getVariantFromOptionArray(productData,options))),variant}),_defineProperty(this,"handleSelectVariant",e=>{let{target}=e,newVariant;if(target.classList.contains("combined-variant")){var _e$target,_this$productData2,_this$productData2$va,_this$productData2$va2;const variantId=Number(e==null||(_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.value);newVariant=(_this$productData2=this.productData)===null||_this$productData2===void 0||(_this$productData2$va=_this$productData2.variants)===null||_this$productData2$va===void 0||(_this$productData2$va2=_this$productData2$va.find)===null||_this$productData2$va2===void 0?void 0:_this$productData2$va2.call(_this$productData2$va,v=>v.id===variantId)}else{target.tagName==="SELECT"&&(target=target.querySelectorAll("option")[target.selectedIndex]),target.classList.contains("product-option-item")||(target=target.closest(".product-option-item"),target&&console.error("Unable to find option node!"));const{optionPosition}=target.dataset,currActiveOptNode=this.activeOptionNodeByPosition[optionPosition];this.toggleOptionNodeActive(currActiveOptNode,!1),this.toggleOptionNodeActive(target,!0),newVariant=this.getVariantFromActiveOptions()}const{variantIdNode}=this.domNodes;if(variantIdNode){var _newVariant,_newVariant2;variantIdNode.setAttribute("value",String((_newVariant=newVariant)===null||_newVariant===void 0?void 0:_newVariant.id)),variantIdNode.value=String((_newVariant2=newVariant)===null||_newVariant2===void 0?void 0:_newVariant2.id)}this.updateBySelectedVariant(newVariant)}),_defineProperty(this,"hideSoldoutAndUnavailableOptions",variant=>{const{productData,productData:{variants,options:{length:maxOptions}},domNodes:{optionNodes}}=this;optionNodes.forEach(optNode=>{const{optionPosition,value}=optNode.dataset,optPos=Number(optionPosition);let matchVariants=[];if(optPos===maxOptions){const optionsArray=Array.from(variant.options);optionsArray[maxOptions-1]=value,matchVariants.push(getVariantFromOptionArray(productData,optionsArray))}else matchVariants=variants.filter(v=>v.options[optPos-1]===value&&v.options[optPos-2]===variant[`option${optPos-1}`]);matchVariants=matchVariants.filter(Boolean);const unavailableOptClass=this.hide_unavailable_product_options?"unavailable-opt":"_";if(matchVariants.length){optNode.classList.remove(unavailableOptClass);const method=matchVariants.every(v=>v.available===!1)?"add":"remove";optNode.classList[method]("soldout-opt")}else optNode.classList.add(unavailableOptClass)})}),_defineProperty(this,"updatePriceByVariant",variant=>{const{comparePrice,price,savingAmount,savingLabel}=this.domNodes;if(variant){var _window4,_window4$spratlyTheme;const money_format=(_window4=window)===null||_window4===void 0||(_window4$spratlyTheme=_window4.spratlyThemeSettings)===null||_window4$spratlyTheme===void 0?void 0:_window4$spratlyTheme.money_format,priceText=formatMoney(variant.price,money_format);if(price&&(price.innerHTML=priceText),comparePrice)if(variant.compare_at_price>variant.price){const comparePriceText=formatMoney(variant.compare_at_price,money_format);comparePrice.innerHTML=comparePriceText,comparePrice.classList.remove("hidden")}else comparePrice.classList.add("hidden");if(savingLabel){variant.compare_at_price>variant.price?savingLabel.classList.remove("hidden"):savingLabel.classList.add("hidden");const saving=(variant.compare_at_price-variant.price)*100/variant.compare_at_price;savingAmount.textContent=Math.round(saving)+"%"}if(variant.unit_price_measurement){var _this$domNodes$unitPr,_window$spratlyThemeS;(_this$domNodes$unitPr=this.domNodes.unitPrice)===null||_this$domNodes$unitPr===void 0||_this$domNodes$unitPr.classList.remove("hidden");const unitPrice=`<span data-unit-price>${formatMoney(variant.unit_price,(_window$spratlyThemeS=window.spratlyThemeSettings)===null||_window$spratlyThemeS===void 0?void 0:_window$spratlyThemeS.money_format)}</span>/<span data-unit-price-base-unit>${this._getBaseUnit(variant)}</span>`;this.domNodes.unitPrice.innerHTML=unitPrice}else{var _this$domNodes$unitPr2;(_this$domNodes$unitPr2=this.domNodes.unitPrice)===null||_this$domNodes$unitPr2===void 0||_this$domNodes$unitPr2.classList.add("hidden")}}else savingLabel&&savingLabel.classList.add("hidden")}),_defineProperty(this,"_getBaseUnit",variant=>variant.unit_price_measurement.reference_value===1?variant.unit_price_measurement.reference_unit:variant.unit_price_measurement.reference_value+variant.unit_price_measurement.reference_unit),_defineProperty(this,"updateStockCountdownByVariant",variant=>{const{stockCountdown}=this.domNodes;if(stockCountdown){var _stockCountdown$class,_stockCountdown$class2;const method=variant.available?"remove":"add";if(stockCountdown==null||(_stockCountdown$class=stockCountdown.classList)===null||_stockCountdown$class===void 0||(_stockCountdown$class2=_stockCountdown$class[method])===null||_stockCountdown$class2===void 0||_stockCountdown$class2.call(_stockCountdown$class,"hidden"),stockCountdown.dataset.countdownType==="use_quantity"){const countdownNumber=stockCountdown.querySelector("[data-countdown-number]");countdownNumber&&(countdownNumber.textContent=variant.inventory_quantity||3);const progress=stockCountdown.querySelector(".psc__progress"),randomWidths=["1%","3%","5%","7%","9%"];progress.style.width=randomWidths[Math.floor(Math.random()*randomWidths.length)]}}}),_defineProperty(this,"updateSkuByVariant",variant=>{var _this$domNodes;variant.sku&&(_this$domNodes=this.domNodes)!==null&&_this$domNodes!==void 0&&_this$domNodes.productSKU&&(this.domNodes.productSKU.innerText=variant.sku)}),_defineProperty(this,"updateAvailabilityByVariant",variant=>{const{productAvailability}=this.domNodes;if(productAvailability){var _window5,_productAvailability$,_productAvailability$2;let{inStock="In stock",outOfStock="Out of stock"}=(_window5=window)===null||_window5===void 0?void 0:_window5.spratlyThemeStrings;outOfStock.includes("translation missing")&&(outOfStock="Out of stock");const method=variant.available?"remove":"add";productAvailability.innerText=variant.available?inStock:outOfStock,productAvailability==null||(_productAvailability$=productAvailability.classList)===null||_productAvailability$===void 0||(_productAvailability$2=_productAvailability$[method])===null||_productAvailability$2===void 0||_productAvailability$2.call(_productAvailability$,"prod__availability--outofstock")}}),_defineProperty(this,"updateOptionLabel",(position,value)=>{var _this$domNodes$option,_this$domNodes$option2;const label=(_this$domNodes$option=this.domNodes.optionLabels)===null||_this$domNodes$option===void 0||(_this$domNodes$option2=_this$domNodes$option.find)===null||_this$domNodes$option2===void 0?void 0:_this$domNodes$option2.call(_this$domNodes$option,label2=>Number(label2.dataset.labelPosition)===Number(position));label&&(label.textContent=value)}),_defineProperty(this,"toggleOptionNodeActive",(optNode,active)=>{if(optNode)if(active){const{optionPosition,value:optionValue}=optNode.dataset;switch(this.activeOptionNodeByPosition[optionPosition]=optNode,this.updateOptionLabel(optionPosition,optionValue),optNode.tagName){case"INPUT":optNode.checked="checked",optNode.dataset.selected="true";break;case"OPTION":optNode.dataset.selected="true";const select=optNode.closest("select");select&&(select.value=optNode.value);break;case"DIV":optNode.dataset.selected="true",["default","image","color"].includes(optNode.dataset.optionType)&&optNode.parentElement.classList.add("sf_variant-selected");break;default:console.warn("Unable to activate option node",optNode);break}}else{["default","image","color"].includes(optNode.dataset.optionType)?optNode.parentElement.classList.remove("sf_variant-selected"):optNode.style.border="",optNode.checked=!1,delete optNode.dataset.selected;const select=optNode.closest("select");select&&(select.value="")}}),_defineProperty(this,"updateBySelectedVariant",variant=>{var _window6,_window6$_ThemeEvent;this.updateATCButtonByVariant(variant),variant&&variant.id!==this.productData.current_variant_id&&(this.updateOptionByVariant(variant),this.updatePriceByVariant(variant),this.updateStockCountdownByVariant(variant),this.updateSkuByVariant(variant),this.updateAvailabilityByVariant(variant),this.updateBrowserHistory(variant),this.hideSoldoutAndUnavailableOptions(variant),this.changeProductImage(variant),this.productData.current_variant_id=variant.id),(_window6=window)===null||_window6===void 0||(_window6$_ThemeEvent=_window6._ThemeEvent)===null||_window6$_ThemeEvent===void 0||_window6$_ThemeEvent.emit(`${this.productData.id}__VARIANT_CHANGE`,variant,this)}),_defineProperty(this,"updateOptionByVariant",variant=>{Object.values(this.activeOptionNodeByPosition).forEach(optNode=>this.toggleOptionNodeActive(optNode,!1));const{optionNodes}=this.domNodes,{options=[]}=variant||{};options.forEach((option,index)=>{const optPosition=index+1;optionNodes.forEach(optNode=>{const _optPosition=Number(optNode.dataset.optionPosition),_optValue=optNode.dataset.value;_optPosition===optPosition&&option===_optValue&&this.toggleOptionNodeActive(optNode,!0)})})}),_defineProperty(this,"updateATCButtonByVariant",variant=>{var _addToCart$querySelec;const{soldOut,unavailable,addToCart:atcText}=window.spratlyThemeStrings,{addToCart,dynamicCheckout}=this.domNodes,atcTextNode=addToCart==null||(_addToCart$querySelec=addToCart.querySelector)===null||_addToCart$querySelec===void 0?void 0:_addToCart$querySelec.call(addToCart,".atc-text");if(variant!=null&&variant.available){var _addToCart$classList,_addToCart$classList$,_dynamicCheckout$clas,_dynamicCheckout$clas2;addToCart==null||(_addToCart$classList=addToCart.classList)===null||_addToCart$classList===void 0||(_addToCart$classList$=_addToCart$classList.remove)===null||_addToCart$classList$===void 0||_addToCart$classList$.call(_addToCart$classList,"disabled"),atcTextNode&&(atcTextNode.innerText=addToCart.dataset.atcText||atcText),dynamicCheckout==null||(_dynamicCheckout$clas=dynamicCheckout.classList)===null||_dynamicCheckout$clas===void 0||(_dynamicCheckout$clas2=_dynamicCheckout$clas.remove)===null||_dynamicCheckout$clas2===void 0||_dynamicCheckout$clas2.call(_dynamicCheckout$clas,"disabled")}else{var _addToCart$classList2,_addToCart$classList3,_dynamicCheckout$clas3,_dynamicCheckout$clas4;addToCart==null||(_addToCart$classList2=addToCart.classList)===null||_addToCart$classList2===void 0||(_addToCart$classList3=_addToCart$classList2.add)===null||_addToCart$classList3===void 0||_addToCart$classList3.call(_addToCart$classList2,"disabled"),atcTextNode&&(typeof variant?.available=="boolean"?atcTextNode.innerText=soldOut:atcTextNode.innerText=unavailable),dynamicCheckout==null||(_dynamicCheckout$clas3=dynamicCheckout.classList)===null||_dynamicCheckout$clas3===void 0||(_dynamicCheckout$clas4=_dynamicCheckout$clas3.add)===null||_dynamicCheckout$clas4===void 0||_dynamicCheckout$clas4.call(_dynamicCheckout$clas3,"disabled")}}),_defineProperty(this,"updateBrowserHistory",variant=>{var _this$productForm,_this$productForm$dat;const enableHistoryState=((_this$productForm=this.productForm)===null||_this$productForm===void 0||(_this$productForm$dat=_this$productForm.dataset)===null||_this$productForm$dat===void 0?void 0:_this$productForm$dat.enableHistoryState)==="true",{has_only_default_variant,current_variant_id}=this.productData;if(variant&&enableHistoryState&&!has_only_default_variant&&current_variant_id){const url=getUrlWithVariant(window.location.href,variant.id);window.history.replaceState({path:url},"",url)}}),_defineProperty(this,"changeProductImage",variant=>{var _this$productHelper;(_this$productHelper=this.productHelper)===null||_this$productHelper===void 0||_this$productHelper.changeMediaByVariant(variant)}),_defineProperty(this,"handleAddToCart",async e=>{var _this$themeProductSet;const missing=productFormCheck(this.productForm);if(missing.length>0){var _e$preventDefault,_this$domNodes2,_window7;return console.warn("Missing field(s): ",missing),e==null||(_e$preventDefault=e.preventDefault)===null||_e$preventDefault===void 0||_e$preventDefault.call(e),Notification.show({target:this===null||this===void 0||(_this$domNodes2=this.domNodes)===null||_this$domNodes2===void 0?void 0:_this$domNodes2.error,method:"appendChild",type:"warning",message:(_window7=window)===null||_window7===void 0?void 0:_window7.spratlyThemeStrings.requiredField})}if(this!==null&&this!==void 0&&(_this$themeProductSet=this.themeProductSettings)!==null&&_this$themeProductSet!==void 0&&_this$themeProductSet.use_ajax_atc){var _e$preventDefault2;e==null||(_e$preventDefault2=e.preventDefault)===null||_e$preventDefault2===void 0||_e$preventDefault2.call(e),this.toggleSpinner(!0);let formData=new FormData(this.productForm);typeof formData._asNative=="function"&&(formData=formData._asNative().fd);const sourceEvent=formData.get("source_event")||"product-form";let oldCart=!1;try{oldCart=await window.Shopify?.getCart()}catch(err){console.warn("Failed retrieving old cart",err)}this.cartAddFromForm(formData).then(r=>r.json()).then(res=>{if(res?.status===422){var _this$domNodes3;Notification.show({target:this===null||this===void 0||(_this$domNodes3=this.domNodes)===null||_this$domNodes3===void 0?void 0:_this$domNodes3.error,method:"appendChild",type:"warning",message:res?.description||"Unable to add item to cart!"})}else res.source=sourceEvent,window.Shopify.onItemAdded(res,!0,oldCart);setTimeout(()=>this.toggleSpinner(!1),500)})}}),_defineProperty(this,"cartAddFromForm",formData=>{const config=(0,utilities_fetch.getRequestDefaultConfigs)();return delete config.headers["Content-Type"],config.method="POST",formData.has("rc_selling_plan")&&!formData.has("selling_plan")&&formData.set("selling_plan",formData.get("rc_selling_plan")),config.body=formData,fetch("/cart/add.js",config)}),_defineProperty(this,"toggleSpinner",show=>{const method=show?"add":"remove";this.productForm.classList[method]("adding")}),_defineProperty(this,"serializeForm",formData=>{let obj={};for(var key of formData.keys())obj[key]=formData.get(key);return obj}),productForm!=null&&(_productForm$classLis=productForm.classList)!==null&&_productForm$classLis!==void 0&&_productForm$classLis.contains("initialized"))return;const{autoInit=!0,saveInstanceToDOM=!1}=_options;this.productForm=productForm,this.productBlock=productForm?.closest(".sf-prod__block"),this.domNodes=queryDomNodes(this.selectors,this.productBlock),this.setData(),saveInstanceToDOM&&(this.productForm._productInstane=this),autoInit&&this.init().catch(console.error),this.productForm.classList.add("initialized"),(_window8=window)===null||_window8===void 0||(_window8$spratlyTheme=_window8.spratlyTheme)===null||_window8$spratlyTheme===void 0||(_window8$spratlyTheme2=_window8$spratlyTheme.Products)===null||_window8$spratlyTheme2===void 0||(_window8$spratlyTheme3=_window8$spratlyTheme2.productInstances)===null||_window8$spratlyTheme3===void 0||_window8$spratlyTheme3.push(this)}}class Products{constructor(){_defineProperty(this,"productInstances",[]),_defineProperty(this,"initProductForms",async({context=document.documentElement,forceReInit=!1}={})=>{forceReInit&&(this.productInstances.forEach(prodInstance=>prodInstance?.unsubscribeEvents()),this.productInstances=[]),[...context.querySelectorAll("form[data-product-id]")].forEach(form=>{(!form.classList.contains("initialized")||forceReInit)&&new Product(form)})})}}product_AmyrisTheme.Product=Product,product_AmyrisTheme.Products=new Products,register("product-page",{onLoad:function(){var _Products$initProduct,_Products$initProduct2,_window,_window$spratlyTheme,_window$spratlyTheme$,_window$spratlyTheme$2,_window2,_window2$spratlyTheme,_window2$spratlyTheme2,_window2$spratlyTheme3,_window3,_window3$spratlyTheme,_window3$spratlyTheme2,_window3$spratlyTheme3,_window4,_window4$spratlyTheme,_window4$spratlyTheme2,_window4$spratlyTheme3,_window5,_window5$spratlyTheme,_window5$spratlyTheme2,_window5$spratlyTheme3;this.acc=[],window.spratlyThemeSettings=window.spratlyThemeSettings||{},window.spratlyThemeSettings.productContainer=this.container.dataset.container||"container",Product==null||(_Products$initProduct=Product.initProductForms)===null||_Products$initProduct===void 0||(_Products$initProduct2=_Products$initProduct.call(Product))===null||_Products$initProduct2===void 0||_Products$initProduct2.catch(console.error),addRecentViewedProduct(this.container.dataset.productHandle),(_window=window)===null||_window===void 0||(_window$spratlyTheme=_window.spratlyTheme)===null||_window$spratlyTheme===void 0||(_window$spratlyTheme$=_window$spratlyTheme.SizeChart)===null||_window$spratlyTheme$===void 0||(_window$spratlyTheme$2=_window$spratlyTheme$.init)===null||_window$spratlyTheme$2===void 0||_window$spratlyTheme$2.call(_window$spratlyTheme$),(_window2=window)===null||_window2===void 0||(_window2$spratlyTheme=_window2.spratlyTheme)===null||_window2$spratlyTheme===void 0||(_window2$spratlyTheme2=_window2$spratlyTheme.ProductCountdown)===null||_window2$spratlyTheme2===void 0||(_window2$spratlyTheme3=_window2$spratlyTheme2.init)===null||_window2$spratlyTheme3===void 0||_window2$spratlyTheme3.call(_window2$spratlyTheme2),(_window3=window)===null||_window3===void 0||(_window3$spratlyTheme=_window3.spratlyTheme)===null||_window3$spratlyTheme===void 0||(_window3$spratlyTheme2=_window3$spratlyTheme.StickyATC)===null||_window3$spratlyTheme2===void 0||(_window3$spratlyTheme3=_window3$spratlyTheme2.init)===null||_window3$spratlyTheme3===void 0||_window3$spratlyTheme3.call(_window3$spratlyTheme2),(_window4=window)===null||_window4===void 0||(_window4$spratlyTheme=_window4.spratlyTheme)===null||_window4$spratlyTheme===void 0||(_window4$spratlyTheme2=_window4$spratlyTheme.BoostSales)===null||_window4$spratlyTheme2===void 0||(_window4$spratlyTheme3=_window4$spratlyTheme2.init)===null||_window4$spratlyTheme3===void 0||_window4$spratlyTheme3.call(_window4$spratlyTheme2),(_window5=window)===null||_window5===void 0||(_window5$spratlyTheme=_window5.spratlyTheme)===null||_window5$spratlyTheme===void 0||(_window5$spratlyTheme2=_window5$spratlyTheme.Sharing)===null||_window5$spratlyTheme2===void 0||(_window5$spratlyTheme3=_window5$spratlyTheme2.init)===null||_window5$spratlyTheme3===void 0||_window5$spratlyTheme3.call(_window5$spratlyTheme2),document.querySelectorAll(".prod__accordion").forEach((acc,index)=>{this.acc.push(new Accordion(acc)),acc.dataset.index=index}),addEventDelegate({context:this.container,selector:(window.__amyris_review_selector||"")+".prod__accordion .jdgm-widget-actions-wrapper, .prod__accordion .spr-summary-actions-newreview",handler:e=>{const index=e.target.closest(".prod__accordion").dataset.index;setTimeout(()=>{this.acc[Number(index)].setContentHeight()},300)},capture:!0})}});var product_tabs_createElement=__webpack_require__(6295).default;register("product-tabs",{onLoad:function(){this.initTabs(),this.initMobileSelect(),this.selectors={loadMoreBtn:"[data-load-more]",productsContainer:"[data-products-container]"},this.domNodes=queryDomNodes(this.selectors),this.tabSliders=[],initCustomSelect(this.container);const sliderEnabled=this.container.dataset.enableSlider==="true",buttonType=this.container.dataset.buttonType,blocks=this.container.querySelectorAll(".sf-tab-content");if(sliderEnabled){this.showPagination=this.container.dataset.showPagination==="true",this.showNavigation=this.container.dataset.showNavigation==="true",this.items=this.container.dataset.items;for(let block of blocks)this.initSlider(block)}if(!sliderEnabled&&buttonType==="load"){this.canLoad=!0,this.currentPage=1,this.spinner=product_tabs_createElement(Spinner,null);for(let block of blocks)this.initLoadMore(block)}},initTabs:function(){this.tabs=new Tabs(this===null||this===void 0?void 0:this.container,target=>{const tabId=target.getAttribute("href"),slider=this.container.querySelector(tabId+" .swiper-container");console.log("switch tab",slider),slider&&slider.swiper.update()})},initSlider:function(sliderContainer){initSlider({container:sliderContainer,items:parseInt(this.items),slidesPerGroup:2,slidesPerGroupMobile:1,showPagination:this.showPagination,showNavigation:this.showNavigation})},initMobileSelect:function(){this.select=this.container.querySelector("[data-tab-select]"),this.select.addEventListener("change",()=>{var _this$tabs,_this$tabs$currentTab;this.tabs.setActiveTab(parseInt(this.select.value));const slider=(_this$tabs=this.tabs)===null||_this$tabs===void 0||(_this$tabs$currentTab=_this$tabs.currentTab)===null||_this$tabs$currentTab===void 0?void 0:_this$tabs$currentTab.querySelector(".swiper-container");slider&&slider.swiper.update()})},initLoadMore:function(wrapper){addEventDelegate({context:wrapper,selector:this.selectors.loadMoreBtn,handler:e=>{e.preventDefault(),this.handleLoadMore(wrapper)}})},handleLoadMore:function(wrapper){const loadBtn=wrapper.querySelector(this.selectors.loadMoreBtn),productsContainer=wrapper.querySelector(this.selectors.productsContainer);let currentPage=wrapper.dataset.page;currentPage=parseInt(currentPage);const totalPages=wrapper.dataset.totalPages;this.toggleLoading(loadBtn,!0);const dataUrl=`${wrapper.dataset.url}?page=${currentPage+1}&section_id=${this.id}`;(0,utilities_fetch.fetchCache)(dataUrl).then(html=>{currentPage++,wrapper.dataset.page=currentPage,this.toggleLoading(loadBtn,!1);const products=generateDomFromString(html).querySelector(this.selectors.productsContainer);products&&(Array.from(products.childNodes).forEach(product=>productsContainer.appendChild(product)),window.spratlyTheme.Products.initProductForms({context:this.context})),currentPage>=parseInt(totalPages)&&loadBtn&&loadBtn.remove()})},toggleLoading:function(loadBtn,status){if(loadBtn)if(status)loadBtn.appendChild(this.spinner),loadBtn.classList.add("sf-spinner-loading");else{var _this$spinner;this===null||this===void 0||(_this$spinner=this.spinner)===null||_this$spinner===void 0||_this$spinner.remove(),loadBtn.classList.remove("sf-spinner-loading")}},onBlockSelect:function(evt){const{index}=evt.target.dataset;this.tabs.setActiveTab(index)}}),register("product-recommendations",{onLoad:function(){loadAssets("productRecommendations.js").then(()=>{window.spratlyTheme.ShopifyProductRecommendation=new window.spratlyTheme.ProductRecommendation(this.container),this.recommendation=window.spratlyTheme.ShopifyProductRecommendation})}}),register("beauty-related-products",{onLoad:function(){var _window,_window$Beauty,_window$Beauty$beautyKit;if((_window=window)!==null&&_window!==void 0&&(_window$Beauty=_window.Beauty)!==null&&_window$Beauty!==void 0&&(_window$Beauty$beautyKit=_window$Beauty.beautyKitSettings)!==null&&_window$Beauty$beautyKit!==void 0&&_window$Beauty$beautyKit.productRecommendations){var _window2,_window2$Beauty,_window2$Beauty$initP;(_window2=window)===null||_window2===void 0||(_window2$Beauty=_window2.Beauty)===null||_window2$Beauty===void 0||(_window2$Beauty$initP=_window2$Beauty.initProductRecommendations)===null||_window2$Beauty$initP===void 0||_window2$Beauty$initP.call(_window2$Beauty)}}}),register("blog-template",{onLoad:function(){var _this$container;const container=(_this$container=this.container)===null||_this$container===void 0?void 0:_this$container.querySelector(".sf__aside-instagram");if(container){const{accessToken,imagesCount}=container.dataset;accessToken?new Instagram(container,accessToken,imagesCount):console.warn("Failed to init Instagram section! Missing Access Token")}}}),register("article-template",{onLoad:function(){var _this$container;const container=(_this$container=this.container)===null||_this$container===void 0?void 0:_this$container.querySelector(".sf__aside-instagram");if(container){const{accessToken,imagesCount}=container.dataset;accessToken?new Instagram(container,accessToken,imagesCount):console.warn("Failed to init Instagram section! Missing Access Token")}}});function loadAllSections(){try{load("*")}catch(error){console.error("Faied to load sections. ",error)}}var main=__webpack_require__(9367),main_default=__webpack_require__.n(main),query="query countries($locale: SupportedLocale!) {  countries(locale: $locale) {    name    code    labels {      address1      address2      city      company      country      firstName      lastName      phone      postalCode      zone    }    formatting {      edit    }    zones {      name      code    }  }}",GRAPHQL_ENDPOINT="https://country-service.shopifycloud.com/graphql";function loadCountries(locale){var response=fetch(GRAPHQL_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({query,operationName:"countries",variables:{locale:toSupportedLocale(locale)}})});return response.then(function(res){return res.json()}).then(function(countries){return countries.data.countries})}var DEFAULT_LOCALE="EN",SUPPORTED_LOCALES=["DA","DE","EN","ES","FR","IT","JA","NL","PT","PT_BR"];function toSupportedLocale(locale){var supportedLocale=locale.replace(/-/,"_").toUpperCase();return SUPPORTED_LOCALES.indexOf(supportedLocale)!==-1?supportedLocale:SUPPORTED_LOCALES.indexOf(supportedLocale.substring(0,2))!==-1?supportedLocale.substring(0,2):DEFAULT_LOCALE}function mergeObjects(){for(var to=Object({}),index=0;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource)for(var nextKey in nextSource)Object.prototype.hasOwnProperty.call(nextSource,nextKey)&&(to[nextKey]=nextSource[nextKey])}return to}var FIELD_REGEXP=/({\w+})/g,LINE_DELIMITER="_",INPUT_SELECTORS={lastName:'[name="address[last_name]"]',firstName:'[name="address[first_name]"]',company:'[name="address[company]"]',address1:'[name="address[address1]"]',address2:'[name="address[address2]"]',country:'[name="address[country]"]',zone:'[name="address[province]"]',postalCode:'[name="address[zip]"]',city:'[name="address[city]"]',phone:'[name="address[phone]"]'};function AddressForm(rootEl,locale,options){locale=locale||"en",options=options||{inputSelectors:{}};var formElements=loadFormElements(rootEl,mergeObjects(INPUT_SELECTORS,options.inputSelectors));return validateElements(formElements),loadShippingCountries(options.shippingCountriesOnly).then(function(shippingCountryCodes){return loadCountries(locale).then(function(countries){init(rootEl,formElements,filterCountries(countries,shippingCountryCodes))})})}function init(rootEl,formElements,countries){populateCountries(formElements,countries);var selectedCountry=formElements.country.input?formElements.country.input.value:null;setEventListeners(rootEl,formElements,countries),handleCountryChange(rootEl,formElements,selectedCountry,countries)}function handleCountryChange(rootEl,formElements,countryCode,countries){var country=getCountry(countryCode,countries);setLabels(formElements,country),reorderFields(rootEl,formElements,country),populateZones(formElements,country)}function setEventListeners(rootEl,formElements,countries){formElements.country.input.addEventListener("change",function(event){handleCountryChange(rootEl,formElements,event.target.value,countries)})}function reorderFields(rootEl,formElements,country){var formFormat=country.formatting.edit,countryWrapper=formElements.country.wrapper,afterCountry=!1;getOrderedField(formFormat).forEach(function(row){row.forEach(function(line){if(formElements[line].wrapper.dataset.lineCount=row.length,!!formElements[line].wrapper){if(line==="country"){afterCountry=!0;return}afterCountry?rootEl.append(formElements[line].wrapper):rootEl.insertBefore(formElements[line].wrapper,countryWrapper)}})})}function setLabels(formElements,country){Object.keys(formElements).forEach(function(formElementName){formElements[formElementName].labels.forEach(function(label){label.textContent=country.labels[formElementName]})})}function populateCountries(formElements,countries){var countrySelect=formElements.country.input,duplicatedCountrySelect=countrySelect.cloneNode(!0);countries.forEach(function(country){var optionElement=document.createElement("option");optionElement.value=country.code,optionElement.textContent=country.name,duplicatedCountrySelect.appendChild(optionElement)}),countrySelect.innerHTML=duplicatedCountrySelect.innerHTML,countrySelect.dataset.default&&(countrySelect.value=countrySelect.dataset.default)}function populateZones(formElements,country){var zoneEl=formElements.zone;if(zoneEl){if(country.zones.length===0){zoneEl.wrapper.dataset.ariaHidden="true",zoneEl.input.innerHTML="";return}zoneEl.wrapper.dataset.ariaHidden="false";var zoneSelect=zoneEl.input,duplicatedZoneSelect=zoneSelect.cloneNode(!0);duplicatedZoneSelect.innerHTML="",country.zones.forEach(function(zone){var optionElement=document.createElement("option");optionElement.value=zone.code,optionElement.textContent=zone.name,duplicatedZoneSelect.appendChild(optionElement)}),zoneSelect.innerHTML=duplicatedZoneSelect.innerHTML,zoneSelect.dataset.default&&(zoneSelect.value=zoneSelect.dataset.default)}}function validateElements(formElements){Object.keys(formElements).forEach(function(elementKey){var element=formElements[elementKey].input,labels=formElements[elementKey].labels;if(element){if(typeof element!="object")throw new TypeError(formElements[elementKey]+" is missing an input or select.");if(typeof labels!="object")throw new TypeError(formElements[elementKey]+" is missing a label.")}})}function getCountry(countryCode,countries){return countryCode=countryCode||"CA",countries.filter(function(country){return country.code===countryCode})[0]}function getOrderedField(format){return format.split(LINE_DELIMITER).map(function(fields){var result=fields.match(FIELD_REGEXP);return result?result.map(function(fieldName){var newFieldName=fieldName.replace(/[{}]/g,"");switch(newFieldName){case"zip":return"postalCode";case"province":return"zone";default:return newFieldName}}):[]})}function loadFormElements(rootEl,inputSelectors){var elements={};return Object.keys(INPUT_SELECTORS).forEach(function(inputKey){var input=rootEl.querySelector(inputSelectors[inputKey]);elements[inputKey]=input?{wrapper:input.parentElement,input,labels:document.querySelectorAll('[for="'+input.id+'"]')}:{}}),elements}function loadShippingCountries(shippingCountriesOnly){if(!shippingCountriesOnly)return Promise.resolve(null);var response=fetch(location.origin+"/meta.json");return response.then(function(res){return res.json()}).then(function(meta){return meta.ships_to_countries.indexOf("*")!==-1?null:meta.ships_to_countries}).catch(function(){return null})}function filterCountries(countries,includedCountryCodes){return includedCountryCodes?countries.filter(function(country){return includedCountryCodes.indexOf(country.code)!==-1}):countries}var cart_createElement=__webpack_require__(6295).default,cart_AmyrisTheme=__webpack_require__(4558).AmyrisTheme;class Cart{constructor(){_defineProperty(this,"selectors",{cartIcon:".sf-cart-icon",cartCounts:[".sf-cart-count"],cartDrawer:".scd__wrapper",cartDrawerContent:".scd__content",cartDrawerFooter:".scd__footer",cartDrawerClose:".scd__close",cartDiscountCode:'[name="discount"]',cartDiscountCodeNoti:"[data-discount-noti]",cartDrawerItems:".scd__items",cartCountDown:".scd__countdown",cartCountDownMessage:"[data-countdown-message]",overlay:".scd__overlay",addressForm:'[data-address="root"]',zipCode:'[name="address[zip]"]',province:'[name="address[province]"]',country:'[name="address[country]"]',shippingContent:".scd__addon-message",cartNote:'[name="note"]'}),_defineProperty(this,"cartItemSelectors",{btn:".scd-item__btn",qtyInput:".scd-item__qty_input",remove:".scd-item__remove",changeVariant:".scd-item__variant-selector-option.available",changeSubscriptionType:".scd-item__subscription-selector-option:not(.selected)"}),_defineProperty(this,"cart",{}),_defineProperty(this,"scrollHandlerAdded",!1),_defineProperty(this,"countdownTimerStarted",!1),_defineProperty(this,"openAddon",null),_defineProperty(this,"discountCodeKey","mn-discount-code"),_defineProperty(this,"isCartPage",window.spratlyThemeSettings.templateName==="cart"),_defineProperty(this,"enableCartDrawer",window.adminThemeSettings.enable_cart_drawer),_defineProperty(this,"cartSection",this.isCartPage?"cart-template":"cart-drawer"),_defineProperty(this,"fetchCartSection",async()=>await(0,utilities_fetch.fetchSection)(this.cartSection)),_defineProperty(this,"initCartCountDown",()=>{const{cartCountDown}=this.domNodes;if(cartCountDown){const startTime=Date.now(),duration=Number(cartCountDown.dataset.countdownTime)||5,repeat=cartCountDown.dataset.repeat==="true",message=cartCountDown.dataset.timeoutMessage,endTime=startTime+duration*60*1e3;this.countdownTimer=new countdown_timer(cartCountDown,startTime,endTime,{addZeroPrefix:!1,loop:repeat,callback:()=>{!repeat&&message&&(this.domNodes.cartCountDownMessage.innerHTML=message,cartCountDown.classList.add("time-out"),cartCountDown.style.color="#f44336")}}),this.countdownTimerStarted=!0}}),_defineProperty(this,"addScrollHandler",()=>{var _this$domNodes,_this$domNodes$cartDr,_this$domNodes2,_this$domNodes2$cartD,_this$domNodes3,_this$domNodes3$cartD,_this$domNodes3$cartD2;const cartItemsOffsetTop=(_this$domNodes=this.domNodes)===null||_this$domNodes===void 0||(_this$domNodes$cartDr=_this$domNodes.cartDrawerItems)===null||_this$domNodes$cartDr===void 0?void 0:_this$domNodes$cartDr.offsetTop,footerHeight=(_this$domNodes2=this.domNodes)===null||_this$domNodes2===void 0||(_this$domNodes2$cartD=_this$domNodes2.cartDrawerFooter)===null||_this$domNodes2$cartD===void 0?void 0:_this$domNodes2$cartD.offsetHeight;(_this$domNodes3=this.domNodes)===null||_this$domNodes3===void 0||(_this$domNodes3$cartD=_this$domNodes3.cartDrawerItems)===null||_this$domNodes3$cartD===void 0||(_this$domNodes3$cartD2=_this$domNodes3$cartD.style)===null||_this$domNodes3$cartD2===void 0||_this$domNodes3$cartD2.setProperty("--scd-items-max-height",`calc(100vh - ${cartItemsOffsetTop}px - ${footerHeight}px - 10px)`),this.scrollHandlerAdded=!0}),_defineProperty(this,"getCartItemByKey",key=>{const{items}=this.cart;if(Array.isArray(items)){const item=items.find(({key:_key})=>_key===key);if(item)return item}}),_defineProperty(this,"getCart",()=>(0,utilities_fetch.fetchJSON)("/cart.js")),_defineProperty(this,"changeCart",lineItem=>(0,utilities_fetch.fetchJSON)("/cart/change.js",{...(0,utilities_fetch.getRequestDefaultConfigs)(),method:"POST",body:JSON.stringify(lineItem)})),_defineProperty(this,"updateCart",data2=>(0,utilities_fetch.fetchJSON)("/cart/update.js",{...(0,utilities_fetch.getRequestDefaultConfigs)(),method:"POST",body:JSON.stringify(data2)})),_defineProperty(this,"changeItemQty",async(lineItem,itemBeingChangedOverlay,itemBeingChanged)=>{console.log("change quantity",lineItem);const{not_enough_item_message="Not enough items available. Only __inventory_quantity__ left.",sold_out_items_message="The product is already sold out."}=window.spratlyThemeStrings,bogoFreeProduct=parseInt($("body").data("bogo-free-product-variant-id")),spendXgetYFreeProduct=$("body").data("gwp-spendxgety-free-product"),[updatingProduct]=lineItem.id.split(":"),updatingProductQuantity=lineItem.quantity,parsedUpdatingProduct=parseInt(updatingProduct),shouldProcessGWP=bogoFreeProduct&&(parsedUpdatingProduct!==bogoFreeProduct||parsedUpdatingProduct===bogoFreeProduct&&updatingProductQuantity>0)||spendXgetYFreeProduct;try{const oldCart={...this.cart},{id:key,quantity}=lineItem;this.loading.start(!itemBeingChangedOverlay),itemBeingChangedOverlay&&itemBeingChangedOverlay.classList.remove("hidden");const newCart=await this.changeCart(lineItem);this.cart=newCart;let isAddingGWP=!1;if(shouldProcessGWP){const isAdding=Shopify.checkIfIsAddingProduct(oldCart,{id:parsedUpdatingProduct,quantity:updatingProductQuantity}),hadDiscountProductInLastCart=oldCart&&oldCart.items&&oldCart.items.length>0&&oldCart.items.find(product=>product.line_level_discount_allocations.length>0);await Shopify.processGWP(this.cart,{id:parsedUpdatingProduct,quantity:updatingProductQuantity},isAdding,hadDiscountProductInLastCart)&&(isAddingGWP=!0)}this.cart=await Shopify.getCart();const cartHTML=await this.fetchCartSection();this.loading.finish(()=>{this.renderNewCart(cartHTML,newCart.items.length>0&&!isAddingGWP&&parsedUpdatingProduct!==spendXgetYFreeProduct&&parsedUpdatingProduct!==bogoFreeProduct&&cartHTML.querySelector(itemBeingChanged)!==null&&itemBeingChanged),window.Shopify.onCartUpdate(this.cart,!1),itemBeingChangedOverlay&&itemBeingChangedOverlay.classList.add("hidden");const newItem=newCart.items.find(({key:_key})=>_key===key);if(quantity>newItem?.quantity){const{product_id}=newItem,lineItems=newCart.items.filter(({product_id:pId})=>pId===product_id);if(lineItems.length===1){console.log("lineItem",lineItems);const lineItemNode=this.getLineItemNode(lineItem);console.log("lineItemNode",lineItemNode),Notification?.show({target:lineItemNode,type:"warning",message:not_enough_item_message.replace("__inventory_quantity__",newItem.quantity)})}}})}catch(err){if(this.loading.finish(),err?.status===422){const lineItemNode=this.getLineItemNode(lineItem);lineItemNode&&Notification?.show({target:lineItemNode,type:"warning",message:sold_out_items_message})}console.warn("Failed to change item quantity: ",err)}}),_defineProperty(this,"getLineItemNode",lineItem=>{const{cartDrawerItems}=this.domNodes;let lineItemNode=cartDrawerItems.querySelector(`.scd-item[data-id="${lineItem.id}"]`);return lineItemNode||(lineItemNode=cartDrawerItems.querySelector(`.scd-item[data-index="${lineItem.line}"]`)),lineItemNode}),_defineProperty(this,"renderNewCart",async(cartHTML,itemBeingChanged)=>{cartHTML||(cartHTML=await this.fetchCartSection());const newCartSavings=cartHTML.querySelector(".scd__final-savings-hidden"),currentCartSavings=this.domNodes.cartDrawer.querySelector(".scd__final-savings-hidden");currentCartSavings&&currentCartSavings.replaceWith(newCartSavings);let promoApplied=!1,newDiscountObj={};const prevDiscountObj=sessionStorage.discount_object;if(this.cart.items.length>0&&promoCodeEnabled)try{await applyPromo(this.cart).then(async discountObject=>{if(newDiscountObj=discountObject,discountObject.fixedValue===0&&discountObject.percentageValue===0){promoApplied=!1;return}promoApplied=!0})}catch(err){console.warn("Error while trying to apply discount",err)}const shouldUpdateAll=!promoApplied&&prevDiscountObj&&(prevDiscountObj.fixedValue!==0||prevDiscountObj.percentageValue!==0);if(itemBeingChanged&&!shouldUpdateAll){const newCartItem=cartHTML.querySelector(itemBeingChanged),currentCartItem=this.domNodes.cartDrawer.querySelector(itemBeingChanged);currentCartItem&&!promoApplied&&(newCartItem!==null?currentCartItem.replaceWith(newCartItem):currentCartItem.remove()),this.domNodes=queryDomNodes(this.selectors)}else{const newCartItems=cartHTML.querySelector(".scd__items-item"),currentCartItems=this.domNodes.cartDrawer.querySelector(".scd__items-item");currentCartItems&&(newCartItems!==null?currentCartItems.replaceWith(newCartItems):currentCartItems.remove())}if(promoApplied)try{await getCart().then(async cartData=>{await updateCartPromo(cartData,newDiscountObj)})}catch(err){console.warn("Error while trying to apply discount",err)}const newCartHeader=cartHTML.querySelector(".scd__header");promoApplied&&(newCartHeader.querySelector(".scd__subtotal-final-price").innerHTML=globalSubtotal),this.domNodes.cartDrawer.querySelector(".scd__header").replaceWith(newCartHeader);const newCartSummary=cartHTML.querySelector(".scd__summary"),currentCartSummary=this.domNodes.cartDrawer.querySelector(".scd__summary");currentCartSummary&&currentCartSummary.replaceWith(newCartSummary);const newProgressBar=cartHTML.querySelector(".scd__body-progress"),currentProgressBar=this.domNodes.cartDrawer.querySelector(".scd__body-progress");currentProgressBar&&currentProgressBar.replaceWith(newProgressBar);const newSubtotalFooter=cartHTML.querySelector(".scd__body-content-subtotal");promoApplied&&(newSubtotalFooter.querySelectorAll(".scd__subtotal-final-price").forEach(element=>{element.innerHTML=globalSubtotal}),newSubtotalFooter.querySelector(".scd__subtotal-price-savings").innerHTML=globalSavings);const currentSubtotalFooter=this.domNodes.cartDrawer.querySelector(".scd__body-content-subtotal");currentSubtotalFooter&&(newSubtotalFooter!==null?currentSubtotalFooter.replaceWith(newSubtotalFooter):currentSubtotalFooter.remove());const newEmptyBody=cartHTML.querySelector(".scd__body-empty"),currentEmptyBody=this.domNodes.cartDrawer.querySelector(".scd__body-empty");currentEmptyBody&&currentEmptyBody.replaceWith(newEmptyBody),this.domNodes=queryDomNodes(this.selectors)}),_defineProperty(this,"handleSubscriptionChange",async({actualLineItemKey,actualLineItemQuantity,selectedVariantId,selectedSubscription,subscriptionRecurringDeliveries,isGWP=!1})=>{try{if(this.loading.start(),!isGWP){const newCart2=await $.ajax({url:"/cart/change.js",dataType:"json",type:"post",data:{id:actualLineItemKey,quantity:actualLineItemQuantity,selling_plan:selectedSubscription||null,rc_selling_plan:selectedSubscription||null,purchaseOption:selectedSubscription?"subscription":null},success:function(cart){return console.log("Line item changed successfully"),cart}});this.loading.finish(()=>{this.renderNewCart(),window.Shopify.onCartUpdate(newCart2,!1)});return}await $.ajax({url:"/cart/add.js",dataType:"json",type:"post",data:{items:[{id:selectedVariantId,quantity:actualLineItemQuantity,selling_plan:selectedSubscription,purchaseOption:"subscription",rc_selling_plan:selectedSubscription}]},success:function(lineItemAdded){return console.log("Subscription added successfully"),lineItemAdded}});const newCart=await this.getCart();this.loading.finish(()=>{this.renderNewCart(),window.Shopify.onCartUpdate(newCart,!1)})}catch(err){this.loading.finish(),console.warn("Failed to change the subscription type: ",err)}}),_defineProperty(this,"addVariantToCart",async({actualLineItemKey,actualLineItemQuantity,selectedVariantId,isGWP=!1})=>{try{if(this.loading.start(),await $.ajax({url:"/cart/add.js",dataType:"json",type:"post",data:{items:[{id:selectedVariantId,quantity:actualLineItemQuantity}]},success:async function(){console.log("Variant added successfully")}}),!isGWP){const newCart2=await $.ajax({url:"/cart/change.js",dataType:"json",type:"post",data:{id:actualLineItemKey,quantity:0},success:function(cart){return console.log("Variant removed successfully"),cart}});this.loading.finish(()=>{this.renderNewCart(),window.Shopify.onCartUpdate(newCart2,!1)});return}const newCart=await this.getCart();this.loading.finish(()=>{this.renderNewCart(),window.Shopify.onCartUpdate(newCart,!1)})}catch(err){this.loading.finish(),console.warn("Failed to add variant to cart: ",err)}}),_defineProperty(this,"refreshCart",async()=>{this.cart=await this.getCart()}),_defineProperty(this,"updateCartCount",cart=>{if(Number(cart.item_count)<1){var _this$container,_this$container$class;(_this$container=this.container)===null||_this$container===void 0||(_this$container$class=_this$container.classList)===null||_this$container$class===void 0||_this$container$class.remove("cart-has-items"),this.countdownTimer&&(this.countdownTimer.clear(),this.countdownTimerStarted=!1),document.body.classList.add("cart-empty")}else{var _this$container2,_this$container2$clas;(_this$container2=this.container)===null||_this$container2===void 0||(_this$container2$clas=_this$container2.classList)===null||_this$container2$clas===void 0||_this$container2$clas.add("cart-has-items"),document.body.classList.remove("cart-empty"),!this.countdownTimerStarted&&this.countdownTimer&&(this.countdownTimer.start(),this.countdownTimerStarted=!0)}[...this.domNodes.cartCounts].forEach(cartCount=>{cartCount.textContent=cart.item_count})}),_defineProperty(this,"updateCartNote",()=>{this.updateCart({note:this.domNodes.cartNote.value})}),_defineProperty(this,"openCartDrawer",e=>{var _e$preventDefault;if(this.isCartPage||!this.enableCartDrawer)return;e==null||(_e$preventDefault=e.preventDefault)===null||_e$preventDefault===void 0||_e$preventDefault.call(e);const{cartDrawer,cartDrawerContent}=this.domNodes;cartDrawer&&cartDrawerContent&&(window.innerWidth<770&&(document.documentElement.classList.add("prevent-scroll"),cartDrawer.classList.add("mobile")),cartDrawer.classList.remove("hidden"),requestAnimationFrame(()=>{cartDrawer.style.setProperty("--tw-bg-opacity","0.5"),cartDrawerContent.classList.remove("translate-x-full"),!this.scrollHandlerAdded&&this.addScrollHandler()}))}),_defineProperty(this,"closeCartDrawer",()=>{const{cartDrawer,cartDrawerContent}=this.domNodes;if(cartDrawer&&cartDrawerContent){var _cartDrawer$style;cartDrawer==null||(_cartDrawer$style=cartDrawer.style)===null||_cartDrawer$style===void 0||_cartDrawer$style.setProperty("--tw-bg-opacity","0"),cartDrawerContent?.classList.add("translate-x-full"),setTimeout(()=>{var _cartDrawer$classList,_cartDrawer$classList2;cartDrawer==null||(_cartDrawer$classList=cartDrawer.classList)===null||_cartDrawer$classList===void 0||_cartDrawer$classList.add("hidden"),cartDrawer==null||(_cartDrawer$classList2=cartDrawer.classList)===null||_cartDrawer$classList2===void 0||_cartDrawer$classList2.remove("mobile"),document.documentElement.classList.remove("prevent-scroll"),this.closeAddon()},300)}}),_defineProperty(this,"initCartAddons",()=>{addEventDelegate({selector:".scd__footer-actions button",handler:(e,addonButton)=>{if(e.preventDefault(),this.isCartPage){var _document$querySelect,_document$querySelect2;(_document$querySelect=document.querySelector(".scd__addon.open"))===null||_document$querySelect===void 0||(_document$querySelect2=_document$querySelect.classList)===null||_document$querySelect2===void 0||_document$querySelect2.remove("open")}const{cartDrawer,overlay,addressForm,cartDiscountCodeNoti:cartDiscountCodeNoti2}=this.domNodes,{open:addonTarget}=addonButton.dataset,addonNode=cartDrawer.querySelector(`#scd-${addonTarget}`);addonButton.classList.add("active"),addonNode?.classList.add("open"),overlay?.classList.add("open"),this.openAddon=addonNode,addonTarget==="shipping"&&AddressForm(addressForm,window.Shopify.locale),addonTarget==="coupon"&&cartDiscountCodeNoti2&&(cartDiscountCodeNoti2.style.display="none")}}),addEventDelegate({selector:".btn-cancel",context:this.domNodes.cartDrawer,handler:this.closeAddon}),addEventDelegate({selector:".btn-calc",context:this.domNodes.cartDrawer,handler:this.calculateShipping});const{cartDiscountCode,cartDiscountCodeNoti}=this.domNodes;if(cartDiscountCode){const code=localStorage.getItem(this.discountCodeKey);code&&(cartDiscountCode.value=code,cartDiscountCodeNoti&&(cartDiscountCodeNoti.style.display="inline"))}this.saveAddonValue()}),_defineProperty(this,"closeAddon",e=>{var _e$preventDefault2,_this$openAddon,_this$domNodes$overla;e==null||(_e$preventDefault2=e.preventDefault)===null||_e$preventDefault2===void 0||_e$preventDefault2.call(e),(_this$openAddon=this.openAddon)===null||_this$openAddon===void 0||_this$openAddon.classList.remove("open"),(_this$domNodes$overla=this.domNodes.overlay)===null||_this$domNodes$overla===void 0||_this$domNodes$overla.classList.remove("open"),this.openAddon=null}),_defineProperty(this,"calculateShipping",e=>{var _this$domNodes$zipCod;e.preventDefault();const zipCode=(_this$domNodes$zipCod=this.domNodes.zipCode.value)===null||_this$domNodes$zipCod===void 0?void 0:_this$domNodes$zipCod.trim(),country=this.domNodes.country.value,province=this.domNodes.province.value;this.domNodes.shippingContent.classList.remove("error"),this.domNodes.shippingContent.innerHTML="",fetch(`/cart/shipping_rates.json?shipping_address%5Bzip%5D=${zipCode}&shipping_address%5Bcountry%5D=${country}&shipping_address%5Bprovince%5D=${province}`).then(res=>res.json()).then(res=>{if(res&&res.shipping_rates){const{shipping_rates}=res,{shippingRatesResult,noShippingRate}=window.spratlyThemeStrings;shipping_rates.length>0?(this.domNodes.shippingContent.appendChild(cart_createElement("p",{className:"mb-3 text-base"},shippingRatesResult.replace("{{count}}",shipping_rates.length),":")),shipping_rates.map(rate=>{var _window,_window$spratlyThemeS;const rateNode=cart_createElement("span",null);rateNode.innerHTML=formatMoney(rate.price,(_window=window)===null||_window===void 0||(_window$spratlyThemeS=_window.spratlyThemeSettings)===null||_window$spratlyThemeS===void 0?void 0:_window$spratlyThemeS.money_format),this.domNodes.shippingContent.appendChild(cart_createElement("p",null,rate.name,": ",rateNode))})):this.domNodes.shippingContent.innerHTML=`<p>${noShippingRate}</p>`}else Object.entries(res).map(error=>{var _error$;this.domNodes.shippingContent.classList.add((_error$=error[0])===null||_error$===void 0?void 0:_error$.toLowerCase()),console.log(error,"error");const message=`${error[1][0]}`;this.domNodes.shippingContent.appendChild(cart_createElement("p",null,message))})}).catch(console.error)}),_defineProperty(this,"saveAddonValue",()=>{this.domNodes.cartDiscountCode&&addEventDelegate({event:"click",context:this.domNodes.cartDrawer,selector:".btn-save",handler:(e,target)=>{if(e.preventDefault(),target?.dataset.action==="coupon"){const code=this.domNodes.cartDiscountCode.value;localStorage.setItem(this.discountCodeKey,code)}target?.dataset.action==="note"&&this.updateCartNote(),this.closeAddon()}})}),this.getCart().then(cart=>{this.cart=cart,this.isCartPage?this.init():this.fetchCartSection().then(drawer=>{this.init()})})}init(){var _window2,_window2$_ThemeEvent,_window2$_ThemeEvent$;this.container=this.isCartPage?document.documentElement:document.querySelector("section.sf-header"),this.domNodes=queryDomNodes(this.selectors),this.loading=new(main_default())(this.domNodes.cartDrawerContent),this.enableCartDrawer&&!this.isCartPage&&(addEventDelegate({selector:this.selectors.cartIcon,handler:this.openCartDrawer}),addEventDelegate({selector:this.selectors.cartDrawerClose,handler:this.closeCartDrawer}),addEventDelegate({selector:this.selectors.cartDrawer,handler:e=>{e.target===this.domNodes.cartDrawer&&this.closeCartDrawer()}}));function newDebounce(func,timeout=300){let timer;return(...args)=>{clearTimeout(timer),timer=setTimeout(()=>{func.apply(this,args)},timeout)}}const execDebounce=newDebounce(func=>func());addEventDelegate({context:this.domNodes.cartDrawer,selector:this.cartItemSelectors.btn,handler:(e,btn)=>{e.preventDefault();const{qtyChange,id}=btn.dataset,item=this.getCartItemByKey(id),changeQuantity=(id2,quantity,overlay,itemBeingChanged)=>this.changeItemQty({id:id2,quantity},overlay,itemBeingChanged),actualQuantityElem=this.domNodes.cartDrawer.querySelector(this.cartItemSelectors.qtyInput+`[data-id="${id}"]`),itemOverlayElement=this.domNodes.cartDrawer.querySelector(`.scd-item__quantity-selector-overlay[data-id="${id}"]`),itemBeingChangedSelector=`.scd-item.mini-cart__item[data-id="${id}"]`;let actualQuantity=parseInt(actualQuantityElem.value);if(qtyChange==="dec"?actualQuantity>0&&(actualQuantity-=1):actualQuantity+=1,actualQuantityElem.value=actualQuantity>=0?actualQuantity:0,item)return execDebounce(()=>changeQuantity(id,actualQuantity,itemOverlayElement,itemBeingChangedSelector));console.warn(`Cart item to change quantity not found. Key: ${id}`)}}),addEventDelegate({context:this.domNodes.cartDrawer,event:"change",selector:this.cartItemSelectors.qtyInput,handler:(e,input)=>{e.preventDefault();const{id}=input.dataset,quantity=Number(input.value);this.changeItemQty({id,quantity})}}),addEventDelegate({context:this.domNodes.cartDrawer,event:"keydown",selector:this.cartItemSelectors.qtyInput,handler:(e,input)=>{e.keyCode===13&&(e.preventDefault(),input.blur())}}),addEventDelegate({context:this.domNodes.cartDrawer,selector:this.cartItemSelectors.remove,handler:(e,removeBtn)=>{e.preventDefault();const{id}=removeBtn.dataset,item=this.getCartItemByKey(id);if(item){const index=this.cart.items.indexOf(item);this.changeItemQty({id,quantity:0})}else console.warn(`Cart item to remove not found. Key: ${id}`)}}),addEventDelegate({context:this.domNodes.cartDrawer,selector:this.cartItemSelectors.changeVariant,handler:async(e,changeVariantBtn)=>{e.preventDefault();const{id,selectedVariant:selectedVariantId}=changeVariantBtn.dataset,item=this.getCartItemByKey(id);id.includes(selectedVariantId)||item&&await this.addVariantToCart({actualLineItemKey:id,actualLineItemQuantity:item.quantity,selectedVariantId,isGWP:item.discounted_price===0})}}),addEventDelegate({context:this.domNodes.cartDrawer,selector:this.cartItemSelectors.changeSubscriptionType,handler:async(e,changeSubscriptionBtn)=>{e.preventDefault();const{id,selectedVariant:selectedVariantId,selectedSubscription,subscriptionRecurringDeliveries}=changeSubscriptionBtn.dataset,item=this.getCartItemByKey(id);item.selling_plan_allocation&&item.selling_plan_allocation.selling_plan&&parseInt(item.selling_plan_allocation.selling_plan.id)===parseInt(selectedSubscription)||await this.handleSubscriptionChange({actualLineItemKey:id,actualLineItemQuantity:item.quantity,selectedVariantId,selectedSubscription,subscriptionRecurringDeliveries,isGWP:item.discounted_price===0})}}),this.initCartCountDown(),this.initCartAddons(),(_window2=window)===null||_window2===void 0||(_window2$_ThemeEvent=_window2._ThemeEvent)===null||_window2$_ThemeEvent===void 0||(_window2$_ThemeEvent$=_window2$_ThemeEvent.subscribe)===null||_window2$_ThemeEvent$===void 0||_window2$_ThemeEvent$.call(_window2$_ThemeEvent,"ON_CART_UPDATE",cart=>{this.cart=cart,this.updateCartCount(cart)}),window.location.hash==="#openCart"&&this.openCartDrawer()}}cart_AmyrisTheme.Cart=new Cart;var SearchProductItem_createElement=__webpack_require__(6295).default,SearchProductItem_AmyrisThemeSettings=__webpack_require__(4558).AmyrisThemeSettings;function SearchProductItem({product}){var _product$featured_ima,_product$featured_ima2;let aspectRatio=product.featured_image.aspect_ratio;window.adminThemeSettings.pcard_image_ratio!=="original"&&(aspectRatio=window.adminThemeSettings.pcard_image_ratio);const style={"--aspect-ratio":aspectRatio};let comparePrice=null;Number(product.compare_at_price_max)>Number(product.price_min)&&(comparePrice=SearchProductItem_createElement("span",{className:"sf-currency text-color-secondary text-sm line-through mr-2"}),comparePrice.innerHTML=formatMoney(product.compare_at_price_max,SearchProductItem_AmyrisThemeSettings.money_format));const price=SearchProductItem_createElement("span",{className:"sf-currency"});return price.innerHTML=formatMoney(product.price_min,SearchProductItem_AmyrisThemeSettings.money_format),SearchProductItem_createElement("a",{href:product.url,className:"mb-3 flex flex-col group",dataSet:{productId:product?.id}},SearchProductItem_createElement("div",{className:"mb-3 w-full",style},SearchProductItem_createElement(LazyImage,{src:product==null||(_product$featured_ima=product.featured_image)===null||_product$featured_ima===void 0?void 0:_product$featured_ima.url,alt:product==null||(_product$featured_ima2=product.featured_image)===null||_product$featured_ima2===void 0?void 0:_product$featured_ima2.alt}),product.available?null:SearchProductItem_createElement("span",{class:"flex prod__tag prod__tag--soldout"},window.spratlyThemeStrings.soldOut||"Sold Out")),SearchProductItem_createElement("div",{className:"md:ml-0 w-full"},SearchProductItem_createElement("p",{className:"font-medium group-hover:text-color-primary-darker"},product.title),SearchProductItem_createElement("div",{className:"mt-1"},SearchProductItem_createElement("span",{className:"text-color-sale-price"},comparePrice),SearchProductItem_createElement("span",{className:"text-color-regular-price"},price))))}var search_createElement=__webpack_require__(6295).default,search_AmyrisTheme=__webpack_require__(4558).AmyrisTheme;class Search{constructor(){_defineProperty(this,"selectors",{container:"[data-search-container]",form:"form",input:"[data-search-input]",submit:'button[type="submit"]',loading:"[data-spinner]",clear:"[data-clear-search]",close:"[data-close-search]",moreResult:"[data-more-result]",resultContent:"[data-result]",popularSearches:"[data-popular-searches]",popularSearchItems:["[data-ps-item]"],searchItemsWrapper:"[data-search-items-wrapper]",searchItems:["[data-search-item]"],searchQuery:"[data-query]",searchMessage:"[data-message]"}),_defineProperty(this,"searchInputs",[]),_defineProperty(this,"transitionDuration",300),_defineProperty(this,"currScreen",""),_defineProperty(this,"predictiveSearch",void 0),_defineProperty(this,"enablePredictiveSearch",!0),_defineProperty(this,"init",()=>{const searchPopup=document.querySelector("[data-search-popup]");if(!searchPopup)return;this.enablePredictiveSearch=searchPopup.dataset.enablePredictiveSearch==="true",this.domNodes=queryDomNodes(this.selectors,searchPopup),this.domNodes.searchPopup=searchPopup,document.body.appendChild(searchPopup),addEventDelegate({selector:"[data-open-search-popup]",handler:()=>this.toggleSearchPopup(!0)});const{input,submit,clear,close,form}=this.domNodes;this.enablePredictiveSearch&&(this.initPredictiveSearch(),input.addEventListener("input",()=>{const query2=input.value;query2?(this.toggleSpinnerLoading(!0),this.toggleClearSearch(!0),this.predictiveSearch.query(query2)):(this.toggleSpinnerLoading(!1),this.toggleClearSearch(!1),this.toggleSearchContent(!1),this.togglePopularSearches(!0))})),input?.addEventListener("keydown",e=>{e.keyCode===27&&this.toggleSearchPopup(!1)}),submit.addEventListener("click",e=>{e.preventDefault(),input.value&&form.submit()}),clear.addEventListener("click",()=>{clear.style.visibility="hidden",input.value="",input.focus(),this.toggleSpinnerLoading(!1),this.toggleSearchContent(!1),this.togglePopularSearches(!0)}),close.addEventListener("click",e=>{this.toggleSearchPopup(!1)}),searchPopup.addEventListener("click",e=>{e.target===searchPopup&&this.toggleSearchPopup(!1)}),this.setPopularSearchesLink()}),_defineProperty(this,"setPopularSearchesLink",()=>{const{popularSearchItems}=this.domNodes;popularSearchItems.forEach(itm=>itm.href=createSearchLink(itm.dataset.psQuery))}),_defineProperty(this,"toggleSpinnerLoading",show=>{const{loading,submit}=this.domNodes;submit.style.visibility=show?"hidden":"visible",loading.style.visibility=show?"visible":"hidden"}),_defineProperty(this,"togglePopularSearches",show=>{const{popularSearches}=this.domNodes;popularSearches.style.display=show?"":"none"}),_defineProperty(this,"toggleClearSearch",show=>{const{clear}=this.domNodes;clear.style.visibility=show?"visible":"hidden"}),_defineProperty(this,"toggleSearchContent",show=>{var _resultContent$classL;const{resultContent}=this.domNodes,method=show?"remove":"add";resultContent==null||(_resultContent$classL=resultContent.classList)===null||_resultContent$classL===void 0||_resultContent$classL[method]("hidden")}),_defineProperty(this,"initPredictiveSearch",()=>{this.createPredictiveSearchInstance(),this.predictiveSearch.on("success",suggestions=>{try{var _suggestions$resource,_suggestions$resource2;const productSuggestions=(suggestions==null||(_suggestions$resource=suggestions.resources)===null||_suggestions$resource===void 0||(_suggestions$resource2=_suggestions$resource.results)===null||_suggestions$resource2===void 0?void 0:_suggestions$resource2.products)??[];this.toggleSpinnerLoading(!1),this.renderSearchQueryAndMessage(productSuggestions.length),this.togglePopularSearches(!productSuggestions.length),this.renderSearchResult(productSuggestions),this.toggleSearchContent(!0)}catch(err){throw console.error(err),err}}),this.predictiveSearch.on("error",console.error)}),_defineProperty(this,"createPredictiveSearchInstance",()=>{if(this.predictiveSearch)return;const{searchByTag,searchByBody,unavailableProductsOption}=this.domNodes.searchPopup.dataset||{},fields=[PredictiveSearch.FIELDS.TITLE,PredictiveSearch.FIELDS.VENDOR,PredictiveSearch.FIELDS.PRODUCT_TYPE,PredictiveSearch.FIELDS.VARIANTS_TITLE];searchByTag==="true"&&fields.push(PredictiveSearch.FIELDS.TAG),searchByBody==="true"&&fields.push(PredictiveSearch.FIELDS.BODY),this.predictiveSearch=new PredictiveSearch({resources:{type:[PredictiveSearch.TYPES.PRODUCT],limit:10,options:{unavailable_products:PredictiveSearch.UNAVAILABLE_PRODUCTS[unavailableProductsOption],fields}}})}),_defineProperty(this,"renderSearchQueryAndMessage",results=>{const{input,searchQuery,moreResult,searchMessage}=this.domNodes,query2=input.value,{resultsTitle}=searchMessage.dataset;searchMessage.textContent=resultsTitle,searchQuery.textContent=query2,results?(moreResult.parentElement.style.display="",moreResult.href=createSearchLink(query2)):(searchMessage.textContent=searchMessage.dataset.noResults,moreResult.parentElement.style.display="none")}),_defineProperty(this,"renderSearchResult",productSuggestions=>{const{searchItems,searchItemsWrapper}=this.domNodes;searchItemsWrapper.style.display=productSuggestions.length?"":"none",searchItems.forEach((item,ind)=>{if(ind>=productSuggestions.length)item.classList.add("hidden");else{const newItem=search_createElement(SearchProductItem,{product:productSuggestions[ind]}),currItem=item.firstChild;if(!currItem)item.appendChild(newItem);else{var _currItem$dataset;Number(currItem==null||(_currItem$dataset=currItem.dataset)===null||_currItem$dataset===void 0?void 0:_currItem$dataset.productId)!==productSuggestions[ind].id&&animateReplace(currItem,newItem)}item.classList.remove("hidden")}})}),_defineProperty(this,"toggleSearchPopup",show=>{const{searchPopup,input,container}=this.domNodes;show?(searchPopup.classList.remove("invisible"),searchPopup.classList.add("opacity-100"),container.classList.add("md:translate-y-0"),setTimeout(()=>{container.classList.remove("duration-300")},this.transitionDuration),input.focus()):(container.classList.remove("md:translate-y-0"),searchPopup.classList.remove("opacity-100"),setTimeout(()=>{searchPopup.classList.add("invisible"),container.classList.add("duration-300")},this.transitionDuration))}),this.init()}}search_AmyrisTheme.Search=new Search;var compare_product_createElement=__webpack_require__(6295).default,compare_product_AmyrisTheme=__webpack_require__(4558).AmyrisTheme;class CompareProduct{constructor(){_defineProperty(this,"storageKey","sf__compare-products"),_defineProperty(this,"products",[]),_defineProperty(this,"productNodes",{}),_defineProperty(this,"pageTemplate","page.product-compare"),_defineProperty(this,"addedClass","added-to-compare"),_defineProperty(this,"selectors",{container:".sf-prod-compare__container",noProducts:".sf-prod-compare__no_products",wrapper:".sf-prod-compare__wrapper",item:".sf-prod-compare",compareButton:".sf-prod-compare__button",compareText:".sf-prod-compare__button-content",removeButton:".sf-prod-compare__remove"}),_defineProperty(this,"init",()=>{window.spratlyThemeSettings.template===this.pageTemplate?(this.renderComparePage(),this.addEventToRemoveButtons()):(this.setCompareButtonsState(),this.addEventToCompareButtons())}),_defineProperty(this,"saveToStorage",()=>{this.products=Array.from(new Set(this.products)),localStorage.setItem(this.storageKey,JSON.stringify(this.products))}),_defineProperty(this,"setCompareButtonsState",()=>{document.querySelectorAll(this.selectors.compareButton).forEach(btn=>{var _btn$dataset,_btn$classList;const prodHandle=btn==null||(_btn$dataset=btn.dataset)===null||_btn$dataset===void 0?void 0:_btn$dataset.productHandle;this.products.indexOf(prodHandle)>=0&&!(btn!=null&&(_btn$classList=btn.classList)!==null&&_btn$classList!==void 0&&_btn$classList.contains(this.addedClass))&&this.toggleButtonState(btn,!0)})}),_defineProperty(this,"addEventToCompareButtons",()=>{addEventDelegate({selector:this.selectors.compareButton,handler:(e,btn)=>{var _btn$dataset2;e.preventDefault();const productHandle=btn==null||(_btn$dataset2=btn.dataset)===null||_btn$dataset2===void 0?void 0:_btn$dataset2.productHandle;if(productHandle){const active=!btn.classList.contains(this.addedClass);this.toggleButtonState(btn,active),document.querySelectorAll(this.selectors.compareButton).forEach(btnItem=>{var _btnItem$dataset;if((btnItem==null||(_btnItem$dataset=btnItem.dataset)===null||_btnItem$dataset===void 0?void 0:_btnItem$dataset.productHandle)===productHandle&&btnItem!==btn){var _btnItem$classList;const isAdded=!(btnItem!=null&&(_btnItem$classList=btnItem.classList)!==null&&_btnItem$classList!==void 0&&_btnItem$classList.contains(this.addedClass));this.toggleButtonState(btnItem,isAdded)}})}}})}),_defineProperty(this,"toggleButtonState",(btn,active)=>{var _btn$dataset3;const productHandle=btn==null||(_btn$dataset3=btn.dataset)===null||_btn$dataset3===void 0?void 0:_btn$dataset3.productHandle,compareText=btn.querySelector(this.selectors.compareText);if(active?(this.addToCompare(productHandle),btn.classList.add(this.addedClass)):(this.removeFromCompare(productHandle),btn.classList.remove(this.addedClass)),compareText){var _compareText$dataset;const temp=compareText==null||(_compareText$dataset=compareText.dataset)===null||_compareText$dataset===void 0?void 0:_compareText$dataset.revertText;compareText.dataset.revertText=compareText.textContent,compareText.textContent=temp}}),_defineProperty(this,"addEventToRemoveButtons",()=>{addEventDelegate({selector:this.selectors.removeButton,handler:(e,btn)=>{var _btn$dataset4;e.preventDefault();const prod=btn?.closest(this.selectors.wrapper);prod?.remove();const productHandle=btn==null||(_btn$dataset4=btn.dataset)===null||_btn$dataset4===void 0?void 0:_btn$dataset4.productHandle;productHandle&&(this.removeFromCompare(productHandle),this.products.length||this.showNoProductsMessage())}})}),_defineProperty(this,"renderComparePage",async()=>{const container=document.querySelector(this.selectors.container);if(container){let noItemAvailable=!0;if(this.products.length){const promises=this.products.map(async hdl=>{const prodHTML=await(0,utilities_fetch.fetchCache)(`/products/${hdl}?view=compare`),item=compare_product_createElement("div",{className:`hidden ${this.selectors.wrapper.replace(".","")}`});item.innerHTML=prodHTML,item.querySelector(this.selectors.item)&&(noItemAvailable=!1,this.productNodes[hdl]=item)});await Promise.all(promises),this.products.forEach(hdl=>{const prodNode=this.productNodes[hdl];prodNode&&(container.appendChild(prodNode),prodNode.classList.remove("hidden"))}),window.spratlyTheme.Products.initProductForms().catch(console.error)}noItemAvailable&&this.showNoProductsMessage(),container.classList.add("opacity-100")}}),_defineProperty(this,"showNoProductsMessage",()=>{const container=document.querySelector(this.selectors.container),noProducts=document.querySelector(this.selectors.noProducts);document.documentElement.classList.add("grow-full"),container.classList.add("hidden"),noProducts.classList.remove("hidden")}),this.products=Array.from(new Set(Array.from(JSON.parse(localStorage.getItem(this.storageKey))||[]))),this.init()}addToCompare(handle){handle&&this.products.indexOf(handle)===-1&&(this.products.push(handle),this.saveToStorage())}removeFromCompare(handle){this.products=this.products.filter(hdl=>hdl!==handle),this.saveToStorage()}}compare_product_AmyrisTheme.CompareProduct=new CompareProduct;var WishlistRemoveButton_createElement=__webpack_require__(6295).default;function WishlistRemoveButton({productHandle}){return WishlistRemoveButton_createElement("div",{className:"block md:hidden absolute z-10 right-5 top-5"},WishlistRemoveButton_createElement("div",{className:"sf__tooltip-item sf-wishlist__remove",dataSet:{productHandle}},WishlistRemoveButton_createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},WishlistRemoveButton_createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}))))}var wishlist_createElement=__webpack_require__(6295).default,wishlist_AmyrisTheme=__webpack_require__(4558).AmyrisTheme;class Wishlist{constructor(){_defineProperty(this,"isWishlistPage",!1),_defineProperty(this,"storageKey","sf__wishlist-products"),_defineProperty(this,"products",[]),_defineProperty(this,"productNodes",{}),_defineProperty(this,"pageTemplate","page.wishlist"),_defineProperty(this,"addedClass","added-to-wishlist"),_defineProperty(this,"hasItemClass","wishlist-has-item"),_defineProperty(this,"selectors",{container:".sf-wishlist__container",noProducts:".sf-wishlist__no_products",wrapper:".sf-wishlist__wrapper",productCard:".sf__pcard",wishlistButton:".sf-wishlist__button",wishlistText:".sf-wishlist__button-content",removeButton:".sf-wishlist__remove",count:".sf-wishlist-count"}),_defineProperty(this,"init",async()=>{this.isWishlistPage&&(await this.renderWishlistPage(),this.addEventToRemoveButtons()),this.setWishlistButtonsState(),this.addEventToWishlistButtons(),this.updateWishlistCount()}),_defineProperty(this,"saveToStorage",()=>{this.products=Array.from(new Set(this.products)),localStorage.setItem(this.storageKey,JSON.stringify(this.products))}),_defineProperty(this,"setWishlistButtonsState",()=>{document.querySelectorAll(this.selectors.wishlistButton).forEach(btn=>{var _btn$dataset,_btn$classList;const prodHandle=btn==null||(_btn$dataset=btn.dataset)===null||_btn$dataset===void 0?void 0:_btn$dataset.productHandle;this.products.indexOf(prodHandle)>=0&&!(btn!=null&&(_btn$classList=btn.classList)!==null&&_btn$classList!==void 0&&_btn$classList.contains(this.addedClass))&&(this.toggleButtonState(btn,!0),this.isWishlistPage&&(btn.classList.remove(this.selectors.wishlistButton.replace(".","")),btn.classList.add(this.selectors.removeButton.replace(".",""))))})}),_defineProperty(this,"updateWishlistCount",()=>{const size=this.products.length;[...document.querySelectorAll(this.selectors.count)].forEach(elem=>{elem.textContent=size});const method=size?"add":"remove";document.body.classList[method](this.hasItemClass)}),_defineProperty(this,"addEventToWishlistButtons",()=>{addEventDelegate({selector:this.selectors.wishlistButton,handler:(e,btn)=>{var _btn$dataset2;e.preventDefault();const productHandle=btn==null||(_btn$dataset2=btn.dataset)===null||_btn$dataset2===void 0?void 0:_btn$dataset2.productHandle;if(productHandle){const active=!btn.classList.contains(this.addedClass);this.toggleButtonState(btn,active),this.updateWishlistCount(),document.querySelectorAll(this.selectors.wishlistButton).forEach(btnItem=>{var _btnItem$dataset;if((btnItem==null||(_btnItem$dataset=btnItem.dataset)===null||_btnItem$dataset===void 0?void 0:_btnItem$dataset.productHandle)===productHandle&&btnItem!==btn){var _btnItem$classList;const isAdded=!(btnItem!=null&&(_btnItem$classList=btnItem.classList)!==null&&_btnItem$classList!==void 0&&_btnItem$classList.contains(this.addedClass));this.toggleButtonState(btnItem,isAdded)}})}}})}),_defineProperty(this,"toggleButtonState",(btn,active)=>{var _btn$dataset3;const productHandle=btn==null||(_btn$dataset3=btn.dataset)===null||_btn$dataset3===void 0?void 0:_btn$dataset3.productHandle,wishlistText=btn.querySelector(this.selectors.wishlistText);if(active?(this.addToWishlist(productHandle),btn.classList.add(this.addedClass)):(this.removeFromWishlist(productHandle),btn.classList.remove(this.addedClass)),wishlistText){var _wishlistText$dataset;const temp=wishlistText==null||(_wishlistText$dataset=wishlistText.dataset)===null||_wishlistText$dataset===void 0?void 0:_wishlistText$dataset.revertText;wishlistText.dataset.revertText=wishlistText.textContent,wishlistText.textContent=temp}}),_defineProperty(this,"addEventToRemoveButtons",()=>{addEventDelegate({selector:this.selectors.removeButton,handler:(e,btn)=>{var _btn$dataset4;e.preventDefault();const prod=btn?.closest(this.selectors.wrapper);prod?.remove();const productHandle=btn==null||(_btn$dataset4=btn.dataset)===null||_btn$dataset4===void 0?void 0:_btn$dataset4.productHandle;productHandle&&(this.removeFromWishlist(productHandle),this.updateWishlistCount(),this.products.length||this.showNoProductsMessage())}})}),_defineProperty(this,"renderWishlistPage",async()=>{const container=document.querySelector(this.selectors.container);if(container){let noItemAvailable=!0;if(this.products.length){const{root}=window.spratlyThemeSettings.routes,promises=this.products.map(async hdl=>{const prodHTML=await(0,utilities_fetch.fetchCache)(`${root!=="/"?root:""}/products/${hdl}?view=grid-card-item`),item=wishlist_createElement("div",{className:`hidden relative ${this.selectors.wrapper.replace(".","")}`});item.innerHTML=prodHTML,item.querySelector(this.selectors.productCard)&&(noItemAvailable=!1,item.appendChild(wishlist_createElement(WishlistRemoveButton,{productHandle:hdl})),this.productNodes[hdl]=item)});await Promise.all(promises),this.products.forEach(hdl=>{const prod=this.productNodes[hdl];prod&&(container.appendChild(prod),prod.classList.remove("hidden"))}),window.spratlyTheme.Products.initProductForms().catch(console.error)}noItemAvailable?this.showNoProductsMessage():this.setWishlistButtonsState(),container.classList.add("opacity-100")}}),_defineProperty(this,"showNoProductsMessage",()=>{const container=document.querySelector(this.selectors.container),noProducts=document.querySelector(this.selectors.noProducts);document.documentElement.classList.add("grow-full"),container.classList.add("hidden"),noProducts.classList.remove("hidden")}),this.products=Array.from(new Set(Array.from(JSON.parse(localStorage.getItem(this.storageKey))||[]))),this.isWishlistPage=window.spratlyThemeSettings.template===this.pageTemplate,this.init()}addToWishlist(handle){handle&&this.products.indexOf(handle)===-1&&(this.products.push(handle),this.saveToStorage())}removeFromWishlist(handle){this.products=this.products.filter(hdl=>hdl!==handle),this.saveToStorage()}}wishlist_AmyrisTheme.Wishlist=new Wishlist,window.IntersectionObserver||loadJS("https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver");function handleBackgroundImageLazyload(){return addIntersectionObserver("sf-bg-lazy")}handleBackgroundImageLazyload();async function addIntersectionObserver(classSelector,newClass=""){let lazyImages=[].slice.call(document.getElementsByClassName(classSelector));if("IntersectionObserver"in window){let lazyImageObserver=new IntersectionObserver(function(entries,observer){entries.forEach(function(entry){if(entry.isIntersecting){let lazyImage=entry.target;lazyImage.classList.remove(classSelector),newClass&&lazyImage.classList.remove(newClass),lazyImageObserver.unobserve(lazyImage)}})});lazyImages.forEach(function(lazyImage){lazyImageObserver.observe(lazyImage)})}}function observeElement(target,callback,option=null){new IntersectionObserver(callback,option).observe(target)}var Element_prototype_closest=__webpack_require__(1339),Node_prototype_replaceWith=__webpack_require__(1713),Node_prototype_after=__webpack_require__(2297),Node_prototype_prepend=__webpack_require__(598),shopify=__webpack_require__(5118),app_AmyrisTheme=__webpack_require__(4558).AmyrisTheme;function initTheme(){window._ThemeEvent=new events_Event,runHelpers(),loadAllSections(),app_AmyrisTheme.Products.initProductForms().catch(console.error)}initTheme()})()})();
//# sourceMappingURL=/s/files/1/0274/4044/7587/t/719/assets/app.js.map?v=82339254017282163901685566284
